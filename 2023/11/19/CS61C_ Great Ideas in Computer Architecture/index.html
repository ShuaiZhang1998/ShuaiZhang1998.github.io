

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Zs">
  <meta name="keywords" content="">
  
    <meta name="description" content="è¯¾ç¨‹ç½‘ç«™ï¼šhttps:&#x2F;&#x2F;cs61c.org&#x2F;su20&#x2F; B ç«™ https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1fC4y147iZ&#x2F;?vd_source&#x3D;518199b8942410d3723d3db827513479 https:&#x2F;&#x2F;www.youtube.com&#x2F;playlist?list&#x3D;PLDoI-XvXO0aqgoMQvogzmf7CKiSMSUS3M https">
<meta property="og:type" content="article">
<meta property="og:title" content="cs16c">
<meta property="og:url" content="http://shuaizhang1998.github.io/2023/11/19/CS61C_%20Great%20Ideas%20in%20Computer%20Architecture/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="è¯¾ç¨‹ç½‘ç«™ï¼šhttps:&#x2F;&#x2F;cs61c.org&#x2F;su20&#x2F; B ç«™ https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1fC4y147iZ&#x2F;?vd_source&#x3D;518199b8942410d3723d3db827513479 https:&#x2F;&#x2F;www.youtube.com&#x2F;playlist?list&#x3D;PLDoI-XvXO0aqgoMQvogzmf7CKiSMSUS3M https">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-11-19T15:08:27.480Z">
<meta property="article:modified_time" content="2023-11-19T15:11:00.371Z">
<meta property="article:author" content="Zs">
<meta property="article:tag" content="ç¬”è®°">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>cs16c - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"shuaizhang1998.github.io","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="cs16c"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-11-19 23:08" pubdate>
          2023å¹´11æœˆ19æ—¥ æ™šä¸Š
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          51k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          423 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">cs16c</h1>
            
            
              <div class="markdown-body">
                
                <ul>
<li>è¯¾ç¨‹ç½‘ç«™ï¼š<a
target="_blank" rel="noopener" href="https://cs61c.org/su20/">https://cs61c.org/su20/</a></li>
<li>B ç«™ <a
target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1fC4y147iZ/?vd_source=518199b8942410d3723d3db827513479">https://www.bilibili.com/video/BV1fC4y147iZ/?vd_source=518199b8942410d3723d3db827513479</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLDoI-XvXO0aqgoMQvogzmf7CKiSMSUS3M">https://www.youtube.com/playlist?list=PLDoI-XvXO0aqgoMQvogzmf7CKiSMSUS3M</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/PKUFlyingPig/CS61C-summer20/tree/master/slides">https://github.com/PKUFlyingPig/CS61C-summer20/tree/master/slides</a></li>
</ul>
<h1 id="lecture-1-number-representation">Lecture 1 Number
Representation</h1>
<ul>
<li><p>numbers representate everything</p>
<p>æ•°å­—å¯ä»¥è¡¨ç¤ºä»»ä½•ä¸œè¥¿ï¼Œåªéœ€è¦å¯¹å…¶èµ‹äºˆæ„ä¹‰ï¼Œä¾‹å¦‚å¯¹äº1-10æ¥è¯´</p>
<ul>
<li>å¯ä»¥ä»£è¡¨10ä¸ªæ­£æ•°</li>
<li>å¯ä»¥ä»£è¡¨10ä¸ªä¸åŒçš„ä¸œè¥¿</li>
<li>....</li>
</ul></li>
<li><p>ä¸ºä»€ä¹ˆä½¿ç”¨äºŒè¿›åˆ¶</p>
<ul>
<li>æ¶‰åŠåˆ°ç”µæ°”çš„ç‰¹æ€§ï¼Œ2è¿›åˆ¶ä¿¡å·å¯ä»¥ç®€å•çš„ç”¨é«˜ä½ç”µå¹³æ¥è¡¨ç¤ºï¼Œè¿™æä¾›äº†æ›´å¤§çš„å®¹é”™ç‡ï¼Œåœ¨ä¸€å®šçš„ç”µå‹åŒºé—´ä¸­ï¼Œè¿›åˆ¶è¶Šé«˜ï¼Œé”™è¯¯ç‡è¶Šé«˜ã€‚</li>
<li><span class="math inline">\(C_{10} = a[n-1] \cdot r^{n-1} + a[n-2]
\cdot r^{n-2} + \ldots + a[0] \cdot r^0\)</span> <span
class="math inline">\(r\)</span>ä»£è¡¨<span
class="math inline">\(r\)</span>è¿›åˆ¶</li>
<li><span class="math inline">\(1011 = 1*2^0+1*2^1+0+1*2^3\)</span></li>
</ul></li>
<li><p>æ€ä¹ˆè¡¨ç¤ºæœ‰ç¬¦å·æ•°</p>
<ul>
<li>Sign and Magnitude ï¼ˆç¬¦å·-å¹…åº¦ åŸç ï¼‰
<ul>
<li>æœ€é«˜ä½ä»£è¡¨ç¬¦å·ä½ï¼Œå…¶ä½™ä½ä»£è¡¨æ•°å€¼ï¼Œç¼ºç‚¹æ˜¯ï¼ˆåŒæ—¶å­˜åœ¨ä¸¤ç§0ï¼š<code>100</code>
= <code>000</code>)</li>
</ul></li>
<li>Biased Notation ï¼ˆåç½®æ³•ï¼‰
<ul>
<li>æ€æƒ³å°±æ˜¯å®šä¹‰åŸŸçš„ç§»åŠ¨ï¼Œé€‰å–æŸä¸ªæ­£åŒºé—´ä¸­çš„æŸä¸ªæ•°ä½œä¸º<code>0</code><br />
</li>
</ul></li>
<li>Oneâ€˜s Complement ï¼ˆ1è¡¥æ•° åç ï¼‰
<ul>
<li>åŒæ ·ä½¿å¾—æœ€é«˜ä½ä»£è¡¨ç¬¦å·ä½ï¼Œæœ€å¤§æ­£æ•°ä¸º<code>0111...111</code>,æœ€å°è´Ÿæ•°ä¸º<code>100...000</code>,åŒæ ·å­˜åœ¨ä¸¤ä¸ª<code>0</code>ï¼ˆ<code>000 = 111</code>ï¼‰ï¼Œæœ‰æº¢å‡ºé—®é¢˜(å¾ªç¯ç§»ä½ï¼‰</li>
</ul></li>
<li>Twoâ€˜s Complement <strong>ï¼ˆ2è¡¥æ•° è¡¥ç ï¼‰</strong>
<ul>
<li>ç°åœ¨éƒ½åœ¨ç”¨çš„ï¼Œå¤„ç†æº¢å‡ºé—®é¢˜æ¯”è¾ƒç®€å•ï¼ˆ<code>++ -&gt; -</code>
<code>-- -&gt; +</code> <code>+(-)- -&gt; -</code>
<code>-(-)+ -&gt;+</code>ï¼Œç°ä»£å¤„ç†å™¨æ£€æŸ¥æº¢å‡ºæ ‡å¿—ä½</li>
<li><code>111...111</code>ä¸åœ¨ä»£è¡¨<code>0</code>è€Œæ˜¯ä»£è¡¨<code>1</code></li>
</ul></li>
</ul></li>
<li><p>æœ‰ç¬¦å·æ•°çš„å¤„ç†</p>
<ul>
<li>Sign Extension å¾ˆå¤šæ“ä½œéœ€è¦ï¼Œä¾‹å¦‚ä¸åŒä½å®½æ•°æ®çš„è¿ç®—
<ul>
<li>æ­£æ•°æ·»åŠ å‰å¯¼0å³å¯ï¼Œè´Ÿæ•°åˆ™éœ€è¦å…ˆå¤åˆ¶ç¬¦å·ä½ï¼Œç„¶åå†å¤åˆ¶å…¶ä½™ä½ã€‚ç¬¦å·ä½å¤åˆ¶å¤šå°‘æ¬¡å–å†³äºæ–°çš„ä½å®½ï¼Œä¾‹å¦‚ä»8ä½åˆ°16ä½ï¼Œåˆ™éœ€è¦æŠŠç¬¦å·ä½å¤åˆ¶8æ¬¡ã€‚</li>
</ul></li>
</ul></li>
<li><p>è½¬æ¢è§„åˆ™æ¨è</p>
<ul>
<li><code>Ki=1024</code> ï¼Œè€Œ<code>K=1000</code>
ã€‚<code>B</code>æ˜¯å­—èŠ‚ï¼ˆByteï¼‰ ï¼Œè€Œ<code>b</code>æ˜¯äºŒè¿›åˆ¶ä½</li>
</ul></li>
<li><p>åŸç ï¼Œåç ï¼Œè¡¥ç  ç”¨è¡¥ç è¿ç®—ï¼Œç”¨åŸç çœ‹ç»“æœ</p>
<ul>
<li>0ä¸‰ç éƒ½ä¸º0</li>
<li>æ­£æ•°ä¸‰ç ç›¸ç­‰</li>
<li>è´Ÿæ•°åç æ˜¯åŸç ç¬¦å·ä½ä»¥å¤–å…¨éƒ¨å–åï¼Œè¡¥ç åœ¨åç åŸºç¡€ä¸ŠåŠ 1</li>
</ul></li>
</ul>
<h1 id="lecture-2-intro-with-c">Lecture 2 Intro with c</h1>
<ul>
<li>å­¦å®Œ<code>Introductory C Programming Specialization</code>å³å¯</li>
</ul>
<h1 id="lecture-3-intro-with-array">Lecture 3 Intro with array</h1>
<ul>
<li><p>å­¦å®Œ<code>Introductory C Programming Specialization</code>å³å¯ #
Lecture 4 Memory Management and Usage</p></li>
<li><p>å­¦å®Œ<code>Introductory C Programming Specialization</code>å³å¯</p></li>
</ul>
<h1 id="lecture-5-floating-representation">Lecture 5 floating
representation</h1>
<ul>
<li>åè¿›åˆ¶oräºŒè¿›åˆ¶<code>**ç‚¹åˆ†æ³•**</code>ç†è®ºä¸Šå¯ä»¥è¡¨ç¤ºæ— ç©·çš„ç²¾åº¦
<ul>
<li>ä¾‹å¦‚<span class="math inline">\(\frac{1}{3} =
0.333.....\)</span></li>
<li>ä¾‹å¦‚<span class="math inline">\(\frac{1}{10} =
0.0001100011...\)</span></li>
<li>ä¸ºä»€ä¹ˆä¼šå‡ºç°æ— é™å¾ªç¯å°æ•°</li>
</ul></li>
</ul>
<hr />
<p><strong>å®šç†</strong>ï¼šè€ƒè™‘ä¸€ä¸ªåˆ†æ•°<span
class="math inline">\(\frac{a}{b} ï¼ˆå…¶ä¸­b \neq 0 )\)</span>ï¼Œè‹¥å…¶åœ¨<span
class="math inline">\(N\)</span>è¿›åˆ¶ä¸‹è¡¨ç¤ºä¸ºæœ‰é™å°æ•°ï¼Œåˆ™åˆ†æ¯<span
class="math inline">\(b\)</span>çš„æ‰€æœ‰è´¨å› å­å¿…é¡»æ˜¯è¿›åˆ¶æ•°<span
class="math inline">\(N\)</span>çš„è´¨å› å­ã€‚</p>
<p><strong>è¯æ˜</strong>ï¼š</p>
<ol type="1">
<li>è®¾<span class="math inline">\(N\)</span>çš„è´¨å› å­åˆ†è§£ä¸ºï¼š<span
class="math inline">\(N = p_1^{k_1} p_2^{k_2} \dots
p_m^{k_m}\)</span>ï¼Œå…¶ä¸­ï¼Œ<span class="math inline">\(p_1, p_2, \dots,
p_m\)</span>æ˜¯è´¨æ•°ï¼Œä¸”<span class="math inline">\(k_1, k_2, \dots,
k_m\)</span>æ˜¯æ­£æ•´æ•°ã€‚</li>
<li>è‹¥<span class="math inline">\(\frac{a}{b}\)</span>åœ¨<span
class="math inline">\(N\)</span>è¿›åˆ¶ä¸‹æ˜¯æœ‰é™å°æ•°ï¼Œåˆ™å­˜åœ¨æŸä¸ªæ­£æ•´æ•°<span
class="math inline">\(s\)</span>ä½¿å¾—<span class="math inline">\(b \times
N^s\)</span>æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚è¿™æ„å‘³ç€ï¼š</li>
</ol>
<p><span class="math inline">\(b \times N^s = b \times p_1^{k_1 s}
p_2^{k_2 s} \dots p_m^{k_m s}\)</span>æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚</p>
<ol start="3" type="1">
<li>ç°åœ¨è€ƒè™‘<span class="math inline">\(b\)</span>çš„è´¨å› å­åˆ†è§£ã€‚è‹¥<span
class="math inline">\(b\)</span>æœ‰ä¸€ä¸ªè´¨å› å­<span
class="math inline">\(q\)</span>ä¸æ˜¯<span
class="math inline">\(N\)</span>çš„è´¨å› å­ï¼ˆ å³<span
class="math inline">\(q\)</span>ä¸ç­‰äºä»»ä½•çš„<span
class="math inline">\(p_i\)</span>ï¼‰ï¼Œåˆ™å¯¹äºä»»ä½•æ­£æ•´æ•°<span
class="math inline">\(s\)</span>ï¼Œä¹˜ç§¯<span class="math inline">\(b
\times N^s\)</span>éƒ½ä¸å¯èƒ½æ˜¯æ•´æ•°ï¼Œå› ä¸ºæ— æ³•æ¶ˆé™¤è¿™ä¸ªâ€œå¤–éƒ¨â€è´¨å› å­<span
class="math inline">\(q\)</span>ã€‚</li>
</ol>
<hr />
<ul>
<li>äºŒè¿›åˆ¶ç‚¹åˆ†æ³•ä¸­çš„ç‚¹çš„ä½ç½®ä¸ç¡®å®š(å¤šå°‘ä½è¡¨ç¤ºæ•´æ•°ï¼Œå¤šå°‘ä½è¡¨ç¤ºå°æ•°)ï¼Œæ‰€ä»¥å¼•å…¥<code>äºŒè¿›åˆ¶ç§‘å­¦è®¡æ•°æ³•</code>
<ul>
<li>ä¼˜ç‚¹
<ul>
<li>ç›¸å¯¹äºäºŒè¿›åˆ¶ç‚¹åˆ†æ³•
è¡¨ç¤ºçš„èŒƒå›´èƒ½å¤Ÿå¾ˆè½»æ¾çš„é€šè¿‡è°ƒæ•´æŒ‡æ•°å’Œå°¾æ•°æ¥<strong>æ‰©å¤§æˆ–å‡å°æ•°çš„èŒƒå›´</strong></li>
</ul></li>
<li>ç¼ºç‚¹
<ul>
<li>å®é™…è®¡ç®—çš„èˆå…¥è¯¯å·® ï¼ˆå°¾æ•°ä½æœ‰é™å¯¼è‡´ï¼‰</li>
<li>ä¸ç²¾ç¡®çš„è¡¨ç¤º ï¼ˆå°¾æ•°ä½æœ‰é™å¯¼è‡´ï¼‰</li>
</ul></li>
</ul></li>
</ul>
<hr />
<p>ç»™å®šä¸€ä¸ªéé›¶å®æ•° <span
class="math inline">\(x\)</span>ï¼Œåœ¨äºŒè¿›åˆ¶ç§‘å­¦è®¡æ•°æ³•ä¸­ï¼Œ<span
class="math inline">\(x\)</span> å¯ä»¥è¡¨ç¤ºä¸ºï¼š <span
class="math inline">\(x = (-1)^s \times 1.f_1 f_2 f_3 \ldots \times
2^e\)</span> å…¶ä¸­ï¼š</p>
<ol type="1">
<li><span class="math inline">\(s\)</span> æ˜¯ç¬¦å·ä½ï¼Œå½“ <span
class="math inline">\(x\)</span> ä¸ºæ­£æ•°æ—¶ <span class="math inline">\(s
= 0\)</span>ï¼Œå½“ <span class="math inline">\(x\)</span> ä¸ºè´Ÿæ•°æ—¶ <span
class="math inline">\(s = 1\)</span>ã€‚</li>
<li><span class="math inline">\(1.f_1 f_2 f_3 \ldots\)</span>
æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å°æ•°ï¼ˆ<code>å°¾æ•°</code>ï¼‰ï¼Œå…¶ä¸­ <span
class="math inline">\(f_i\)</span> æ˜¯ä½äºå°æ•°ç‚¹åçš„ç¬¬ <span
class="math inline">\(i\)</span> ä½çš„æ•°å­—ï¼Œæ¯ä¸ª <span
class="math inline">\(f_i\)</span> è¦ä¹ˆä¸º <span
class="math inline">\(0\)</span> è¦ä¹ˆä¸º <span
class="math inline">\(1\)</span>ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬é»˜è®¤å°æ•°ç‚¹å‰æœ‰ä¸€ä¸ª<span
class="math inline">\(1\)</span>ï¼Œè¿™æ˜¯å› ä¸ºåœ¨äºŒè¿›åˆ¶ç§‘å­¦è®¡æ•°æ³•çš„è§„èŒƒåŒ–è¡¨ç¤ºä¸­ï¼Œéé›¶æ•°çš„æœ€é«˜æœ‰æ•ˆä½<strong>æ€»æ˜¯1ã€‚</strong></li>
<li><span class="math inline">\(e\)</span>
æ˜¯ä¸€ä¸ªæ•´æ•°ï¼ˆ<code>æŒ‡æ•°</code>ï¼‰ï¼Œä»£è¡¨äºŒè¿›åˆ¶æŒ‡æ•°ã€‚</li>
</ol>
<p>ä¾‹å¦‚ï¼Œæ•°å­— <span class="math inline">\(13\)</span> åœ¨äºŒè¿›åˆ¶ä¸­è¡¨ç¤ºä¸º
<span class="math inline">\(1101\)</span>ï¼Œå…¶äºŒè¿›åˆ¶ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºä¸º
<span class="math inline">\(1.101 \times 2^3\)</span>ã€‚ åœ¨è®¡ç®—æœºçš„IEEE
754æµ®ç‚¹æ•°è¡¨ç¤ºæ³•ä¸­ï¼Œå› ä¸ºæœ€é«˜æœ‰æ•ˆä½æ€»æ˜¯1ï¼Œæ‰€ä»¥é€šå¸¸ä¼šçœç•¥å®ƒä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚è¿™æ˜¯æ‰€è°“çš„"éšè—ä½"æŠ€æœ¯ã€‚</p>
<hr />
<ul>
<li>IEEE754æ˜¯ç›®å‰å¸¸ç”¨çš„æ ‡å‡†</li>
</ul>
<p><code>ç¬¦å·ä½ï¼ˆ1ä½ï¼‰``æŒ‡æ•°ä½ï¼ˆé˜¶ç  8ä½æ— ç¬¦å·æ•°ï¼‰``å°¾æ•°ä½ï¼ˆå°æ•°ä½ 23ä½ï¼‰</code>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">annotated_ieee754_conversion</span>(<span class="hljs-params">num</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Convert a floating-point number to its IEEE 754 single-precision representation.</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    Parameters:</span><br><span class="hljs-string">    - num: Floating-point number to be converted</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    Returns:</span><br><span class="hljs-string">    - Tuple containing (sign_bit, exponent_binary, fraction_bits)</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <br>    <span class="hljs-comment"># Step 1: Determine the sign bit</span><br>    <span class="hljs-comment"># If the number is positive or zero, sign bit is 0. Otherwise, it&#x27;s 1.</span><br>    sign_bit = <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> num &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">1</span><br>    <br>    <span class="hljs-comment"># Convert the number to positive for further processing.</span><br>    num = <span class="hljs-built_in">abs</span>(num)<br><br>    <span class="hljs-comment"># Step 2: Convert the number to binary representation.</span><br>    <span class="hljs-comment"># Convert the integer part of the number to binary.</span><br>    int_part = <span class="hljs-built_in">int</span>(num)<br>    int_binary = <span class="hljs-built_in">bin</span>(int_part)[<span class="hljs-number">2</span>:]<br>    <br>    <span class="hljs-comment"># Convert the fractional part of the number to binary.</span><br>    frac_num = num - int_part<br>    frac_binary = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(frac_binary) &lt; <span class="hljs-number">40</span> <span class="hljs-keyword">and</span> frac_num != <span class="hljs-number">0</span>:  <span class="hljs-comment"># Limit to 40 bits for precision.</span><br>        frac_num *= <span class="hljs-number">2</span><br>        frac_bit = <span class="hljs-built_in">int</span>(frac_num)<br>        frac_binary += <span class="hljs-built_in">str</span>(frac_bit)<br>        frac_num -= frac_bit<br><br>    <span class="hljs-comment"># Combine the integer and fractional parts.</span><br>    combined_binary = int_binary + frac_binary<br>    <br>    <span class="hljs-comment"># Step 3: Normalize the binary representation.</span><br>    normalized_position = combined_binary.index(<span class="hljs-string">&#x27;1&#x27;</span>)<br>    <br>    <span class="hljs-comment"># Calculate the number of shifts required to normalize the number.</span><br>    shift = <span class="hljs-built_in">len</span>(int_binary) - <span class="hljs-number">1</span> - normalized_position <br>    <br>    <span class="hljs-comment"># Step 4: Calculate the biased exponent.</span><br>    <span class="hljs-comment"># IEEE 754 single-precision format uses a bias of 127.</span><br>    exponent_with_bias = shift + <span class="hljs-number">127</span><br>    exponent_binary = <span class="hljs-built_in">bin</span>(exponent_with_bias)[<span class="hljs-number">2</span>:].rjust(<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;0&#x27;</span>)<br>    <br>    <span class="hljs-comment"># Step 5: Determine the fraction part with rounding.</span><br>    fraction_24_bits = combined_binary[normalized_position+<span class="hljs-number">1</span>:normalized_position+<span class="hljs-number">25</span>].ljust(<span class="hljs-number">24</span>, <span class="hljs-string">&#x27;0&#x27;</span>) <span class="hljs-comment"># Ensure length</span><br><br>    <span class="hljs-comment"># Implement the &quot;round to nearest, ties to even&quot; strategy.</span><br>    <span class="hljs-keyword">if</span> fraction_24_bits[-<span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;1&#x27;</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">in</span> fraction_24_bits[<span class="hljs-number">1</span>:] <span class="hljs-keyword">or</span> fraction_24_bits[-<span class="hljs-number">2</span>] == <span class="hljs-string">&#x27;1&#x27;</span>:<br>            fraction_bits = <span class="hljs-built_in">bin</span>(<span class="hljs-built_in">int</span>(fraction_24_bits[:-<span class="hljs-number">1</span>], <span class="hljs-number">2</span>) + <span class="hljs-number">1</span>)[<span class="hljs-number">2</span>:].rjust(<span class="hljs-number">23</span>, <span class="hljs-string">&#x27;0&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            fraction_bits = fraction_24_bits[:-<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">else</span>:<br>        fraction_bits = fraction_24_bits[:-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-keyword">return</span> (sign_bit, exponent_binary, fraction_bits)<br><br><span class="hljs-comment"># The testing part remains the same as before.</span><br>consistent = <span class="hljs-literal">True</span><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>):<br>    random_num = random.uniform(-<span class="hljs-number">1e6</span>, <span class="hljs-number">1e6</span>)<br>    single_precision_num = <span class="hljs-built_in">float</span>(random_num)<br>    manual_ieee754 = annotated_ieee754_conversion(single_precision_num)<br>    <br>    binary_representation = <span class="hljs-built_in">format</span>(struct.unpack(<span class="hljs-string">&#x27;!I&#x27;</span>, struct.pack(<span class="hljs-string">&#x27;!f&#x27;</span>, single_precision_num))[<span class="hljs-number">0</span>], <span class="hljs-string">&#x27;032b&#x27;</span>)<br>    builtin_sign_bit = <span class="hljs-built_in">int</span>(binary_representation[<span class="hljs-number">0</span>])<br>    builtin_exponent = binary_representation[<span class="hljs-number">1</span>:<span class="hljs-number">9</span>]<br>    builtin_fraction = binary_representation[<span class="hljs-number">9</span>:]<br>    builtin_ieee754 = (builtin_sign_bit, builtin_exponent, builtin_fraction)<br>    <br>    <span class="hljs-keyword">if</span> manual_ieee754 != builtin_ieee754:<br>        consistent = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">break</span><br><br>consistent<br><br></code></pre></td></tr></table></figure></p>
<ul>
<li>æµ®ç‚¹æ•°å­˜åœ¨ç²¾åº¦é—®é¢˜</li>
</ul>
<p><strong>åŸºæœ¬æ¦‚å¿µ</strong>: IEEE 754
æµ®ç‚¹æ•°ä½¿ç”¨å›ºå®šæ•°é‡çš„ä½æ¥è¡¨ç¤ºå®æ•°ã€‚ç”±äºå®æ•°èŒƒå›´æ˜¯æ— é™çš„ï¼Œè€Œæˆ‘ä»¬çš„è¡¨ç¤ºä½æ•°æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥å¿…ç„¶ä¼šæœ‰ç²¾åº¦æŸå¤±ã€‚
<strong>å…·ä½“é—®é¢˜</strong>ï¼š</p>
<ol type="1">
<li><strong>éè§„èŒƒåŒ–æ•°ä¸è§„èŒƒåŒ–æ•°</strong>:
å½“æ•°å€¼éå¸¸æ¥è¿‘äº0ï¼Œæˆ‘ä»¬ä½¿ç”¨éè§„èŒƒåŒ–æ•°æ¥è¡¨ç¤ºã€‚è¿™æ„å‘³ç€æˆ‘ä»¬æ”¾å¼ƒäº†ä¸€ä¸ªéšå«çš„å‰å¯¼1ï¼Œä»¥è·å¾—æ›´å¤šçš„å°æ•°ç‚¹åçš„ä½æ•°ï¼Œä½†è¿™é™ä½äº†ç²¾åº¦ã€‚</li>
<li>è€ƒè™‘ä¸€ä¸ªéå¸¸å°çš„æ•°ï¼Œå¦‚ <span class="math inline">\(1.0 \times
10^{-45}\)</span> åœ¨ IEEE 754
å•ç²¾åº¦æ ¼å¼ä¸­ï¼Œè¿™ä¸ªæ•°æ˜¯ä¸€ä¸ªéè§„èŒƒåŒ–æ•°ï¼Œå› ä¸ºå®ƒå¤ªå°äº†ï¼Œæ— æ³•ç”¨è§„èŒƒåŒ–æ•°è¡¨ç¤ºã€‚</li>
<li><strong>èˆå…¥é”™è¯¯</strong>:
ç”±äºè¡¨ç¤ºä½æ•°çš„é™åˆ¶ï¼Œå½“æˆ‘ä»¬å°è¯•è¡¨ç¤ºæŸäº›æ•°å€¼æ—¶ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œèˆå…¥ã€‚è¿™å¯¼è‡´äº†æ‰€è°“çš„èˆå…¥é”™è¯¯ã€‚</li>
<li>è€ƒè™‘æ•°å­— <span
class="math inline">\(0.1\)</span>ã€‚åœ¨äºŒè¿›åˆ¶ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ— é™é‡å¤çš„å°æ•°ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬å°è¯•å°†å…¶è¡¨ç¤ºä¸º
IEEE 754 æµ®ç‚¹æ•°æ—¶ï¼Œå®ƒå¿…é¡»è¢«èˆå…¥ï¼Œå¯¼è‡´ç²¾åº¦æŸå¤±ã€‚</li>
<li><strong>è®¡ç®—ä¸­çš„ç´¯ç§¯è¯¯å·®</strong>:
åœ¨è¿›è¡Œæµ®ç‚¹è¿ç®—æ—¶ï¼ˆå¦‚åŠ æ³•ã€ä¹˜æ³•ç­‰ï¼‰ï¼Œè¯¯å·®å¯èƒ½ä¼šç´¯ç§¯ï¼Œç‰¹åˆ«æ˜¯åœ¨è¿­ä»£è®¡ç®—ä¸­ã€‚</li>
<li>è€ƒè™‘ä¸€ä¸ªç®€å•çš„æ“ä½œï¼šå°† <span class="math inline">\(0.1\)</span> åŠ ä¸Š
<span class="math inline">\(0.2\)</span>ã€‚ç†è®ºä¸Šï¼Œç»“æœåº”è¯¥æ˜¯ <span
class="math inline">\(0.3\)</span>ï¼Œä½†ç”±äºèˆå…¥è¯¯å·®ï¼Œå®é™…çš„æµ®ç‚¹è®¡ç®—ç»“æœå¯èƒ½ä¼šç•¥æœ‰ä¸åŒã€‚</li>
<li><strong>æµ®ç‚¹æ•°ç›¸ç­‰æ€§</strong>:
ç”±äºç²¾åº¦é—®é¢˜ï¼Œç›´æ¥æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦ç›¸ç­‰é€šå¸¸æ˜¯ä¸å®‰å…¨çš„ã€‚ä¾‹å¦‚ï¼Œè®¡ç®—çš„ç»“æœ(0.3
+ 0.3 + 0.3)å¯èƒ½ä¸ç­‰äº(0.9)ï¼Œå°½ç®¡å·®å¼‚å¾ˆå°ã€‚</li>
<li>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç¨‹åºï¼Œå®ƒè®¡ç®— <span class="math inline">\(0.3 - 0.2 -
0.1\)</span>ã€‚ç†è®ºä¸Šï¼Œç»“æœåº”è¯¥æ˜¯ <span
class="math inline">\(0\)</span>ï¼Œä½†ç”±äºèˆå…¥è¯¯å·®ï¼Œå®é™…çš„æµ®ç‚¹ç»“æœå¯èƒ½éå¸¸æ¥è¿‘äºé›¶ï¼Œä½†ä¸å®Œå…¨æ˜¯é›¶ã€‚</li>
<li><strong>æ¶ˆå¤±çš„å°¾æ•°ä½</strong>:
å½“å·®å¼‚å¾ˆå¤§çš„ä¸¤ä¸ªæ•°ç›¸åŠ æ—¶ï¼Œå°çš„æ•°å¯èƒ½åœ¨ç»“æœä¸­"æ¶ˆå¤±"ï¼Œå› ä¸ºå®ƒå¯¹æœ€ç»ˆç»“æœçš„è´¡çŒ®å¤ªå°ï¼Œä¸èƒ½åœ¨æœ‰é™çš„å°¾æ•°ä½ä¸­è¡¨ç¤ºã€‚</li>
<li>è€ƒè™‘ä¸¤ä¸ªæ•°ï¼š<span class="math inline">\(10^9 + 1\)</span> å’Œ <span
class="math inline">\(10^9\)</span>ã€‚å½“å®ƒä»¬ç›¸å‡æ—¶ï¼Œç†è®ºä¸Šçš„ç»“æœæ˜¯ <span
class="math inline">\(1\)</span>ï¼Œä½†åœ¨æµ®ç‚¹è®¡ç®—ä¸­ï¼Œç»“æœå¯èƒ½æ˜¯ <span
class="math inline">\(0\)</span>ï¼Œå› ä¸ºå°çš„æ•°åœ¨å·®å¼‚å¾ˆå¤§çš„æ•°çš„è®¡ç®—ä¸­å¯èƒ½ä¼šâ€œæ¶ˆå¤±â€ã€‚</li>
</ol>
<ul>
<li>æµ®ç‚¹æ•°ç­‰é—´éš”ä¸­èƒ½è¡¨ç¤ºçš„æ•°çš„æ•°é‡ï¼Œéšç€æ•°çš„å¤§å°çš„å¢åŠ è€Œå‡å°‘</li>
</ul>
<p><strong>åŸºæœ¬æ¦‚å¿µ</strong>:
æµ®ç‚¹æ•°ç”±ç¬¦å·ã€æŒ‡æ•°å’Œå°¾æ•°ä¸‰éƒ¨åˆ†ç»„æˆã€‚æŒ‡æ•°éƒ¨åˆ†å†³å®šäº†æ•°çš„èŒƒå›´æˆ–å¤§å°ï¼Œè€Œå°¾æ•°éƒ¨åˆ†å†³å®šäº†æ•°çš„ç²¾åº¦ã€‚</p>
<ol type="1">
<li><strong>å›ºå®šå®½åº¦çš„å°¾æ•°</strong>ï¼šå°¾æ•°çš„å®½åº¦æ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚ï¼Œå¯¹äº IEEE
754
å•ç²¾åº¦ï¼Œå°¾æ•°æœ‰23ä½ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨ç»™å®šçš„æŒ‡æ•°å€¼ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¡¨ç¤ºçš„æ•°çš„æ•°é‡æ˜¯å›ºå®šçš„ã€‚</li>
<li>è€ƒè™‘æ•°å­— <span
class="math inline">\(1.23456789\)</span>ã€‚å°½ç®¡è¿™ä¸ªæ•°å­—åœ¨åè¿›åˆ¶ä¸­å¾ˆç®€å•ï¼Œä½†åœ¨å›ºå®šå®½åº¦çš„äºŒè¿›åˆ¶æµ®ç‚¹è¡¨ç¤ºä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æ— æ³•å‡†ç¡®åœ°è¡¨ç¤ºå®ƒã€‚</li>
<li><strong>ç­‰é—´éš”è¡¨ç¤º</strong>:
å¯¹äºç»™å®šçš„æŒ‡æ•°å€¼ï¼Œå°¾æ•°çš„æ¯ä¸€ä¸ªä½çš„å¢åŠ éƒ½è¡¨ç¤ºäº†ä¸€ä¸ªç­‰é—´éš”çš„å¢é‡ã€‚ä½†æ˜¯ï¼Œå½“æŒ‡æ•°å€¼å¢åŠ æ—¶ï¼Œè¿™ä¸ªé—´éš”ä¼šå˜å¾—æ›´å¤§ã€‚å› æ­¤ï¼Œå¯¹äºè¾ƒå¤§çš„æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¡¨ç¤ºçš„æ•°ä¹‹é—´çš„é—´éš”ä¼šå˜å¾—æ›´å¤§ã€‚</li>
<li>è€ƒè™‘ä¸¤ä¸ªç›¸é‚»çš„ IEEE 754
å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªå…·æœ‰æœ€å¤§çš„æ­£æŒ‡æ•°å’Œå…¨é›¶çš„å°¾æ•°ï¼Œè€Œå¦ä¸€ä¸ªå…·æœ‰æœ€å¤§çš„æ­£æŒ‡æ•°ä½†å°¾æ•°å¢åŠ äº†æœ€å°çš„é‡ï¼ˆå³å°¾æ•°çš„æœ€åä¸€ä½æ˜¯1ï¼‰ã€‚è¿™ä¸¤ä¸ªæ•°ä¹‹é—´çš„å·®å¼‚å°†æ˜¯å·¨å¤§çš„ã€‚</li>
<li><strong>è¡¨ç¤ºèŒƒå›´ä¸é—´éš”çš„æƒè¡¡</strong>:
ç”±äºå°¾æ•°å®½åº¦çš„é™åˆ¶ï¼Œå½“æˆ‘ä»¬è¡¨ç¤ºæ›´å¤§çš„æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¡¨ç¤ºçš„æ•°çš„é—´éš”å¿…ç„¶å¢åŠ ã€‚è¿™æ„å‘³ç€ï¼Œå°½ç®¡æˆ‘ä»¬ä»ç„¶å¯ä»¥è¡¨ç¤ºå¤§èŒƒå›´å†…çš„æ•°ï¼Œä½†è¿™äº›æ•°ä¹‹é—´çš„é—´éš”ä¼šå˜å¾—æ›´å¤§ï¼Œä»è€Œå¯¼è‡´ç²¾åº¦æŸå¤±ã€‚</li>
<li>è€ƒè™‘æ•°å­— <span class="math inline">\(10^{30}\)</span> å’Œ <span
class="math inline">\(10^{30} +
10^{15}\)</span>ã€‚åœ¨å•ç²¾åº¦æµ®ç‚¹æ•°ä¸­ï¼Œè¿™ä¸¤ä¸ªæ•°å­—å¯èƒ½ä¼šæ˜ å°„åˆ°ç›¸åŒçš„å€¼ï¼Œå› ä¸ºå°¾æ•°çš„å®½åº¦é™åˆ¶äº†æˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†çš„æ•°çš„æ•°é‡ã€‚è¿™æ˜¾ç¤ºäº†éšç€æ•°çš„å¢å¤§ï¼Œæˆ‘ä»¬å¤±å»äº†åŒºåˆ†ç›¸å¯¹è¾ƒå°å·®å¼‚çš„èƒ½åŠ›ã€‚</li>
</ol>
<h1 id="lecture-6-assembly">Lecture 6 Assembly</h1>
<h2 id="lec06.pdfx86"><a
target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2023/pdf/22918222/1698299457180-6a6c42fb-f3b9-40bb-9384-5f41bd85ecce.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22918222%2F1698299457180-6a6c42fb-f3b9-40bb-9384-5f41bd85ecce.pdf%22%2C%22name%22%3A%22lec06.pdf%22%2C%22size%22%3A8497764%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22uf1db4eaf-271c-485e-a482-07a2dc2187d%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22u6c61a067%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">lec06.pdf</a>x86</h2>
<ul>
<li><strong>Designer</strong>: Intel, AMD</li>
<li><strong>Bits</strong>: 16-bit, 32-bit and 64-bit</li>
<li><strong>Introduced</strong>:
<ul>
<li>1978 (16-bit)</li>
<li>1985 (32-bit)</li>
<li>2003 (64-bit)</li>
</ul></li>
<li><strong>Design</strong>: CISC</li>
<li><strong>Type</strong>: Register-memory</li>
<li><strong>Encoding</strong>: Variable (1 to 15 bytes)</li>
<li><strong>Endianness</strong>: Little</li>
<li><strong>Usage</strong>: Macbooks &amp; PCs (Core i3, i5, i7, M)</li>
</ul>
<hr />
<h2 id="arm-architectures">ARM architectures</h2>
<ul>
<li><strong>Designer</strong>: ARM Holdings</li>
<li><strong>Bits</strong>: 32-bit, 64-bit</li>
<li><strong>Introduced</strong>: 1985; 31 years ago</li>
<li><strong>Design</strong>: RISC</li>
<li><strong>Type</strong>: Register-Register</li>
<li><strong>Encoding</strong>:
<ul>
<li>AArch64/A64 and AArch32/A32 use 32-bit instructions</li>
<li>T32 (Thumb-2) uses mixed 16- and 32-bit instructions. ARMv7
user-space compatibility</li>
</ul></li>
<li><strong>Endianness</strong>: Bi (little as default)</li>
<li><strong>Usage</strong>: Smartphone-like devices (iPhone, Android),
Raspberry Pi, Embedded systems</li>
</ul>
<hr />
<h2 id="risc-v">RISC-V</h2>
<ul>
<li><p><strong>Designer</strong>: University of California,
Berkeley</p></li>
<li><p><strong>Bits</strong>: 32, 64, 128</p></li>
<li><p><strong>Introduced</strong>: 2010</p></li>
<li><p><strong>Version</strong>: 2.2</p></li>
<li><p><strong>Design</strong>: RISC</p></li>
<li><p><strong>Type</strong>: Load-store</p></li>
<li><p><strong>Encoding</strong>: Variable</p></li>
<li><p><strong>Branching</strong>: Compare-and-branch</p></li>
<li><p><strong>Endianness</strong>: Little</p></li>
<li><p><strong>Usage</strong>: Versatile and open-source. Relatively
new, designed for cloud computing, embedded systems, academic
use</p></li>
<li><p>æ—©æœŸæŒ‡ä»¤é›†è®¾è®¡æ–¹å‘</p>
<ul>
<li>å¤æ‚æŒ‡ä»¤é›†ï¼ˆä¸æ–­ç»†åŒ–æŒ‡ä»¤ï¼‰ -&gt;
(éš¾å­¦ï¼Œä½†æ˜¯ç¼–è¯‘å™¨å¯ä»¥åšæ›´å°‘çš„äº‹ï¼Œæ¯”è¾ƒæ…¢ï¼Œå› ä¸ºä¸»è¦æ˜¯è®¾è®¡æ›´å¤šçš„æŒ‡ä»¤ï¼‰
x86æ˜¯å…¸å‹ <code>CISC</code></li>
<li>ç²¾ç®€æŒ‡ä»¤é›† -&gt;ï¼ˆå¥½å­¦ï¼Œå¤æ‚çš„æŒ‡ä»¤é€šè¿‡ç®€å•æŒ‡ä»¤çš„ç»„åˆæ¥å®ç° å¿«ï¼‰
<code>RISC</code></li>
</ul></li>
</ul>
<p><a
target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2023/pdf/22918222/1698299998791-135851ce-b583-4d5c-b382-7bf7e3c71a5c.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22918222%2F1698299998791-135851ce-b583-4d5c-b382-7bf7e3c71a5c.pdf%22%2C%22name%22%3A%22RISV-2016-1.pdf%22%2C%22size%22%3A959927%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22uf7cc602f-2fe1-4ca7-af70-0e13efc8ca0%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22udd5c5e7a%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">RISV-2016-1.pdf</a></p>
<h2 id="registers">Registers</h2>
<ul>
<li><p>æ±‡ç¼–æ²¡æœ‰å˜é‡çš„æ¦‚å¿µï¼Œåªæœ‰å¯„å­˜å™¨</p></li>
<li><p>ä¸åŒçš„ç¡¬ä»¶å¯èƒ½å¯„å­˜å™¨æ•°é‡/ä½æ•°ä¸åŒ</p></li>
<li><p>å¯ä»¥è¯»ï¼Œå†™ï¼›è€—ç”µé‡ç›¸è¾ƒäºMemoryå¾ˆå°‘ï¼›æ€§èƒ½å¿«</p></li>
<li><p>å¯„å­˜å™¨æ˜¯åœ¨CPUä¸Šçš„ç›´æ¥ç»“æ„</p></li>
<li><p>æ—¢ç„¶å¯„å­˜å™¨è¿™ä¹ˆå¿«ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨å¯„å­˜å™¨æ›¿ä»£å†…å­˜ï¼Œå¤–å­˜ç­‰</p>
<ul>
<li>ğŸ’°</li>
<li>é’ˆå¯¹å­˜å‚¨è®¾è®¡çš„åˆ†å±‚ä½“ç³»æ¶æ„ï¼Œè¶Šåº•å±‚çš„å­˜å‚¨ä»‹è´¨å®¹é‡è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šæ…¢</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698300667917-230a25d1-8909-4a9b-a9fe-3ec458dc0922.png#averageHue=%23acbea0&amp;clientId=u9c815c94-2149-4&amp;from=paste&amp;height=484&amp;id=u26fd0244&amp;originHeight=968&amp;originWidth=1608&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=581561&amp;status=done&amp;style=none&amp;taskId=uadde4365-8879-4a17-8b20-c3ed30b9fd9&amp;title=&amp;width=804" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ol type="1">
<li><strong>å¯„å­˜å™¨è¡¨ç¤º</strong>ï¼šåœ¨RISC-Vä¸­ï¼Œå¯„å­˜å™¨å¯ä»¥ç”¨â€˜xâ€™åŠ ä¸Šä¸€ä¸ªæ•°å­—ï¼ˆå¦‚x0ã€x1...x31ï¼‰æ¥è¡¨ç¤ºï¼Œæˆ–è€…ç”¨ç‰¹å®šçš„åå­—æ¥è¡¨ç¤ºã€‚
(RISCVä¸€å…±æœ‰32ä¸ªå¯„å­˜å™¨ï¼Œå¯„å­˜å™¨å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œéœ€è¦åœ¨å­˜å‚¨é‡ä»¥åŠè¯»å–é€Ÿåº¦åšæƒè¡¡)</li>
<li><strong>å¯„å­˜å™¨ç§ç±»</strong>ï¼š</li>
</ol>
<ul>
<li><strong>ç¨‹åºå‘˜å˜é‡å¯„å­˜å™¨</strong>ï¼šè¿™ç±»å¯„å­˜å™¨ç”¨äºä¿å­˜ç¨‹åºä¸­çš„å˜é‡ã€‚
<ul>
<li>s0-s1 å¯¹åº” x8-x9</li>
<li>s2-s11 å¯¹åº” x18-x27</li>
</ul></li>
<li><strong>ä¸´æ—¶å˜é‡å¯„å­˜å™¨</strong>ï¼šè¿™ç±»å¯„å­˜å™¨ç”¨äºæš‚æ—¶ä¿å­˜æ•°æ®ã€‚
<ul>
<li>t0-t2 å¯¹åº” x5-x7</li>
<li>t3-t6 å¯¹åº” x28-x31</li>
</ul></li>
</ul>
<ol start="3" type="1">
<li><strong>å¯„å­˜å™¨ç±»å‹</strong>ï¼šRISC-Vä¸­çš„å¯„å­˜å™¨æ²¡æœ‰ç±»å‹ï¼ˆä¸Cè¯­è¨€çš„æ¦‚å¿µç›¸åï¼‰ã€‚æ‰§è¡Œçš„æ“ä½œå†³å®šäº†å¦‚ä½•å¤„ç†å¯„å­˜å™¨çš„å†…å®¹ã€‚</li>
</ol>
<p>åœ¨RISC-Væ¶æ„ä¸­ï¼Œx0-x7çš„å¯„å­˜å™¨æœ‰ç‰¹å®šçš„ç”¨é€”å’Œå‘½åï¼š</p>
<ul>
<li><strong>x0</strong>:
å¸¸è¢«ç§°ä¸º<code>zero</code>å¯„å­˜å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªç¡¬ç¼–ç çš„å¯„å­˜å™¨ï¼Œæ€»æ˜¯è¿”å›0ã€‚æ— è®ºä½ å°è¯•å†™å…¥ä»€ä¹ˆå€¼ï¼Œå®ƒéƒ½ä¼šä¿æŒä¸º0ã€‚</li>
<li><strong>x1</strong>:
é€šå¸¸è¢«ç§°ä¸º<code>ra</code>ï¼Œå³è¿”å›åœ°å€å¯„å­˜å™¨ã€‚å®ƒç”¨äºä¿å­˜å‡½æ•°è¿”å›åœ°å€ã€‚</li>
<li><strong>x2</strong>:
è¢«ç§°ä¸º<code>sp</code>ï¼Œå³å †æ ˆæŒ‡é’ˆå¯„å­˜å™¨ã€‚å®ƒæŒ‡å‘å½“å‰å †æ ˆçš„é¡¶éƒ¨ã€‚</li>
<li><strong>x3</strong>:
è¢«ç§°ä¸º<code>gp</code>ï¼Œå³å…¨å±€æŒ‡é’ˆå¯„å­˜å™¨ã€‚å®ƒé€šå¸¸ç”¨äºæŒ‡å‘å…¨å±€å˜é‡ã€‚</li>
<li><strong>x4</strong>:
è¢«ç§°ä¸º<code>tp</code>ï¼Œå³çº¿ç¨‹æŒ‡é’ˆå¯„å­˜å™¨ã€‚å®ƒç”¨äºæŒ‡å‘çº¿ç¨‹ç›¸å…³çš„æ•°æ®ã€‚</li>
<li><strong>x5-x7</strong>:
è¿™äº›æ˜¯<code>t0-t2</code>ä¸´æ—¶å¯„å­˜å™¨ï¼Œä¸»è¦ç”¨äºç¼–è¯‘å™¨çš„ä¸­é—´æ“ä½œã€‚</li>
</ul>
<h2 id="assembly-code">Assembly code</h2>
<ul>
<li><code>opt</code> <code>dst</code>, <code>src1</code>,
<code>src2</code></li>
<li>cä¸­çš„å•è¡Œä»£ç å¯èƒ½åœ¨<code>RSIC-V</code>ä¸­åˆ†è§£ä¸ºå¤šä¸ªä¸åŒçš„æŒ‡ä»¤</li>
</ul>
<h3 id="basic-arithmetic-instructions">Basic Arithmetic
Instructions</h3>
<ul>
<li><p>ä¾‹å¦‚cè¯­è¨€ä¸­çš„ <code>a = b + c</code> | <code>a = b - c</code> |
<code>a =  (b+c)  - (d+e)</code></p></li>
<li><p><code>add s1, s2, s3</code> | <code>sub s1, s2, s3</code> |
<code>add t1, s2, s3</code> <code>add t2, s4, s5</code>
<code>sub s1, t1, t2</code></p></li>
<li><p>æœ‰æ—¶å€™æ”¹å˜æŒ‡ä»¤çš„é¡ºåºæœ‰åŠ©äºæé«˜æ‰§è¡Œæ•ˆç‡ï¼Œä½†æŸäº›æŒ‡ä»¤æ˜¯ä¸å¯ä»¥éšä¾¿äº¤æ¢çš„</p></li>
<li><p>ç«‹å³æ•°æ“ä½œï¼ˆæ€è€ƒä¸ºä»€ä¹ˆæ²¡æœ‰subiæ“ä½œï¼‰</p>
<ul>
<li><code>addi s1,s2,2</code> | <code>a = b + 2</code>;</li>
<li><code>addi s3,s3,1</code> | <code>c++</code>;</li>
<li>ç«‹å³æ•°å‡æ³•å¯ä»¥é€šè¿‡ç»„åˆç«‹å³æ•°åŠ æ³•å’Œè´Ÿçš„ç«‹å³æ•°ï¼Œè¿™å‡å°‘äº†æŒ‡ä»¤é›†çš„å¤æ‚æ€§</li>
</ul></li>
<li><p>ä»å†…å­˜ä¸­å­˜æˆ–è€…è¯»æ•°æ®</p>
<ul>
<li><code>memop reg, off(bAddr)</code> ï¼ˆå†…å­˜æ“ä½œç¬¦
<code>ç›®æ ‡å¯„å­˜å™¨/æ“ä½œå¯„å­˜å™¨</code>
offæ˜¯ä¸€ä¸ªä»¥<code>Byte</code>ä¸ºå•ä½çš„åç§»é‡ï¼Œ<code>bAddr</code>ä¸€ä¸ªå­˜å‚¨å†…å­˜åŸºåœ°å€çš„å¯„å­˜å™¨</li>
<li><strong>A register holds a word of raw data (no type)</strong>:
å¯„å­˜å™¨å­˜å‚¨çš„æ˜¯åŸå§‹æ•°æ®ï¼Œæ²¡æœ‰æ•°æ®ç±»å‹çš„åŒºåˆ†ã€‚æ¢å¥è¯è¯´ï¼Œä¸åƒé«˜çº§ç¼–ç¨‹è¯­è¨€ä¸­çš„å˜é‡ï¼Œå®ƒä»¬å¯èƒ½æœ‰ä¸€ä¸ªæŒ‡å®šçš„æ•°æ®ç±»å‹ï¼ˆå¦‚æ•´æ•°ã€æµ®ç‚¹æ•°æˆ–å­—ç¬¦ï¼‰ï¼Œå¯„å­˜å™¨ä»…ä»…å­˜å‚¨ä¸€ä¸²äºŒè¿›åˆ¶æ•°æ®ï¼Œè€Œä¸å…³å¿ƒè¿™äº›æ•°æ®ä»£è¡¨ä»€ä¹ˆç±»å‹ã€‚</li>
<li><strong>Make sure to use a register (and offset) that point to a
valid memory address</strong>:
å½“ä½ ä½¿ç”¨å¯„å­˜å™¨æ¥è¡¨ç¤ºä¸€ä¸ªå†…å­˜åœ°å€æ—¶ï¼ˆä¾‹å¦‚åœ¨æ•°æ®ä¼ è¾“æŒ‡ä»¤ä¸­ï¼‰ï¼Œä½ éœ€è¦ç¡®ä¿è¯¥å¯„å­˜å™¨ä¸­çš„å€¼ï¼ˆä»¥åŠä¸ä¹‹ç›¸å…³çš„ä»»ä½•åç§»é‡ï¼‰ç¡®å®æŒ‡å‘ä¸€ä¸ªæœ‰æ•ˆçš„å†…å­˜ä½ç½®ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢å°è¯•è®¿é—®æ— æ•ˆæˆ–å—ä¿æŠ¤çš„å†…å­˜åŒºåŸŸï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒæˆ–å…¶ä»–ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚</li>
<li>ä»offçš„ä½¿ç”¨æ–¹æ³•å¯ä»¥çœ‹åˆ°ï¼Œæ±‡ç¼–ä¸æä¾›ç±»ä¼¼cè¯­è¨€<code>p++</code>è‡ªåŠ¨åç§»å¯¹åº”ç±»å‹çš„æ“ä½œï¼Œæ•°æ®çš„å¤§å°éœ€è¦è‡ªå·±è€ƒè™‘ã€‚</li>
<li>a[10] = a[3] + b -&gt; <code>lw t1,12(s1)</code>
<code>addi t1,t1,s2</code> <code>sw t1, 40(s1)</code></li>
</ul></li>
<li><p>æ€ä¹ˆåœ¨å†…å­˜ä¸­ç”¨æ±‡ç¼–åˆå§‹åŒ–å€¼ ï¼ˆé€ äº†ä¸€ä¸ªæ•°ç»„ï¼‰
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp">.data<br>    <span class="hljs-comment">// è¿™é‡Œåˆ›å»ºäº†ä¸‰ä¸ª32ä½çš„æ•´æ•°ï¼Œç„¶è€Œæˆ‘ä»¬ä¸çŸ¥é“å®ƒçš„å®é™…åœ°å€</span><br>source:<br>    	.word <span class="hljs-number">3</span><br>        .word <span class="hljs-number">1</span><br>        .word <span class="hljs-number">4</span><br>.text<br>main:<br>    	la t1,source  <span class="hljs-comment">// æ‰€ä»¥å…ˆæŠŠsourceçš„åœ°å€æ‹¿åˆ° t1å¯„å­˜å™¨</span><br>        lw t2,<span class="hljs-number">0</span>(t1)   <span class="hljs-comment">// ç„¶åæŠŠå€¼ï¼ˆa[0]ï¼‰åŠ è½½åˆ°t2å¯„å­˜å™¨é‡Œ</span><br>        lw t3,<span class="hljs-number">4</span>(t1)   <span class="hljs-comment">// ç„¶åæŠŠå€¼ (a[1]) åŠ è½½åˆ°t3å¯„å­˜å™¨é‡Œ</span><br></code></pre></td></tr></table></figure></p></li>
<li><p>å­—ï¼ˆ32ä½ï¼‰ï¼Œå­—èŠ‚ï¼ˆ8ä½ï¼‰ï¼ŒåŠå­—ï¼ˆ16ä½ï¼‰ï¼Œæˆ‘ä»¬è®¨è®ºå¾€å¾€ç”¨<code>1Byte</code>æ¥è®¨è®ºå†…å­˜</p></li>
<li><p>RISC-Vçš„ä½æ‹“å±•æœ‰0å¡«å……ä»¥åŠé«˜ä½ç¬¦å·ä½å¡«å……ï¼Œæœ‰äº›æŒ‡ä»¤å¯èƒ½ç†è®ºä¸Šè¿›è¡Œäº†ä½æ‹“å±•ï¼Œä¾‹å¦‚<code>lui</code>æŒ‡ä»¤æ˜¯"Load
Upper
Immediate"çš„ç¼©å†™ï¼Œå®ƒç”¨äºå°†ä¸€ä¸ª20ä½çš„ç«‹å³æ•°å€¼åŠ è½½åˆ°ä¸€ä¸ªå¯„å­˜å™¨çš„ä¸Š20ä½ï¼ŒåŒæ—¶å°†å…¶ä¸‹12ä½æ¸…é›¶ï¼Œè¿™ä¸ªæŒ‡ä»¤å‰åæ“ä½œæ•°å®è´¨å‘ç”Ÿäº†ä½æ‹“å±•ï¼Œä½†æ˜¯å› ä¸ºæ²¡æœ‰å¤šä½™çš„ä½è¿›è¡Œæ‹“å±•ï¼Œæ‰€ä»¥å®é™…æ²¡æœ‰è¿›è¡Œä½æ‹“å±•ã€‚è€Œ<code>auipc</code>æ˜¯æŠŠä¸€ä¸ª20bitä½çš„æ•°åŠ è½½åˆ°<code>pc</code>ä¸­ï¼Œè‡³äºå…·ä½“çš„ä½æ•°è¦çœ‹<code>RISC-V</code>çš„å˜ç§</p></li>
<li><p><code>lb/sb</code> <code>ä¸€åˆ‡å†…å®¹éƒ½ä»¥äºŒè¿›åˆ¶çš„å½¢å¼è¡¨ç¤º</code></p>
<ul>
<li><code>lb s1, 1(s0)</code> ä»s0ä¸­æ‹¿ç¬¬äºŒä¸ªå­—èŠ‚
ï¼Œé€šè¿‡<code>ç¬¦å·</code>ä½æ‹“å±•å­˜å‚¨åˆ°s1ä¸­</li>
<li><code>sb s1, 2(s0)</code> æŠŠs1çš„æœ€ä½ä½å­˜åˆ°s0ä¸­çš„ç¬¬ä¸‰ä¸ªå­—èŠ‚</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698395799047-57baf1ee-1977-4862-be2e-4263d47c3c69.png#averageHue=%23f1eeee&amp;clientId=u1a327c33-0944-4&amp;from=paste&amp;height=388&amp;id=u327c85d5&amp;originHeight=776&amp;originWidth=1350&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=118053&amp;status=done&amp;style=none&amp;taskId=uf80c0b39-8361-429f-b294-b86a5c65e41&amp;title=&amp;width=675" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><code>lh/sh</code> å’Œ
<code>lb</code>ä»¥åŠ<code>sb</code>ä¸€æ ·ï¼Œä¸è¿‡æ“ä½œçš„æ˜¯åŠå­—ä¹Ÿå°±æ˜¯16ä½æ¯”ç‰¹ä½</li>
<li><code>lhu</code>å’Œ<code>lbu</code>ç”¨äºæ— ç¬¦å·æ•°çš„è¯»å–ï¼Œä½†æ˜¯å®ƒä»¬åªæ‰§è¡Œ0æ‹“å±•</li>
</ul>
<h3 id="control-flow">control flow</h3>
<ul>
<li>cæœ‰ä»£ç å—çš„æ¦‚å¿µï¼Œä½†RISC-Væ²¡æœ‰ï¼Œä½†æ˜¯å…·æœ‰labelçš„æ¦‚å¿µï¼Œä¾‹å¦‚<code>main:</code></li>
<li>labelæ˜¯å¯è·³è½¬çš„</li>
<li><code>beq reg1, reg2, label</code> Branch If Equal
ï¼Œå¦‚æœ<code>reg1 == reg2</code> [å¯„å­˜å™¨å†…çš„å€¼ç›¸ç­‰]
é‚£ä¹ˆè·³è½¬åˆ°labelï¼Œå¦åˆ™æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤</li>
<li><code>bne reg1, reg2, label</code> Branch If Not Equal ï¼Œ å¦‚æœ
<code>reg1 != reg2</code> [å¯„å­˜å™¨å†…çš„å€¼ç›¸åŒ]
é‚£ä¹ˆè·³è½¬åˆ°labelï¼Œå¦åˆ™æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤</li>
<li><code>j label</code> æ— æ¡ä»¶è·³è½¬åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698470317227-651aab49-0064-40aa-b642-c0109394e8c7.png#averageHue=%23f6f5f5&amp;clientId=u533c3b9a-904a-4&amp;from=paste&amp;height=368&amp;id=u70be6998&amp;originHeight=736&amp;originWidth=1108&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=109764&amp;status=done&amp;style=none&amp;taskId=uf0b096de-8037-43a9-b084-78ae0fdffd5&amp;title=&amp;width=554" srcset="/img/loading.gif" lazyload
alt="æˆªå±2023-10-28 13.16.37.png" />
<figcaption aria-hidden="true">æˆªå±2023-10-28 13.16.37.png</figcaption>
</figure>
<ul>
<li><code>blt reg1,reg2, label</code> Branch Less Than, means &lt;, if
the value in reg1 is less than reg2, then go to label</li>
<li><code>bge reg1,reg2, label</code> Branch Greater Than or Equal &gt;=
<ul>
<li>ä¸ºä»€ä¹ˆä¸è®¾è®¡ä¸€ä¸ª&gt; æˆ–è€… &lt;= å‘¢ï¼Ÿ
è¿™å®Œå…¨å¯ä»¥é€šè¿‡äº¤æ¢å‚æ•°æ¥å®ç°ã€‚</li>
</ul></li>
<li>loop in RISC-V æœ‰è®¸å¤šå®ç°æ–¹æ³•ï¼Œå…³é”®å°±æ˜¯åˆ†æ”¯æ§åˆ¶</li>
<li>PC
<ol type="1">
<li><strong>Program Counter (PC)</strong>: PC æ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œå®ƒå­˜å‚¨ç€ CPU
ä¸‹ä¸€æ­¥è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ã€‚åœ¨é¡ºåºæ‰§è¡Œçš„ç¨‹åºä¸­ï¼Œæ¯æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼ŒPC
é€šå¸¸ä¼šè‡ªåŠ¨åŠ ä¸Šè¯¥æŒ‡ä»¤çš„é•¿åº¦ï¼Œä»è€ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚</li>
<li><strong>Branches</strong>: Branches
æ˜¯æŒ‡æ§åˆ¶æµæŒ‡ä»¤ï¼Œå¦‚æ¡ä»¶åˆ†æ”¯å’Œæ— æ¡ä»¶è·³è½¬ã€‚å½“æ»¡è¶³æŸä¸ªæ¡ä»¶æ—¶ï¼Œå®ƒä»¬ä¼šä¿®æ”¹ PC
çš„å€¼ï¼Œä½¿å…¶è·³è½¬åˆ°ç¨‹åºçš„å¦ä¸€ä¸ªä½ç½®ï¼Œè€Œä¸æ˜¯é¡ºåºåœ°æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚</li>
</ol>
<ul>
<li>å½“ CPU
æ‰§è¡Œåˆ°ä¸€ä¸ªåˆ†æ”¯æŒ‡ä»¤æ—¶ï¼Œå®ƒä¼šæ ¹æ®è¯¥æŒ‡ä»¤å’Œç»™å®šçš„æ¡ä»¶æ¥å†³å®šæ˜¯å¦ä¿®æ”¹ PC
çš„å€¼ã€‚å¦‚æœå†³å®šè·³è½¬ï¼Œåˆ™ PC
ä¼šè¢«è®¾ç½®ä¸ºç›®æ ‡åœ°å€ï¼Œè¿™å¯¼è‡´ç¨‹åºä»æ–°çš„åœ°å€ç»§ç»­æ‰§è¡Œã€‚å¦‚æœä¸è·³è½¬ï¼ŒPC
å°†æŒ‰å¸¸è§„é€’å¢ï¼Œç»§ç»­é¡ºåºæ‰§è¡Œã€‚</li>
<li>æ— æ¡ä»¶è·³è½¬ï¼ˆå¦‚ <code>jmp</code> æˆ– <code>j</code>
åœ¨æŸäº›æ±‡ç¼–è¯­è¨€ä¸­ï¼‰æ€»æ˜¯ä¼šä¿®æ”¹ PC çš„å€¼ã€‚</li>
<li>æ¡ä»¶åˆ†æ”¯ï¼ˆå¦‚ <code>beq</code>ã€<code>bne</code>
ç­‰ï¼‰åˆ™ä¼šæ ¹æ®æ¡ä»¶åˆ¤æ–­æ˜¯å¦ä¿®æ”¹ PCã€‚ ### Shifting Instructions <img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698472153887-0b23af7a-a14a-4f74-ba15-fd84fb87e11b.png#averageHue=%23d2d8e3&amp;clientId=u533c3b9a-904a-4&amp;from=paste&amp;height=332&amp;id=uee06501a&amp;originHeight=664&amp;originWidth=1084&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=111011&amp;status=done&amp;style=none&amp;taskId=ueb1154a8-bbfb-43ae-b819-0fe60dd7924&amp;title=&amp;width=542" srcset="/img/loading.gif" lazyload
alt="image.png" /></li>
</ul></li>
<li>æ²¡æœ‰ç®—æ•°å·¦ç§»æ˜¯å› ä¸ºç®—æ•°å·¦ç§»å’Œé€»è¾‘å·¦ç§»æ˜¯ä¸€æ ·çš„ï¼Œä½ä½éƒ½ä¼šè¢«å¡«å……ä¸º0</li>
<li>å¯¹äºç«‹å³æ•°è€Œè¨€ï¼Œå€¼åªèƒ½åœ¨0-31ä¹‹é—´ï¼ˆ32ä½æŒ‡ä»¤ï¼‰</li>
<li>å¯¹äºå¯„å­˜å™¨ä¸­çš„å€¼è€Œè¨€ï¼Œåªæœ‰ä½5ä½çš„å€¼ä¼šè¢«è¯»å–</li>
</ul>
<h3 id="other-instructions">other Instructions</h3>
<ul>
<li><code>mul dst, src1,src2</code> è®¡ç®—<code>src1</code> *
<code>src2</code> ,æŠŠ<code>ä½32ä½</code>å­˜åˆ°<code>dst</code>ä¸­</li>
<li><code>mulh dst, src1, src2</code> æŠŠ<code>é«˜32ä½</code>
å­˜å‚¨åˆ°<code>dst</code>ä¸­</li>
<li><code>div dst, src1, src2</code> è®¡ç®—<code>src1 / src2</code>
,æŠŠå•†å­˜åˆ°<code>dst</code>ä¸­</li>
<li><code>rem dst, src1, src2</code> è®¡ç®—<code>src1 / src2</code> ,
æŠŠä½™æ ‘å­˜å‚¨åˆ° <code>dst</code>ä¸­</li>
<li><code>and dst, src1, src2</code>
è®¡ç®—<code>src1 &amp; src2</code>ï¼ŒæŠŠç»“æœå­˜åˆ°<code>dst</code>ä¸­</li>
<li><code>andi dst, src1, imm</code>
è®¡ç®—<code>src1 &amp; imm</code>ï¼ŒæŠŠç»“æœå­˜åˆ°<code>dst</code>ä¸­</li>
<li><code>or dst, src1, src2</code>
è®¡ç®—<code>src1 | src2</code>ï¼ŒæŠŠç»“æœå­˜åˆ°<code>dst</code>ä¸­</li>
<li><code>ori dst, src1, imm</code>
è®¡ç®—<code>src1 | imm</code>ï¼ŒæŠŠç»“æœå­˜åˆ°<code>dst</code>ä¸­</li>
<li><code>xor dst, src1, src2</code>
è®¡ç®—<code>src1 ^ src2</code>ï¼ŒæŠŠç»“æœå­˜åˆ°<code>dst</code>ä¸­</li>
<li><code>xori dst, src1, imm</code>
è®¡ç®—<code>src1 ^ imm</code>ï¼ŒæŠŠç»“æœå­˜åˆ°<code>dst</code>ä¸­</li>
<li><code>slt dst, reg1,reg2</code> å¦‚æœ<code>reg1&lt;reg2</code>,
åˆ™<code>dst</code>ä¸º<code>1</code>å¦åˆ™ä¸º<code>0</code></li>
<li><code>slti dst, reg1, imm</code> å¦‚æœ<code>reg1&lt;imm</code>,
åˆ™<code>dst</code>ä¸º<code>1</code>å¦åˆ™ä¸º<code>0</code></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698475390305-83c88822-345c-4a21-99f5-ff9f06d8484d.png#averageHue=%23f5f5f5&amp;clientId=u533c3b9a-904a-4&amp;from=paste&amp;height=375&amp;id=u808b6a42&amp;originHeight=750&amp;originWidth=932&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=93615&amp;status=done&amp;style=none&amp;taskId=u7080248c-11da-4ee1-b570-8adb083d8e9&amp;title=&amp;width=466" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h3 id="interact-with-os">Interact with os</h3>
<ul>
<li>åŸºäº<code>a0</code>å¯„å­˜å™¨ä¸<code>os</code>äº¤äº’</li>
<li><a
target="_blank" rel="noopener" href="https://github.com/ThaumicMekanism/venus/wiki/Environmental-Calls">https://github.com/ThaumicMekanism/venus/wiki/Environmental-Calls</a></li>
</ul>
<h1 id="lecture-7-more-about-assembly">Lecture 7 More about
assembly</h1>
<h2 id="pseudo-instructions">Pseudo-Instructions</h2>
<ul>
<li>ä¸åŒäºé«˜çº§è¯­è¨€ä¾‹å¦‚cï¼Œæ±‡ç¼–è¯­è¨€ä¸€å®šæ˜¯é’ˆå¯¹äºå…·ä½“ç¡¬ä»¶è€Œè¿è¡Œçš„</li>
<li>æˆ‘ä»¬æœ‰æ—¶å€™ä½¿ç”¨çš„æŒ‡ä»¤å¹¶ä¸æ˜¯â€œçœŸæ­£çš„æŒ‡ä»¤â€ï¼Œè€Œæ˜¯ä¸ºäº†æ–¹ä¾¿è®°å¿†è€Œåšäº†ä¸€å±‚æŠ½è±¡
<ul>
<li><code>mv dst, reg1</code> -&gt; <code>addi dst, reg1, 0</code>
ç§»åŠ¨å¯„å­˜å™¨ä¸­çš„ä¸€ä¸ªå€¼åˆ°å¦ä¸€ä¸ªå¯„å­˜å™¨ä¸­</li>
<li><code>li dst, imm</code> -&gt; <code>addi, lui</code>
åŠ è½½ä¸€ä¸ªç«‹å³æ•°åˆ°å¯„å­˜å™¨</li>
<li><code>la dst, label</code> -&gt; <code>auipc dst</code>
å°†æŒ‡å®šæ ‡ç­¾çš„åœ°å€åŠ è½½åˆ°å¯„å­˜å™¨</li>
<li><code>nop</code> -&gt; <code>addi x0, x0, 0</code>
ä¸æ‰§è¡Œä»»ä½•æ“ä½œ</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698562073854-35aa28fd-0d1c-43e1-ad41-03a525287c45.png#averageHue=%23f7f4f3&amp;clientId=u533c3b9a-904a-4&amp;from=paste&amp;height=170&amp;id=ub0b4d761&amp;originHeight=340&amp;originWidth=1570&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=58311&amp;status=done&amp;style=none&amp;taskId=u31e1c49f-e200-41e4-b6c0-6311b4185ef&amp;title=&amp;width=785" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å¦‚ä½•å°†è¿™æ®µä»£ç è½¬åŒ–ä¸ºæ±‡ç¼–è¯­è¨€å‘¢ï¼Ÿ
<ul>
<li>æ˜ç¡®å†™ä¸‹æ¯ä¸€æ­¥</li>
<li>ä¸€æ­¥ä¸€æ­¥çš„è¿›è¡Œç¿»è¯‘</li>
<li>è¿›è¡ŒæŒ‡ä»¤ä¼˜åŒ– <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//   define *p, define *q       --&gt;  p-&gt;  s0,  q -&gt; s1    </span><br><span class="hljs-comment">//   loop                       --&gt;  Loop:</span><br><span class="hljs-comment">//   take *p                    --&gt;  lb t0,0(s0)</span><br><span class="hljs-comment">//   set to *q                  --&gt;  sb t0,0(s1)</span><br><span class="hljs-comment">//   p++                        --&gt;  addi s0,s0,1</span><br><span class="hljs-comment">//   q++                        --&gt;  addi s1,s1,1</span><br><span class="hljs-comment">//   if *q == &#x27;\0&#x27; else to loop --&gt;  beq s0,x0,next</span><br><span class="hljs-comment">//								--&gt;  j Loop</span><br><span class="hljs-comment">//   go to next 				--&gt;  next:</span><br></code></pre></td></tr></table></figure></li>
</ul></li>
<li>æˆ‘ä»¬çš„nextå‡ºç°äº†å†—ä½™ï¼Œå¯ä»¥ç”¨æ›´å°‘çš„æŒ‡ä»¤æ¥æè¿°</li>
</ul>
<h2 id="function-calling">function calling</h2>
<ul>
<li>å‡½æ•°è°ƒç”¨é€šç”¨æµç¨‹
<ul>
<li>å°†è¢«è°ƒç”¨å‡½æ•°éœ€è¦çš„å˜é‡å­˜å‚¨åˆ°å¯ä»¥è¢«è®¿é—®åˆ°çš„åœ°æ–¹ï¼ˆå¯„å­˜å™¨ï¼Œå†…å­˜ï¼‰</li>
<li>å°†æ§åˆ¶æƒè½¬ç§»ç»™è¢«è°ƒç”¨çš„å‡½æ•°</li>
<li>è¢«è°ƒç”¨å‡½æ•°è¯»å–ä¸€äº›éœ€è¦çš„èµ„æº</li>
<li>è¢«è°ƒç”¨å‡½æ•°æ‰§è¡Œè‡ªå·±çš„ä»»åŠ¡</li>
<li>è¢«è°ƒç”¨å‡½æ•°è¿”å›å€¼ï¼Œç„¶åæ¸…ç©ºèµ„æº</li>
<li>æ§åˆ¶å…ƒè¿”å›åˆ°è°ƒç”¨è€…èº«ä¸Š</li>
</ul></li>
<li>ä¼ å…¥çš„å‚æ•°å­˜åœ¨å“ªé‡Œï¼Œè¿”å›å€¼å­˜åœ¨å“ªé‡Œ
<ul>
<li>ä¼˜å…ˆä½¿ç”¨å¯„å­˜å™¨ <code>a0-a7</code> (ä¼ å‚)
ï¼Œ<code>a0-a1</code>(è¿”å›å€¼ï¼‰</li>
<li>å¦‚æœç©ºé—´ä¸å¤Ÿç”¨ï¼Œé‚£ä¹ˆç”¨æ ˆç©ºé—´</li>
</ul></li>
<li>å‡½æ•°ä¹‹é—´çš„æ§åˆ¶æƒæ˜¯å¦‚ä½•è½¬ç§»çš„
<ul>
<li><code>Jump (j)</code>ï¼šæ— æ¡ä»¶è·³è½¬åˆ°æ ‡ç­¾å¤„ã€‚è¿™æ˜¯ä¸€ä¸ªä¼ªæŒ‡ä»¤ï¼Œå®é™…ä¸Šæ˜¯
<code>jal x0 label</code> ,<code>x0</code>ä¸ä¼šè¢«ä¿®æ”¹
<ul>
<li>ç¤ºä¾‹ï¼š<code>j label1</code></li>
</ul></li>
<li><code>Jump and Link (jal)</code>ï¼šç”¨äºè°ƒç”¨å‡½æ•°ã€‚å®ƒå°†å½“å‰æŒ‡ä»¤çš„åœ°å€ä¿å­˜åˆ°è¿”å›åœ°å€å¯„å­˜å™¨ï¼Œå¹¶è·³è½¬åˆ°æŒ‡å®šæ ‡ç­¾ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š<code>jal dst label</code></li>
</ul></li>
<li><code>Jump and Link Register (jalr)</code>ï¼šä¸<code>jal</code>ç›¸ä¼¼ï¼Œä½†å…è®¸æ›´çµæ´»çš„è·³è½¬åœ°å€ï¼Œåœ°å€æ˜¯ä»å¯„å­˜å™¨å’Œç«‹å³æ•°è®¡ç®—å¾—åˆ°çš„ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š<code>jalr dst src imm</code>
å°†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å­˜åˆ°<code>dst</code>ä¸­ï¼ˆé€šå¸¸æ˜¯<code>ra</code>ï¼‰ï¼Œè·³è½¬åˆ°<code>src + imm</code>çš„åœ°å€</li>
</ul></li>
<li><code>Jump Register (jr)</code>ï¼šæ— æ¡ä»¶è·³è½¬åˆ°æºå¯„å­˜å™¨æŒ‡å®šçš„åœ°å€ã€‚é€šå¸¸ç”¨äºä»å‡½æ•°è¿”å›ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š<code>jr src</code>
ä¹Ÿæ˜¯ä¸€ä¸ªä¼ªæŒ‡ä»¤ï¼Œ<code>jalr x0, rs1, 0</code></li>
</ul></li>
<li><code>ra</code>ï¼šè¿”å›åœ°å€å¯„å­˜å™¨ã€‚ç”¨äºä¿å­˜ä»å“ªä¸ªåœ°å€è°ƒç”¨äº†å‡½æ•°ï¼Œä»¥ä¾¿åç»­å¯ä»¥è¿”å›ã€‚</li>
<li><code>sp</code>ï¼šä¸€ä¸ªæŒ‡å‘æ ˆé¡¶çš„æŒ‡é’ˆ</li>
</ul></li>
<li>å‡½æ•°è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…è¯¥æ€ä¹ˆä¿è¯å¯„å­˜å™¨çš„å®‰å…¨ä½¿ç”¨ -&gt; åŸºäºç®€å•çš„çº¦å®š
<ul>
<li>Saved Registers (Callee Saved)
<ul>
<li><code>s0-s11</code></li>
<li><code>sp</code></li>
<li>è¿™äº›å¯„å­˜å™¨åœ¨è¢«è°ƒç”¨è€…è¿”å›å‰ï¼ˆcalleeï¼‰ï¼Œå¿…é¡»æŠŠSaved
Registersæ¢å¤åˆ°è°ƒç”¨ä¹‹å‰</li>
</ul></li>
<li>Volatile Registers ï¼ˆif needed Caller Savedï¼‰
<ul>
<li><code>t0-t6</code> å±€éƒ¨å˜é‡ç”¨</li>
<li><code>a0-a7</code> è¿”å›å€¼åŠä¼ å…¥å‚æ•°ç”¨</li>
<li><code>ra</code> è¿”å›åœ°å€å¯„å­˜å™¨</li>
<li><figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698652070050-839f29d4-7f2e-4351-bcff-c448fcee9faf.png#averageHue=%23dfdedb&amp;clientId=u6d5171cb-c4b2-4&amp;from=paste&amp;height=379&amp;id=u7cec9d43&amp;originHeight=758&amp;originWidth=1170&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=272076&amp;status=done&amp;style=none&amp;taskId=u41a4dc45-89eb-4ffa-88ac-c86c0ec6837&amp;title=&amp;width=585" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure></li>
</ul></li>
</ul></li>
<li>ä¾‹å­</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698653639109-8f96d7bc-01fc-4d91-935a-b72e87da92f6.png#averageHue=%23f3f2f2&amp;clientId=u6d5171cb-c4b2-4&amp;from=paste&amp;height=380&amp;id=ud4fefbb2&amp;originHeight=760&amp;originWidth=1334&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=138085&amp;status=done&amp;style=none&amp;taskId=ua9b22fd0-90b4-4c91-bb09-16ba4c8a39f&amp;title=&amp;width=667" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h1 id="lecture-8-risc-v-format">Lecture 8 RISC-V format</h1>
<p><a
target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2023/pdf/22918222/1698730134374-89704955-8d29-44c5-b9b9-af80d35e802f.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22918222%2F1698730134374-89704955-8d29-44c5-b9b9-af80d35e802f.pdf%22%2C%22name%22%3A%22lec08.pdf%22%2C%22size%22%3A14352933%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u47969a60-abb8-4c09-983b-8b4e6ad5dec%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22u6001ded4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">lec08.pdf</a></p>
<ul>
<li>æœ€å¼€å§‹çš„ENIACèƒ½å¤Ÿåœ¨2mså†…è®¡ç®—ä¸¤ä¸ªåä½æ•°çš„ä¹˜æ³•ï¼Œä½†æ˜¯éœ€è¦ä¸¤åˆ°ä¸‰å¤©è®¾ç½®ç¨‹åº</li>
<li>ä¸ºä»€ä¹ˆä¸ç”¨bitæ¥è¡¨ç¤ºæŒ‡ä»¤å‘¢ï¼Ÿæ‰€æœ‰è¦æ‰§è¡Œçš„æŒ‡ä»¤å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè¿™æ˜¯ç°ä»£è®¡ç®—çš„æ ¸å¿ƒæ€æƒ³ã€‚
<ul>
<li>cè¯­è¨€çš„æŒ‡é’ˆæŒ‡å‘çš„æ˜¯å†…å­˜ä¸­çš„æ•°æ®</li>
<li>PCæŒ‡å‘çš„æ˜¯å†…å­˜ä¸­çš„ä»£ç ã€æŒ‡ä»¤</li>
</ul></li>
<li>éšç€ç¡¬ä»¶çš„å‘å±•ï¼Œæˆ‘ä»¬æ—¢ä¸æƒ³æŠ›å¼ƒä»¥å‰çš„æŒ‡ä»¤é›†ï¼ŒåˆåŠ å…¥äº†æ–°çš„æŒ‡ä»¤é›†ï¼Œè¿™å¯¼è‡´äº†æŒ‡ä»¤é›†çš„è†¨èƒ€
<ul>
<li>å…¸å‹çš„ä¾‹å­å°±æ˜¯x86</li>
<li>æ±‡ç¼–å™¨æ›¿æˆ‘ä»¬æŠŠæ±‡ç¼–ä»£ç è½¬è¯‘ä¸ºæœºå™¨è¯­è¨€</li>
</ul></li>
<li>æˆ‘ä»¬æœ‰6ç§ä¸åŒçš„åˆ’åˆ†æ–¹æ³•ï¼Œå°†ä¸€ä¸ª32ä½çš„æŒ‡ä»¤åˆ’åˆ†ä¸ºä¸åŒæŒ‡ä»¤æ ¼å¼ï¼Œè¿™æ˜¯å¯¹<code>ç¡¬ä»¶ç®€åŒ–è®¾è®¡</code>ä»¥åŠ<code>å¤æ‚æŒ‡ä»¤è®¾è®¡</code>çš„å¦¥å
<ul>
<li><code>R-Format</code>
å®ç°æ‰€æœ‰éœ€è¦ä¸‰ä¸ªå¯„å­˜å™¨çš„ç®—æ•°ä¸é€»è¾‘æ“ä½œæŒ‡ä»¤</li>
<li><code>I-Format</code> å®ç°å¸¦æœ‰ç«‹å³æ•°çš„è¿ç®—æŒ‡ä»¤å’ŒåŠ è½½æŒ‡ä»¤</li>
<li><code>S-Format</code> å®ç°å°†å¯„å­˜å™¨çš„å€¼å†™å…¥åˆ°å†…å­˜ä¸­</li>
<li><code>U-Format</code>
å’Œ<code>I-Format</code>ç±»ä¼¼ï¼Œä½†æ˜¯ç«‹å³æ•°æ˜¯é«˜20ä½</li>
<li><code>SB-Format</code> åˆ†æ”¯æŒ‡ä»¤è®¾è®¡</li>
<li><code>Uj-Format</code> ç›´æ¥æ›´æ”¹ç¨‹åºæ‰§è¡Œåœ°å€</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698731496105-324b1ae0-ac9b-4431-92ab-58e5fdc5149d.png#averageHue=%23e0e0e0&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=304&amp;id=u8d0bdc22&amp;originHeight=608&amp;originWidth=1662&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=223957&amp;status=done&amp;style=none&amp;taskId=u43ea0b8b-98e2-44df-8c8a-5deee5a169f&amp;title=&amp;width=831" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><code>funct7</code>ï¼Œ<code>funct3</code>
ç»„åˆèµ·æ¥ç”¨äºæŒ‡å®šå…·ä½“çš„æ“ä½œ</li>
<li><code>rs1</code>ï¼Œ<code>rs2</code>
åˆ™å­˜å‚¨äº†æ“ä½œæ•°ï¼Œ<code>rd</code>åˆ™æ ‡æ³¨äº†å†™å…¥ç»“æœçš„å¯„å­˜å™¨</li>
<li><code>imm</code>æ˜¯ç«‹å³æ•°ï¼Œå¯ä»¥çœ‹åˆ°æ’å¸ƒè§„åˆ™è¿˜æ˜¯å¾ˆå¥‡æ€ªçš„ï¼Œç”šè‡³è¿˜æœ‰ç¼©ä½ï¼Œä¸€åˆ‡éƒ½æ˜¯ä¸ºäº†ç¡¬ä»¶</li>
<li><code>opcode</code>åˆ™å‘Šè¯‰æˆ‘ä»¬æŸæ¡æŒ‡ä»¤åˆ°åº•å±äºå“ªä¸€ç±»</li>
</ul>
<h2 id="r-format">R-Format</h2>
<ul>
<li>ä¸åŒçš„filedé•¿åº¦ä¸åŒï¼Œä½†éƒ½æ˜¯<del>æ— ç¬¦å·æ•°</del>ï¼Œä¼¼ä¹å¹¶ä¸æ˜¯ï¼Œimmæ˜¯ä»¥è¡¥ç çš„å½¢å¼å­˜å‚¨çš„</li>
<li>æˆ‘ä»¬æœ‰<span class="math inline">\(2^3 * 2^7 =
2^{10}\)</span>ä¸ªä¸åŒçš„<code>R-Format</code>æŒ‡ä»¤</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698732005283-36654ee8-af2b-4dca-ac25-26ec9e133289.png#averageHue=%23dcdcdc&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=198&amp;id=u9af2c0d4&amp;originHeight=396&amp;originWidth=1476&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=47188&amp;status=done&amp;style=none&amp;taskId=u5844de16-cfd4-4335-bf57-32f5ecbed75&amp;title=&amp;width=738" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æ‰€æœ‰<code>R-Format</code>æŒ‡ä»¤çš„æ“ä½œç éƒ½æ˜¯ä¸€è‡´çš„</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698732488592-4ca0a33f-95e1-482c-b8ce-01b0a5110a11.png#averageHue=%23f1f0f0&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=336&amp;id=ucb8f55c2&amp;originHeight=672&amp;originWidth=1666&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=true&amp;size=589761&amp;status=done&amp;style=none&amp;taskId=u9e20d5ac-e26e-4053-9279-6c52d2d34f8&amp;title=funct7%EF%BC%8Crs2%EF%BC%8Crs1%EF%BC%8Cfunct3%EF%BC%8Crd%EF%BC%8Copcode&amp;width=833" srcset="/img/loading.gif" lazyload
title="funct7ï¼Œrs2ï¼Œrs1ï¼Œfunct3ï¼Œrdï¼Œopcode"
alt="funct7ï¼Œrs2ï¼Œrs1ï¼Œfunct3ï¼Œrdï¼Œopcode" />
<figcaption
aria-hidden="true">funct7ï¼Œrs2ï¼Œrs1ï¼Œfunct3ï¼Œrdï¼Œopcode</figcaption>
</figure>
<h2 id="i-format">I-Format</h2>
<ul>
<li>å½“å­˜åœ¨ç«‹å³æ•°æ—¶ï¼Œæ„å‘³ç€æˆ‘ä»¬çš„æŒ‡ä»¤ä¸­å¿…é¡»åŒ…å«ä¸€ä¸ªç«‹å³æ•°ï¼Œè€Œä¸æ˜¯å¯„å­˜å™¨çš„åœ°å€ï¼Œè€Œå¯¹äºæˆ‘ä»¬å·²ç»çŸ¥é“çš„<code>R-Format</code>æ¥è¯´ï¼Œç”¨5ä½æ¥è¡¨ç¤ºä¸€ä¸ªç«‹å³æ•°å¯ç”¨çš„èŒƒå›´å¤ªå°äº†</li>
<li>RISC-Vçš„è®¾è®¡ç†å¿µå¸Œæœ›æˆ‘ä»¬åªæœ‰ä¸€æ¡æŒ‡ä»¤ï¼Œä½†ç°åœ¨æˆ‘ä»¬éœ€è¦è¿èƒŒè¿™ä¸ªç†å¿µï¼Œéœ€è¦ä¸€ä¸ªä¸åŒçš„æ ¼å¼</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698733022692-72c619ae-3c35-4672-ad82-e183d5ddf3a8.png#averageHue=%23e2e2e2&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=214&amp;id=u67d24560&amp;originHeight=428&amp;originWidth=1516&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=45700&amp;status=done&amp;style=none&amp;taskId=ua0ad3885-7c58-4c5d-9293-864777a2c92&amp;title=&amp;width=758" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><code>func7</code>å’Œ<code>rs2</code>è¢«ç”¨äºè¡¨ç¤ºä¸€ä¸ªç«‹å³æ•°ï¼Œå…¶ä»–çš„filedå’Œ<code>R-Format</code>ä¿æŒä¸€è‡´</li>
<li><code>imm</code>æ¯æ¬¡åœ¨è¿›è¡Œç®—æ•°è¿ç®—æ—¶éƒ½ä¼šç”±12ä½æ•°æ‹“å±•ä¸º32ä½</li>
<li><code>imm</code>çš„èŒƒå›´æ˜¯<span class="math inline">\([-2^{11},
+2^{11}-1]\)</span></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698733625798-ad9befea-32f4-4ad5-a7dc-2db803658933.png#averageHue=%23f2f1f1&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=528&amp;id=u031f7904&amp;originHeight=1056&amp;originWidth=1664&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=624028&amp;status=done&amp;style=none&amp;taskId=uda12b564-9fbf-4d9e-a498-6ca7519452b&amp;title=&amp;width=832" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><p>å¯¹äºç‰¹æ®Šçš„ç§»ä½æ“ä½œï¼Œåªä½¿ç”¨ä½äº”ä½ä»£è¡¨ç§»åŠ¨çš„ä½æ•°</p></li>
<li><p>ç”¨<code>1</code>å’Œ<code>0</code>åŒºåˆ«ç®—æ•°å³ç§»å’Œé€»è¾‘å³ç§»</p></li>
<li><p>Load - Instructions ä¹Ÿæ˜¯I-Formatç±»å‹çš„æŒ‡ä»¤</p></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698734235888-8b73801b-94d0-4615-baa7-a7110a786b39.png#averageHue=%23d5d5d5&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=149&amp;id=u7ef3c8ae&amp;originHeight=298&amp;originWidth=1494&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=42074&amp;status=done&amp;style=none&amp;taskId=u19c25f25-a669-407d-bb85-94d83e2fc2b&amp;title=&amp;width=747" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ä»<code>rs1</code>ä¸­å–å‡ºå†…å­˜ä¸­çš„åŸºåœ°å€ï¼Œä¸åç§»é‡ç›¸åŠ åå–å‡ºå€¼æ”¾åˆ°<code>dst</code>ä¸­</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698734461932-9e1df626-6bc4-4a8f-b0e6-03030d5d4d7c.png#averageHue=%23e7e7e7&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=434&amp;id=ub17b1893&amp;originHeight=868&amp;originWidth=1620&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=455246&amp;status=done&amp;style=none&amp;taskId=u1d2c4b1c-81cf-4512-bd9e-51a8029ad75&amp;title=&amp;width=810" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>jalrä¹Ÿæ˜¯Iç±»å‹çš„æŒ‡ä»¤</li>
<li>éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œè¿™é‡Œçš„åç§»é‡å•ä½å°±æ˜¯å­—èŠ‚ï¼Œä¸éœ€è¦ä¹˜ä»¥2å­—èŠ‚è¿›è¡Œå¯¹é½ï¼Œè·³è½¬ç²’åº¦æ˜¯å­—èŠ‚ä¸ºå•ä½çš„</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698905507228-1dd5033b-7ad5-49fc-ba88-3654f8f68112.png#averageHue=%23ecebeb&amp;clientId=u9d81647c-e583-4&amp;from=paste&amp;height=495&amp;id=ud4019649&amp;originHeight=990&amp;originWidth=1680&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=399286&amp;status=done&amp;style=none&amp;taskId=ue0df2649-9404-4870-abef-b07a039122d&amp;title=&amp;width=840" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="s-format">S-Format</h2>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698734963547-61540699-83e3-45e7-ac81-b4316d19d0ac.png#averageHue=%23d3d3d3&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=80&amp;id=u24667f88&amp;originHeight=160&amp;originWidth=1484&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=25763&amp;status=done&amp;style=none&amp;taskId=u8174b156-b78a-432c-8f28-8871296d283&amp;title=&amp;width=742" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å»æ‰ç›®æ ‡å¯„å­˜å™¨ï¼Œæ›´æ”¹ä¸ºç«‹å³æ•°çš„ä½5ä½</li>
<li>åŠŸèƒ½å°±æ˜¯åœ¨<code>rs1</code>åœ°å€åŠ ä¸Šåç§»é‡çš„ä½ç½®å†™å…¥<code>rs2</code>çš„å†…å®¹</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698735048416-6dbfa85e-9751-4b88-9c88-fefd83b041fe.png#averageHue=%23f0efef&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=102&amp;id=uaca08fc5&amp;originHeight=204&amp;originWidth=1598&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=216220&amp;status=done&amp;style=none&amp;taskId=uceb46ecf-b39f-42a6-b083-37444fdfed8&amp;title=&amp;width=799" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="sb-format">SB-Format</h2>
<ul>
<li>ä¸€èˆ¬ç”¨äºå¾ªç¯æˆ–è€…æµç¨‹æ§åˆ¶ï¼Œå¾ªç¯ä¸€èˆ¬ä¼šå°äº50æ¡æŒ‡ä»¤</li>
<li>åˆ†æ”¯è·ç¦» ä»å½“å‰åˆ†æ”¯æŒ‡ä»¤åˆ°ç›®æ ‡ä½ç½®çš„è·ç¦» ä¸€èˆ¬ç”¨å­—èŠ‚æˆ–è€…æŒ‡ä»¤æè¿°
<ul>
<li>è¿™ä¸ªå¤§å°æ”¶åˆ°ä»£ç æ®µå¤§å°çš„é™åˆ¶ï¼ˆä»£ç æ®µæœ¬èº«çš„å¤§å°ï¼Œä¸å¯ä»¥è·³åˆ°ä»£ç æ®µä¹‹å¤–çš„ä½ç½®ï¼‰</li>
<li><code>PC</code>å­˜å‚¨äº†å½“å‰æŒ‡ä»¤çš„åœ°å€ï¼Œå…·ä½“è·³è½¬çš„ä½ç½®ç”±å½“å‰<code>PC</code>å†…çš„åœ°å€åœ¨<span
class="math inline">\([-2^{11},+2^{11]}\)</span>å¯¹é½çš„ä½ç½®è¿›è¡Œè·³è½¬ï¼ˆä¸å¯¹é½ä¼šå¼•å‘æ€§èƒ½é—®é¢˜ï¼‰ï¼Œå¹¶ä¸”è·³è½¬çš„è·ç¦»å¿…é¡»æ˜¯4Byteçš„æ•´æ•°å€
<ul>
<li>RISC-Vä½¿ç”¨32ä½åœ°å€ï¼šè¿™æ„å‘³ç€å®ƒä½¿ç”¨32ä½æ¥è¡¨ç¤ºå†…å­˜åœ°å€ã€‚</li>
<li>å†…å­˜æ˜¯æŒ‰å­—èŠ‚å¯»å€çš„ï¼šå³æ¯ä¸ªåœ°å€å¯¹åº”ä¸€ä¸ªå­—èŠ‚ã€‚</li>
<li>32ä½æŒ‡ä»¤æ˜¯â€œword-alignedâ€ï¼šè¿™æ„å‘³ç€æ¯ä¸ª32ä½æŒ‡ä»¤çš„åœ°å€éƒ½æ˜¯4çš„å€æ•°ï¼ˆå› ä¸ºä¸€ä¸ªå­—æ˜¯4ä¸ªå­—èŠ‚ï¼‰ã€‚ä¾‹å¦‚ï¼Œ0x1000,
0x1004, 0x1008 ç­‰éƒ½æ˜¯æœ‰æ•ˆçš„æŒ‡ä»¤åœ°å€ï¼Œè€Œ0x1001, 0x1002, 0x1003
ç­‰åˆ™ä¸æ˜¯ã€‚</li>
<li>ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰å§‹ç»ˆæŒ‡å‘ä¸€ä¸ªæŒ‡ä»¤ï¼šè¿™æ˜¯è®¡ç®—æœºç¡¬ä»¶è®¾è®¡çš„åŸºæœ¬åŸåˆ™ï¼Œç¡®ä¿ç¨‹åºèƒ½å¤Ÿé¡ºåºåœ°æ‰§è¡ŒæŒ‡ä»¤ã€‚</li>
<li>RISC-Vçš„å‹ç¼©æŒ‡ä»¤ï¼šå¦‚æœç³»ç»Ÿæ”¯æŒRISC-Vçš„å‹ç¼©æŒ‡ä»¤ï¼ˆè¿™äº›æŒ‡ä»¤åªæœ‰16ä½é•¿ï¼‰ï¼Œé‚£ä¹ˆæ‰€æœ‰æŒ‡ä»¤éƒ½æ˜¯â€œhalf
word-alignedâ€ï¼Œå³æŒ‡ä»¤çš„åœ°å€æ˜¯2çš„å€æ•°ã€‚</li>
</ul></li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698740799992-a3592756-99f0-4154-b14f-7d8c63dbeab4.png#averageHue=%23edebeb&amp;clientId=ude36ddce-19a5-4&amp;from=paste&amp;height=205&amp;id=uf622e6ec&amp;originHeight=410&amp;originWidth=1110&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=53332&amp;status=done&amp;style=none&amp;taskId=u4a2fed25-25d7-4f0e-995b-5c9d598479f&amp;title=&amp;width=555" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ISA æŒ‡ä»¤é›†çš„æŠ½è±¡ä½“ç³»ç»“æ„
ä¸ºåŒä¸€ISAç¼–å†™çš„ç¨‹åºå¯ä»¥åœ¨ä¸åŒçš„ISAçš„å®ç°å¹³å°ä¸Šè¿è¡Œ</li>
<li>æ‹“å±•çš„RISC-Væ”¯æŒ16ä½çš„å‹ç¼©æŒ‡ä»¤ï¼Œä¸ºäº†å¯¹é½å…¼å®¹ï¼Œå› æ­¤åˆ†æ”¯æŒ‡ä»¤çš„åç§»é‡ä»¥åŠå­—ä¸ºå•ä½ï¼Œæ— è®ºä½ æœ‰æ²¡æœ‰ç”¨åˆ°16ä½å‹ç¼©æŒ‡ä»¤</li>
<li>ä»å½“å‰æŒ‡ä»¤æœ€å¤§åªèƒ½å®ç°<span
class="math inline">\(2^{10}\)</span>æ¡32ä½æŒ‡ä»¤çš„è·³è½¬ï¼Œåç§»é‡çš„å•ä½æ˜¯åŠå­—ï¼ˆ16ä½bitï¼Œ2Byteï¼‰
<ul>
<li>ä¸ºä»€ä¹ˆä¸ç”¨ä¸€ä¸ªå­—å‘¢ï¼Ÿ ï¼ˆå…¼å®¹16ä½ï¼Œä»¥åŠå¯ä»¥ç¼©å‡æ‰€å ç”¨ç©ºé—´çš„å¤§å°ï¼‰</li>
<li>Immå®é™…è¡¨ç¤ºçš„æ˜¯13ä½çš„åç§»ï¼Œå®é™…çš„åç§»é‡æ—¢immæ‰€è¡¨ç¤ºçš„ç«‹å³æ•°<em>2ï¼ˆæˆ–è€…å‘æœ€ä½ä½è¡¥ä¸€ä¸ªé›¶ï¼‰</em>2Byte
<ul>
<li>ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·ï¼Ÿå› ä¸ºæˆ‘ä»¬çš„åç§»é‡çš„æœ€åä¸€ä½æ€»ä¼šæ˜¯é›¶ï¼ˆRISC-Væ˜¯4å­—èŠ‚æˆ–2å­—èŠ‚å¯¹é½çš„æŒ‡ä»¤ï¼‰</li>
</ul></li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698901080971-3f51d5a7-2dd2-4cd0-af44-284844389697.png#averageHue=%23dcdcdc&amp;clientId=u9d81647c-e583-4&amp;from=paste&amp;height=89&amp;id=uc98eb373&amp;originHeight=178&amp;originWidth=1318&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=27094&amp;status=done&amp;style=none&amp;taskId=u5565e66d-3a5d-4ad2-967d-7a7bdfcde31&amp;title=&amp;width=659" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><code>filed1</code>çš„æœ€é«˜ä½å­˜å‚¨åç§»é‡çš„ç¬¬12ä½ï¼Œå‰©ä½™çš„ä½å­˜ç¬¬10-5ä½</li>
<li><code>filed5</code>çš„å‰4ä½å­˜å‚¨åç§»é‡çš„1-4ä½ï¼Œæœ€åä¸€ä½å­˜ç¬¬11ä½</li>
<li>è¿™ååˆ†åœ°åˆ«æ‰­ï¼Œä½†ä¸€åˆ‡éƒ½æ˜¯åŸºäºç¡¬ä»¶çš„è€ƒé‡</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698901518070-46951d19-2687-4301-984c-4db668bd251b.png#averageHue=%23d6d3cd&amp;clientId=u9d81647c-e583-4&amp;from=paste&amp;height=140&amp;id=udef4f31f&amp;originHeight=280&amp;originWidth=1366&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=352410&amp;status=done&amp;style=none&amp;taskId=u5f94b002-4d7a-407c-a937-75b8ac2cc9d&amp;title=&amp;width=683" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>SBæŒ‡ä»¤å®ç°è·³è½¬æ˜¯åŸºäºPCå¯„å­˜å™¨çš„ç›¸å¯¹å¯»å€æ–¹å¼
<ul>
<li>æ•´ä¸ªä»£ç åŒºçš„ç§»åŠ¨ä¸ä¼šå¯¼è‡´ç«‹å³æ•°çš„æ”¹å˜ï¼ˆéƒ¨åˆ†ä»£ç ä¼šï¼‰</li>
<li>å½“æˆ‘ä»¬è¦è·³è½¬çš„æŒ‡ä»¤èŒƒå›´å¤§äºäº†<span
class="math inline">\(2^{10}\)</span>æ¡32ä½çš„æŒ‡ä»¤ï¼Œé‚£ä¹ˆå°†ä¼šä½¿ç”¨JæŒ‡ä»¤è¿›è¡Œè·³è½¬ï¼ŒJæŒ‡ä»¤å…·æœ‰æ›´å¤§çš„è·³è½¬èŒƒå›´</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698902363917-1af982b9-78e5-46de-b14a-335449573e91.png#averageHue=%23f3f3f3&amp;clientId=u9d81647c-e583-4&amp;from=paste&amp;height=86&amp;id=ua396d7e2&amp;originHeight=172&amp;originWidth=1406&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=58600&amp;status=done&amp;style=none&amp;taskId=ua2a8f81c-222f-424b-9765-1e0da6f8a9a&amp;title=&amp;width=703" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="u-format">U-Format</h2>
<ul>
<li>I-FormatæŒ‡ä»¤åªç»™äº†æˆ‘ä»¬12ä½çš„ç«‹å³æ•°ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦ç”¨åˆ°æ›´å¤§çš„ç«‹å³æ•°ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨åˆ°U-FormatæŒ‡ä»¤</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698902740750-9e6e9c8a-5af0-4f38-ad6e-3e5dff5f44d3.png#averageHue=%23e7e7e7&amp;clientId=u9d81647c-e583-4&amp;from=paste&amp;height=142&amp;id=u9b8db4e0&amp;originHeight=284&amp;originWidth=1278&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=34144&amp;status=done&amp;style=none&amp;taskId=u7584e02f-42c2-4c7f-830d-4cefaae10bc&amp;title=&amp;width=639" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>åŠ è½½32ä½ç«‹å³æ•°çš„é«˜20ä½åˆ°ç¨‹åºå¯„å­˜å™¨/PCä¸­ï¼Œå‰©ä½™çš„ä½ç½®è¡¥0</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698903497326-de0e6f46-193d-4a96-98cd-abd78eb3bef4.png#averageHue=%23e9e9e9&amp;clientId=u9d81647c-e583-4&amp;from=paste&amp;height=138&amp;id=u87fa6781&amp;originHeight=276&amp;originWidth=1242&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=43792&amp;status=done&amp;style=none&amp;taskId=ub900998c-4a63-4c55-9a6e-75a7bb327b9&amp;title=&amp;width=621" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>åŠ è½½è¿™ä¸ª32ä½çš„ç«‹å³æ•°å‡ºç°äº†é—®é¢˜ï¼ŒåŸå› æ˜¯<code>addi</code>å¯¹è¦åŠ è½½çš„ç«‹å³æ•°è¿›è¡Œäº†ç¬¦å·æ‹“å±•ï¼Œè¿™å¯¼è‡´å®é™…ä¸Šæˆ‘ä»¬è®¡ç®—çš„æ˜¯<code>0xDEADB000</code>+<code>0xFFFFFEEF</code></li>
<li>æˆ‘ä»¬åªéœ€è¦åœ¨å¤„ç†éœ€è¦ç¬¦å·æ‹“å±•çš„<code>addi</code>å¯¹<code>0xDEADB</code>åç§»ä¸€æ¬¡å°±å¥½ï¼Œå³å¾—åˆ°<code>0xDEADC</code>
+ <code>0xFFFFFEEF</code> = <code>0xDEADBEEF</code></li>
<li>AUIPCæ˜¯æŠŠç«‹å³æ•°çš„é«˜ä½å’ŒPCç›¸åŠ å¹¶å­˜åˆ°dstå¯„å­˜å™¨ä¸­</li>
</ul>
<h2 id="uj-format">UJ-Format</h2>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698904542497-62389d48-4669-41f4-991b-78926f2d1f6b.png#averageHue=%23e6e6e6&amp;clientId=u9d81647c-e583-4&amp;from=paste&amp;height=173&amp;id=uad26ebff&amp;originHeight=346&amp;originWidth=1596&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=93781&amp;status=done&amp;style=none&amp;taskId=u6970e327-4523-4b8d-98e9-0e2ec5cda50&amp;title=&amp;width=798" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æŠŠPC+4 å­˜åˆ°dsté‡Œ</li>
<li>ä»¤PC = PC + offset</li>
<li>æœ€å¤§å¯è·³è¿‡<span class="math inline">\(2^{19}\)</span>ä¸ª
16ä½æŒ‡ä»¤ï¼Œå³<span class="math inline">\(2^{18}\)</span>ä¸ª32ä½çš„æŒ‡ä»¤</li>
<li><code>J</code>æ˜¯ä¼ªæŒ‡ä»¤ï¼Œè¿˜æ˜¯åŸºäº<code>JAL</code>ï¼Œåˆ©ç”¨äº†<code>x0</code>å¯„å­˜å™¨ä¸ä¼šè¢«ä¿®æ”¹çš„ç‰¹ç‚¹</li>
<li>immçš„ç¼–ç è¿˜æ˜¯ååˆ†æ··ä¹±ï¼Œå†æ¬¡å¼ºè°ƒï¼Œè¿™æ˜¯ä¸ºäº†é™ä½ç¡¬ä»¶æˆæœ¬</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698905695577-a7bae46e-7124-4c45-ab9e-7f01f8e189f0.png#averageHue=%23f1f1f1&amp;clientId=u9d81647c-e583-4&amp;from=paste&amp;height=305&amp;id=ub6080920&amp;originHeight=610&amp;originWidth=1802&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=332071&amp;status=done&amp;style=none&amp;taskId=u872acf9c-a42d-4809-9256-9ae00804e4b&amp;title=&amp;width=901" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>çœ‹èµ·æ¥å°±å¾ˆç¡¬ä»¶å‹å¥½ï¼Œä¾‹å¦‚opcodeçš„ä½ç½®ï¼Œrdï¼Œrsçš„ä½ç½®éƒ½æ˜¯å¯¹é½çš„</p>
<h1 id="lecture-9-call">Lecture 9 CALL</h1>
<p><a
target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2023/pdf/22918222/1698909449654-f25c0253-547f-4ac1-884a-7f85cc0bc54e.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22918222%2F1698909449654-f25c0253-547f-4ac1-884a-7f85cc0bc54e.pdf%22%2C%22name%22%3A%22lec09-2.pdf%22%2C%22size%22%3A8406067%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22ucedb2fc9-46d6-493a-935e-c969e717e2e%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22ub5a4e767%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">lec09-2.pdf</a></p>
<ul>
<li>Compiler</li>
<li>Assembler</li>
<li>Linker</li>
<li>Loader</li>
</ul>
<h2 id="translation">Translation</h2>
<ul>
<li>å½“æˆ‘ä»¬ç¼–å†™ç¨‹åºåï¼Œæœ‰ä¸¤ç§æ–¹æ³•è¿è¡Œæˆ‘ä»¬ç¼–å†™çš„è¿è¡Œç¨‹åº
<ul>
<li>è§£é‡Š ï¼šè¾¹è§£é‡Šè¾¹è¿è¡Œ ä¾‹å¦‚python<br />
</li>
<li>ç¿»è¯‘ï¼š è½¬æ¢ä¸ºå¦ä¸€ç§ç­‰ä»·è¯­è¨€æ¥è¿è¡Œ ä¾‹å¦‚c</li>
<li>å½“å…·æœ‰æ€§èƒ½çš„è€ƒé‡çš„æ—¶å€™ï¼Œç”¨translate</li>
<li>è§£é‡Šè¯­è¨€å¾€å¾€æ€§èƒ½æ…¢ä¸€äº› 10xï¼Œä½†æ˜¯ä»£ç å°‘ 2x</li>
</ul></li>
</ul>
<h2 id="compiler">Compiler</h2>
<ul>
<li>å°†.cæºæ–‡ä»¶è¾“å‡ºä¸º.sæ±‡ç¼–æ–‡ä»¶ï¼ˆå¯èƒ½åŒ…å«ä¼ªæŒ‡ä»¤ï¼‰
<ul>
<li>é¢„å¤„ç†ï¼Œä¾‹å¦‚å®æ›¿æ¢ï¼Œå¤´æ–‡ä»¶åŒ…å«</li>
<li>ç¡®å®šè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ a = 3+ 4*2</li>
<li>...éå¸¸å¤æ‚</li>
<li><a
target="_blank" rel="noopener" href="https://www.sigbus.info/how-i-wrote-a-self-hosting-c-compiler-in-40-days">https://www.sigbus.info/how-i-wrote-a-self-hosting-c-compiler-in-40-days</a></li>
</ul></li>
</ul>
<h2 id="assembler">Assembler</h2>
<ul>
<li>å°†.sçš„æ±‡ç¼–æ–‡ä»¶è¾“å‡ºä¸º.oäºŒè¿›åˆ¶æ–‡ä»¶
<ul>
<li>è¯»å’Œä½¿ç”¨Directives ï¼ˆåŒºåˆ†ä»£ç æ®µ, æ–‡æœ¬æ®µï¼ŒæŒ‡ä»¤ç­‰ï¼‰
<ul>
<li>Directiveså¹¶ä¸ä¼šè¢«è½¬æ¢ä¸ºæœºå™¨ä»£ç </li>
<li>text:
è¯¥æŒ‡ä»¤åçš„é¡¹ç›®è¢«æ”¾ç½®åœ¨ç”¨æˆ·æ–‡æœ¬æ®µä¸­ã€‚é€šå¸¸ï¼Œè¿™æ˜¯ç¨‹åºçš„æœºå™¨ä»£ç éƒ¨åˆ†ï¼Œå³å®é™…çš„æŒ‡ä»¤ã€‚</li>
<li>.data:
è¯¥æŒ‡ä»¤åçš„é¡¹ç›®è¢«æ”¾ç½®åœ¨ç”¨æˆ·æ•°æ®æ®µä¸­ã€‚è¿™æ˜¯ç¨‹åºä¸­çš„é™æ€æ•°æ®ï¼Œå¦‚å˜é‡å’Œå¸¸é‡ã€‚å®ƒå­˜å‚¨æºæ–‡ä»¶ä¸­æ•°æ®çš„äºŒè¿›åˆ¶è¡¨ç¤ºã€‚</li>
<li>.globl sym:
è¿™å£°æ˜äº†ä¸€ä¸ªå…¨å±€ç¬¦å·ï¼Œè¿™æ„å‘³ç€è¯¥ç¬¦å·å¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­è¢«å¼•ç”¨ã€‚ä¾‹å¦‚ï¼Œè¿™å¯ä»¥æ˜¯ä¸€ä¸ªåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰ä½†åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨çš„å‡½æ•°æˆ–å˜é‡ã€‚</li>
<li>.asciiz str:
è¿™å°†å­—ç¬¦ä¸²strå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¹¶åœ¨å…¶åæ·»åŠ ä¸€ä¸ªnullç»ˆæ­¢ç¬¦ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³•ï¼Œç”¨äºåœ¨Cè¯­è¨€ä¸­è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œå› ä¸ºCè¯­è¨€çš„å­—ç¬¦ä¸²æ˜¯ä»¥nullå­—ç¬¦ï¼ˆå€¼ä¸º0çš„å­—ç¬¦ï¼‰ç»ˆæ­¢çš„ã€‚</li>
<li>.word w1...wn: è¿™å°†è¿ç»­çš„nä¸ª32ä½çš„æ•°å€¼å­˜å‚¨åœ¨è¿ç»­çš„å†…å­˜å•å…ƒä¸­ã€‚</li>
</ul></li>
<li>æ›¿æ¢ä¼ªæŒ‡ä»¤</li>
<li>è½¬æ¢ä¸ºæœºå™¨è¯­è¨€ï¼ˆè¾“å‡ºä¸ºç›®æ ‡æ–‡ä»¶ï¼‰
<ul>
<li>åœ¨é“¾æ¥ä»¥å‰ï¼Œéœ€è¦è§£å†³ä¸€ä¸ªç¬¦å·å¼•ç”¨çš„é—®é¢˜ï¼Œä¾‹å¦‚labelçš„è·³è½¬ï¼Œä»å®é™…çš„å†…å­˜ä¸­åŠ è½½æ•°æ®ï¼Œè¿™äº›éœ€è¦ç²¾ç¡®çš„32ä½å†…å­˜ï¼Œè€Œæˆ‘ä»¬åœ¨æ±‡ç¼–é˜¶æ®µæ˜¯ä¸å¯èƒ½ç¡®å®šçš„ã€‚è¿™ä¹Ÿå«åšå‰å‘å¼•ç”¨é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ç»´æŠ¤ä¸€ä¸ª<code>ç¬¦å·è¡¨</code>
å’Œä¸€ä¸ª<code>é‡å®šä½è¡¨</code>ï¼Œè¿è¡Œå¤šæ¬¡<code>Assembler</code>æ¥è§£å†³ã€‚</li>
<li>ç›®æ ‡æ–‡ä»¶åœ¨<code>unix</code>å’Œ<code>Linux</code>
å¹³å°å¾€å¾€æ˜¯<code>ELF</code>æ ¼å¼çš„</li>
<li>å¯¹è±¡æ–‡ä»¶å¤´ (object file
header)ï¼šè¿™æ˜¯ç›®æ ‡æ–‡ä»¶çš„å…ƒä¿¡æ¯éƒ¨åˆ†ï¼Œå®ƒæä¾›äº†æ–‡ä»¶ä¸­å…¶ä»–éƒ¨åˆ†çš„å¤§å°å’Œä½ç½®ã€‚æ­¤å¤´éƒ¨æ ‡è¯†äº†æ–‡ä»¶çš„ç±»å‹ï¼ˆä¾‹å¦‚ï¼Œæ˜¯å¦æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œè¿˜æ˜¯ä¸€ä¸ªå…±äº«åº“ï¼‰ä»¥åŠå…¶ä»–å…³äºæ–‡ä»¶çš„åŸºæœ¬å±æ€§ã€‚</li>
<li>æ–‡æœ¬æ®µ (text
segment)ï¼šè¿™éƒ¨åˆ†åŒ…å«ç¨‹åºçš„å®é™…æœºå™¨ä»£ç ã€‚å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œè¿™éƒ¨åˆ†ä»£ç ä¼šè¢«åŠ è½½åˆ°å†…å­˜å¹¶æ‰§è¡Œã€‚</li>
<li>æ•°æ®æ®µ (data
segment)ï¼šæ­¤éƒ¨åˆ†åŒ…å«ç¨‹åºçš„é™æ€æ•°æ®å’Œå…¨å±€å˜é‡ã€‚åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå®ƒä»¬ä¼šè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä¾›ç¨‹åºè®¿é—®å’Œä¿®æ”¹ã€‚</li>
<li>é‡å®šä½è¡¨ (relocation
table)ï¼šå¦‚å‰æ‰€è¿°ï¼Œé‡å®šä½è¡¨åˆ—å‡ºäº†æ‰€æœ‰éœ€è¦åœ¨è¿æ¥æ—¶æˆ–è¿è¡Œæ—¶è¢«â€œå¤„ç†â€æˆ–â€œä¿®å¤â€çš„ä»£ç ä½ç½®ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¸çŸ¥é“æ‰€æœ‰å¤–éƒ¨å¼•ç”¨çš„ç¡®åˆ‡å†…å­˜åœ°å€ã€‚</li>
<li>ç¬¦å·è¡¨ (symbol
table)ï¼šæ­¤è¡¨åŒ…å«æ–‡ä»¶ä¸­å®šä¹‰å’Œå¼•ç”¨çš„æ‰€æœ‰ç¬¦å·ï¼ˆä¾‹å¦‚å‡½æ•°åå’Œå˜é‡åï¼‰çš„åˆ—è¡¨ã€‚å®ƒå¸®åŠ©é“¾æ¥å™¨è§£æå¤–éƒ¨å’Œå†…éƒ¨ç¬¦å·å¼•ç”¨ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„é“¾æ¥ã€‚</li>
<li>è°ƒè¯•ä¿¡æ¯ (debugging
information)ï¼šå¯¹äºé‚£äº›ç¼–è¯‘æ—¶å¸¦æœ‰è°ƒè¯•ä¿¡æ¯çš„æ–‡ä»¶ï¼Œè¿™éƒ¨åˆ†åŒ…å«äº†æºä»£ç çº§åˆ«çš„ä¿¡æ¯ï¼Œå¦‚å˜é‡åã€è¡Œå·ç­‰ã€‚è¿™ä½¿å¾—è°ƒè¯•å·¥å…·ï¼ˆå¦‚
gdbï¼‰å¯ä»¥åœ¨è¿è¡Œæ—¶æ˜ å°„æœºå™¨ä»£ç å›åˆ°å…¶åŸå§‹çš„æºä»£ç ä½ç½®ã€‚</li>
<li><a
target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2023/pdf/22918222/1698912220821-c1ba5ab6-6c27-41b3-b951-1b0486ecafbe.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22918222%2F1698912220821-c1ba5ab6-6c27-41b3-b951-1b0486ecafbe.pdf%22%2C%22name%22%3A%22ELF_Format.pdf%22%2C%22size%22%3A152347%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u19c8bb18-bc03-42de-ae26-29a20f2ad29%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22ue7897fdb%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">ELF_Format.pdf</a></li>
</ul></li>
</ul></li>
</ul>
<h2 id="linker">Linker</h2>
<ul>
<li>æŠŠå¤šä¸ªæ±‡ç¼–äº§ç”Ÿçš„äºŒè¿›åˆ¶æ–‡ä»¶ç»„åˆåˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶é‡Œ
<ul>
<li>å¤šä¸ªæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼ŸæŸä¸ªéƒ¨åˆ†æ”¹å˜äº†ï¼Œé‚£æˆ‘ä»¬ä¸éœ€è¦é‡æ–°ç¼–è¯‘æ•´ä¸ªå·¥ç¨‹</li>
<li>Link
Editorçš„æ—§åå«Linkï¼Œå› ä¸ºå®ƒè¿‡å»å¤§éƒ¨åˆ†çš„ä»»åŠ¡å°±æ˜¯å¤„ç†è·³è½¬å¸¦æ¥çš„å¼•ç”¨è¢«æ­£ç¡®çš„è§£æä¸ºå†…å­˜åœ°å€ï¼Œä»¥åŠå¡«å……æ‰€æœ‰ç»å¯¹åœ°å€</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698913540288-a72856d1-7fcc-4e54-8888-f7613b1d1abf.png#averageHue=%23f7f2f2&amp;clientId=u9d81647c-e583-4&amp;from=paste&amp;height=370&amp;id=u1c90ffa1&amp;originHeight=740&amp;originWidth=1072&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=92379&amp;status=done&amp;style=none&amp;taskId=u8bb0c39b-5acd-4cf1-bd73-5b88c02ef25&amp;title=&amp;width=536" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æœ‰ä¸‰ç§ä¸åŒçš„åœ°å€ï¼ˆAdressï¼‰</li>
</ul>
<ol type="1">
<li><strong>PC-Relative Addressing (beq, bne, jal)</strong></li>
</ol>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ç›¸å…³çš„åœ°å€æ–¹å¼ã€‚è¿™æ„å‘³ç€è·³è½¬çš„ç›®æ ‡åœ°å€æ˜¯åŸºäºå½“å‰æŒ‡ä»¤çš„åœ°å€åŠ ä¸Šæˆ–å‡å»ä¸€ä¸ªåç§»é‡æ¥ç¡®å®šçš„ã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå¸¸ç”¨äºæ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ï¼Œå¦‚<code>beq</code>ï¼ˆç­‰äºåˆ™è·³è½¬ï¼‰å’Œ<code>bne</code>ï¼ˆä¸ç­‰äºåˆ™è·³è½¬ï¼‰ï¼Œä»¥åŠæ— æ¡ä»¶è·³è½¬<code>jal</code>ã€‚</li>
<li><strong>è¡¥å……</strong>ï¼šè¿™ç§åœ°å€æ–¹å¼ä¸ä¼šé‡æ–°å®šä½ã€‚è¿™æ˜¯å› ä¸ºå®ƒä»¬çš„ç›®æ ‡åœ°å€æ˜¯åŠ¨æ€è®¡ç®—çš„ï¼Œä¸éœ€è¦é¢„å…ˆçŸ¥é“ç»å¯¹åœ°å€ã€‚</li>
</ul>
<ol start="2" type="1">
<li><strong>External Function Reference (usually jal)</strong></li>
</ol>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šç”¨äºå¼•ç”¨å¤–éƒ¨å‡½æ•°ã€‚è¿™äº›å‡½æ•°çš„ç¡®åˆ‡åœ°å€ç›´åˆ°é“¾æ¥æ—¶æ‰èƒ½ç¡®å®šã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šåœ¨è°ƒç”¨åº“å‡½æ•°æˆ–å…¶ä»–æ¨¡å—ä¸­çš„å‡½æ•°æ—¶ç»å¸¸ä½¿ç”¨ã€‚</li>
<li><strong>è¡¥å……</strong>ï¼šè¿™ç§å¼•ç”¨åœ¨é“¾æ¥æ—¶æ€»æ˜¯éœ€è¦é‡æ–°å®šä½ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æ—¶ä¸çŸ¥é“å‡½æ•°çš„ç¡®åˆ‡åœ°å€ã€‚</li>
</ul>
<ol start="3" type="1">
<li><strong>Static Data Reference (often auipc and addi)</strong></li>
</ol>
<ul>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼šç”¨äºå¼•ç”¨é™æ€æ•°æ®ï¼Œå¦‚å…¨å±€å˜é‡æˆ–å¸¸é‡ã€‚</p></li>
<li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå½“ç¨‹åºéœ€è¦è®¿é—®é™æ€æ•°æ®æ—¶ä½¿ç”¨ã€‚</p></li>
<li><p><strong>è¡¥å……</strong>ï¼šåœ¨RISC-Vä¸­ï¼Œé€šå¸¸ä½¿ç”¨<code>auipc</code>ï¼ˆå°†PCå€¼ä¸ä¸€ä¸ª20ä½çš„ç«‹å³æ•°ç›¸åŠ å¹¶å­˜å‚¨ç»“æœï¼‰å’Œ<code>addi</code>ï¼ˆå°†å¯„å­˜å™¨å€¼ä¸ä¸€ä¸ª12ä½çš„ç«‹å³æ•°ç›¸åŠ ï¼‰æŒ‡ä»¤ç»„åˆæ¥æ„é€ å®Œæ•´çš„32ä½åœ°å€ã€‚ä¸ä½¿ç”¨<code>lui</code>ï¼ˆåŠ è½½ä¸Šä½ç«‹å³æ•°åˆ°å¯„å­˜å™¨ï¼‰ä¸åŒï¼Œä½¿ç”¨<code>auipc</code>å¯ä»¥ç¡®ä¿å¤§å—æ•°æ®å¯ä»¥åœ¨é“¾æ¥æ—¶é‡æ–°å®šä½ï¼Œåªè¦å®ƒç›¸å¯¹äºPCæ˜¯å›ºå®šçš„ã€‚</p></li>
<li><p>è§£å†³é‡å¼•ç”¨é—®é¢˜</p>
<ul>
<li>Linkerå‡è®¾å¯æ‰§è¡Œæ–‡ä»¶çš„ç¬¬ä¸€ä¸ª<code>word</code>ä»¥åŠç¬¬ä¸€ä¸ª<code>text</code>æ®µçš„å¯å§‹åœ°å€ä¸º0x10000
(é’ˆå¯¹RISC-Vï¼‰
<ul>
<li>LinkerçŸ¥é“<code>text</code>æ®µä»¥åŠ<code>word</code>é¡ºåºåŠå…¶å„è‡ªçš„å¤§å°</li>
<li>Linkerå¯ä»¥æ ¹æ®è¿™äº›è®¡ç®—å‡ºæ¯ä¸€ä¸ª<code>label</code>ä»¥åŠæ¯ä¸€å—<code>data</code>çš„ç»å¯¹åœ°å€
<ul>
<li>åœ¨ç¬¦å·è¡¨å†…å¯»æ‰¾ç¬¦å·ï¼Œæ‰¾ä¸åˆ°å°±å»<code>library file</code></li>
<li>ç»å¯¹åœ°å€åªè¦è¢«ç¡®å®šï¼Œé‚£ä¹ˆå°±è½¬æ¢ä¸ºæœºå™¨ä»£ç </li>
<li>è¾“å‡ºåŒ…å«<code>text</code>å’Œ<code>data</code>ä»¥åŠ<code>header</code>çš„å¯æ‰§è¡Œæ–‡ä»¶</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<h2 id="loader">Loader</h2>
<ul>
<li>æ¥å—å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œ
<ul>
<li>ä»ç¡¬ç›˜ä¸­è¯»å–å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åè¿è¡Œ</li>
<li>è¿™æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„åŠŸèƒ½</li>
</ul></li>
<li>å¤§è‡´æœ‰6æ­¥
<ul>
<li><strong>æ–‡ä»¶è¯»å–</strong>ï¼šåŠ è½½å™¨é¦–å…ˆè¯»å–å¯æ‰§è¡Œæ–‡ä»¶çš„å¤´éƒ¨ï¼Œä»¥ç¡®å®šæ–‡æœ¬å’Œæ•°æ®æ®µçš„å¤§å°ã€‚</li>
<li><strong>åœ°å€ç©ºé—´çš„åˆ›å»º</strong>ï¼šä¸ºåŒ…å«æ–‡æœ¬å’Œæ•°æ®æ®µçš„ç¨‹åºåˆ›å»ºæ–°çš„åœ°å€ç©ºé—´ï¼Œæ­¤ç©ºé—´è¿˜åŒ…å«ä¸€ä¸ªå †æ ˆæ®µã€‚</li>
<li><strong>æŒ‡ä»¤ä¸æ•°æ®çš„å¤åˆ¶</strong>ï¼šå°†æ¥è‡ªå¯æ‰§è¡Œæ–‡ä»¶çš„æŒ‡ä»¤å’Œæ•°æ®å¤åˆ¶åˆ°æ–°åˆ›å»ºçš„åœ°å€ç©ºé—´ä¸­ã€‚</li>
<li><strong>å‚æ•°å¤åˆ¶</strong>ï¼šå°†ä¼ é€’ç»™ç¨‹åºçš„å‚æ•°å¤åˆ¶åˆ°å †æ ˆä¸Šã€‚</li>
<li><strong>æœºå™¨å¯„å­˜å™¨çš„åˆå§‹åŒ–</strong>ï¼š
<ul>
<li>æ¸…é™¤å¤§å¤šæ•°å¯„å­˜å™¨ã€‚</li>
<li>åˆå§‹åŒ–å †æ ˆæŒ‡é’ˆï¼Œä½¿å…¶æŒ‡å‘å †æ ˆçš„ç¬¬ä¸€ä¸ªå¯ç”¨ä½ç½®ã€‚</li>
</ul></li>
<li><strong>å¯åŠ¨ç¨‹åº</strong>ï¼š
<ul>
<li>è·³è½¬åˆ°å¯åŠ¨ä¾‹ç¨‹ï¼Œè¯¥ä¾‹ç¨‹ä»å †æ ˆå¤åˆ¶ç¨‹åºçš„å‚æ•°åˆ°å¯„å­˜å™¨ï¼Œå¹¶è®¾ç½®ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ã€‚</li>
<li>å¦‚æœä¸»ç¨‹åºè¿”å›ï¼Œå¯åŠ¨ä¾‹ç¨‹å°†ä½¿ç”¨é€€å‡ºç³»ç»Ÿè°ƒç”¨æ¥ç»ˆæ­¢ç¨‹åºã€‚</li>
</ul></li>
</ul></li>
<li>Example</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698920541766-702d6ca3-7aaa-4263-a3ad-805b68920eb1.png#averageHue=%23f8f7f6&amp;clientId=u57717f54-4720-4&amp;from=paste&amp;height=350&amp;id=ub1f9f805&amp;originHeight=700&amp;originWidth=1186&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=496702&amp;status=done&amp;style=none&amp;taskId=ud70553cf-2720-4017-ae8e-7777cf294d0&amp;title=&amp;width=593" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>Auipcæ¶ˆå¤±äº†
<ul>
<li>å®é™…ä¸Šæ˜¯è¢«ä¼˜åŒ–ä¸ºäº†ç«‹å³æ•°å¯»å€</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698920766229-63dcbb82-5a0e-4cd4-bfe2-b0881f4065c5.png#averageHue=%23f7f6f5&amp;clientId=u57717f54-4720-4&amp;from=paste&amp;height=752&amp;id=u404e7d3c&amp;originHeight=1504&amp;originWidth=1142&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=700372&amp;status=done&amp;style=none&amp;taskId=uefb4ac3a-4047-4cb5-ad94-cd9768f5e85&amp;title=&amp;width=571" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h1 id="lecture-10-combinational-logic">Lecture 10 Combinational
Logic</h1>
<p><a
target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2023/pdf/22918222/1698920964742-d9ac9225-2738-4c1d-b9b2-83b6abd9729e.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22918222%2F1698920964742-d9ac9225-2738-4c1d-b9b2-83b6abd9729e.pdf%22%2C%22name%22%3A%22lec10.pdf%22%2C%22size%22%3A8535908%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22ub71ff804-0638-40a4-b174-0f77b69acaa%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22u7bfa9027%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">lec10.pdf</a></p>
<ul>
<li>CMOS
ä¸€ç§åŠå¯¼ä½“æŠ€æœ¯ï¼Œå¯ä»¥åˆ¶ä½œä¸é—¨ï¼Œéé—¨ï¼Œæˆ–é—¨ï¼Œå¯„å­˜å™¨æˆ–è€…æ›´é«˜çº§çš„é€»è¾‘ç”µè·¯åœ¨
CMOSï¼ˆäº’è¡¥é‡‘å±æ°§åŒ–ç‰©åŠå¯¼ä½“ï¼‰æŠ€æœ¯ä¸­ï¼ŒNé€šé“å’ŒPé€šé“æŒ‡çš„æ˜¯ä¸¤ç§ä¸åŒç±»å‹çš„MOSFETï¼ˆé‡‘å±æ°§åŒ–ç‰©åŠå¯¼ä½“åœºæ•ˆåº”æ™¶ä½“ç®¡ï¼‰ã€‚</li>
</ul>
<ol type="1">
<li><strong>Né€šé“ MOSFET</strong>ï¼š</li>
</ol>
<ul>
<li>è¿™ç§ç±»å‹çš„æ™¶ä½“ç®¡ä½¿ç”¨å¤šæ•°è½½æµå­ï¼ˆç”µå­ï¼‰æ¥è¿›è¡Œå¯¼ç”µã€‚</li>
<li>å®ƒæ˜¯ç”±å¯Œå«ç”µå­çš„Nå‹åŠå¯¼ä½“ææ–™æ„æˆã€‚</li>
<li>åœ¨Né€šé“MOSFETä¸­ï¼Œå½“åœ¨æ …æå’Œæºæä¹‹é—´æ–½åŠ æ­£å‘ç”µå‹æ—¶ï¼Œç”µå­ä¼šè¢«å¸å¼•åˆ°æ …æä¸‹æ–¹å½¢æˆçš„â€œé€šé“â€åŒºåŸŸï¼Œä»è€Œå…è®¸ç”µæµä»æºææµå‘æ¼æã€‚</li>
<li>Né€šé“æ™¶ä½“ç®¡çš„<strong>å¼€å¯ç”µå‹é€šå¸¸æ˜¯æ­£å€¼</strong>ï¼Œè€Œä¸”å®ƒä»¬æ¯”Pé€šé“MOSFETå…·æœ‰æ›´é«˜çš„ç”µå­è¿ç§»ç‡ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥åœ¨ç›¸åŒçš„å°ºå¯¸ä¸‹æä¾›æ›´é«˜çš„ç”µæµå’Œé€Ÿåº¦ã€‚</li>
</ul>
<ol start="2" type="1">
<li><strong>Pé€šé“ MOSFET</strong>ï¼š</li>
</ol>
<ul>
<li>è¿™ç§ç±»å‹çš„æ™¶ä½“ç®¡ä½¿ç”¨å°‘æ•°è½½æµå­ï¼ˆç©ºç©´ï¼‰æ¥è¿›è¡Œå¯¼ç”µã€‚</li>
<li>å®ƒæ˜¯ç”±å¯Œå«ç©ºç©´çš„På‹åŠå¯¼ä½“ææ–™æ„æˆã€‚</li>
<li>åœ¨Pé€šé“MOSFETä¸­ï¼Œå½“åœ¨æ …æå’Œæºæä¹‹é—´æ–½åŠ è´Ÿå‘ç”µå‹æ—¶ï¼Œç©ºç©´ä¼šè¢«æ¨åŠ¨åˆ°æ …æä¸‹æ–¹å½¢æˆçš„â€œé€šé“â€åŒºåŸŸï¼Œå…è®¸ç”µæµä»æºææµå‘æ¼æã€‚</li>
<li>Pé€šé“æ™¶ä½“ç®¡çš„<strong>å¼€å¯ç”µå‹é€šå¸¸æ˜¯è´Ÿå€¼</strong>ï¼Œå®ƒä»¬çš„ç”µå­è¿ç§»ç‡ä½äºNé€šé“MOSFETï¼Œå› æ­¤åœ¨ç›¸åŒçš„å°ºå¯¸ä¸‹å…¶å¯¼ç”µèƒ½åŠ›ç¨å¼±ã€‚</li>
</ul>
<p>åœ¨ CMOS ç”µè·¯ä¸­ï¼ŒNé€šé“å’ŒPé€šé“ MOSFET
é€šå¸¸æ˜¯æˆå¯¹ä½¿ç”¨çš„ã€‚è¿™ç§äº’è¡¥é…ç½®å…è®¸ç”µè·¯åœ¨å¼€å…³çŠ¶æ€åˆ‡æ¢æ—¶æ¶ˆè€—éå¸¸å°‘çš„åŠŸç‡ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªæ™¶ä½“ç®¡åœ¨å¯¼é€šï¼Œè€Œå¦ä¸€ä¸ªåˆ™æ˜¯æˆªæ­¢çš„ã€‚è¿™ç§è®¾è®¡ä¹Ÿå…è®¸ç”µè·¯åœ¨ä¸åŒçš„è¾“å…¥ç”µå‹æ°´å¹³ä¸‹æœ‰æ•ˆå·¥ä½œï¼ŒåŒæ—¶ä¿æŒä½åŠŸè€—å’Œé«˜é€Ÿåº¦çš„ç‰¹æ€§ã€‚</p>
<ul>
<li>éé—¨çš„å®ç°</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/jpeg/22918222/1699163119731-e3a4cbff-52d8-41ee-8696-ab0d89f30858.jpeg#averageHue=%23f8f6f5&amp;clientId=u33a69565-ba28-4&amp;from=drop&amp;id=u15d3aee2&amp;originHeight=600&amp;originWidth=974&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=173006&amp;status=done&amp;style=none&amp;taskId=u1ca22217-33b2-4ade-bb17-eb8937cfe4b&amp;title=" srcset="/img/loading.gif" lazyload
alt="å¿«æ·é”®.jpeg" />
<figcaption aria-hidden="true">å¿«æ·é”®.jpeg</figcaption>
</figure>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/jpeg/22918222/1699163217132-5c9f2d07-1ee7-4bc8-aaa8-86172dfbbbb4.jpeg#averageHue=%23f7f5f5&amp;clientId=u33a69565-ba28-4&amp;from=drop&amp;id=uc93db546&amp;originHeight=555&amp;originWidth=965&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=174467&amp;status=done&amp;style=none&amp;taskId=u5769ef30-d7e4-4c8c-8584-a94806b6be2&amp;title=" srcset="/img/loading.gif" lazyload
alt="å¿«æ·é”® 2.jpeg" />
<figcaption aria-hidden="true">å¿«æ·é”® 2.jpeg</figcaption>
</figure>
<ul>
<li>NAND å¯ä»¥æ„é€ å‡ºANDï¼ŒORï¼ŒNOT</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/jpeg/22918222/1699163952108-d3afbb4d-f6d7-4757-84c3-120e2407897e.jpeg#averageHue=%23f5f5f5&amp;clientId=u33a69565-ba28-4&amp;from=drop&amp;id=u6424fa6f&amp;originHeight=907&amp;originWidth=1111&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=170287&amp;status=done&amp;style=none&amp;taskId=u76780bb4-0a44-43d8-98ab-b035181832e&amp;title=" srcset="/img/loading.gif" lazyload
alt="å¿«æ·é”®.jpeg" />
<figcaption aria-hidden="true">å¿«æ·é”®.jpeg</figcaption>
</figure>
<h2 id="combinational-logical-cl">Combinational Logical ï¼ˆCLï¼‰</h2>
<ul>
<li>ç»„åˆé€»è¾‘ç”µè·¯ï¼Œè¾“å‡ºä»…ä»…æ˜¯è¾“å…¥çš„å‡½æ•°ï¼Œä¸ä¾èµ–äºè¿‡å»çš„çŠ¶æ€</li>
<li>å¸¸è§çš„å…­ç§é—¨</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/jpeg/22918222/1699164504062-eb02f838-e52e-4cad-9f64-083e01e6b79e.jpeg#averageHue=%23eeeeee&amp;clientId=u33a69565-ba28-4&amp;from=drop&amp;id=u71d0c3c5&amp;originHeight=913&amp;originWidth=779&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=170098&amp;status=done&amp;style=none&amp;taskId=u334cedb6-bdc1-4493-9ec8-d101d6c6a9a&amp;title=" srcset="/img/loading.gif" lazyload
alt="å¿«æ·é”®.jpeg" />
<figcaption aria-hidden="true">å¿«æ·é”®.jpeg</figcaption>
</figure>
<ul>
<li>æˆ‘ä»¬æœ‰å››ç§æ–¹æ³•è¡¨ç¤ºé€»è¾‘ç”µè·¯</li>
</ul>
<ol type="1">
<li><strong>æ–‡æœ¬æè¿°ï¼ˆText
Descriptionï¼‰</strong>ï¼šç”¨æ–‡å­—æè¿°ç”µè·¯çš„åŠŸèƒ½ï¼Œä¾‹å¦‚â€œå½“è¾“å…¥Aå’ŒBéƒ½ä¸º1æ—¶ï¼Œè¾“å‡ºä¸º0â€ã€‚</li>
<li><strong>ç”µè·¯å›¾ï¼ˆCircuit
Diagramï¼‰</strong>ï¼šé€šè¿‡å›¾å½¢è¡¨ç¤ºæ³•æ˜¾ç¤ºå¦‚ä½•ç”¨æ™¶ä½“ç®¡å’Œå¯¼çº¿ï¼ˆæˆ–é€»è¾‘é—¨ï¼‰æ¥å®ç°ç”µè·¯åŠŸèƒ½ã€‚</li>
<li><strong>çœŸå€¼è¡¨ï¼ˆTruth
Tableï¼‰</strong>ï¼šä¸€ä¸ªè¡¨æ ¼ï¼Œåˆ—å‡ºäº†è¾“å…¥å˜é‡çš„æ‰€æœ‰å¯èƒ½ç»„åˆåŠå…¶ç›¸åº”çš„è¾“å‡ºç»“æœã€‚</li>
<li><strong>å¸ƒå°”è¡¨è¾¾å¼ï¼ˆBoolean
Expressionï¼‰</strong>ï¼šä½¿ç”¨å¸ƒå°”ä»£æ•°ï¼ˆä¾‹å¦‚ANDã€ORã€NOTè¿ç®—ç¬¦ï¼‰æè¿°ç”µè·¯åŠŸèƒ½çš„æ•°å­¦è¡¨è¾¾å¼ã€‚</li>
</ol>
<ul>
<li>æˆ‘ä»¬åœ¨é¢å¯¹è¾ƒå¤šçš„è¾“å…¥ä¿¡å·æ—¶ï¼ŒçœŸå€¼è¡¨ä¼šéå¸¸é•¿ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€å®šç¨‹åº¦çš„ç®€åŒ–ï¼Œä¾‹å¦‚è€ƒè™‘:<span
class="math inline">\((A,B,C,D) \to F \ \to X \ |\ Y\ |\ Z\)</span>
æˆ‘ä»¬å¯ä»¥åˆ†åˆ«ç»˜åˆ¶æ¯ä¸€ä¸ªè¾“å‡ºé’ˆå¯¹è¾“å…¥çš„çœŸå€¼è¡¨</li>
</ul>
<h2 id="boolean-algebra">Boolean Algebra</h2>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699165138671-e7d38cda-e6aa-484d-92f9-372548d2be5b.png#averageHue=%23f4f4f4&amp;clientId=u33a69565-ba28-4&amp;from=paste&amp;height=313&amp;id=ud18ab6cc&amp;originHeight=626&amp;originWidth=1496&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=215508&amp;status=done&amp;style=none&amp;taskId=u93b0914a-d8c1-457c-880e-364f1987070&amp;title=&amp;width=748" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å¸ƒå°”ä»£æ•°çš„å­˜åœ¨å…è®¸æˆ‘ä»¬ç®€åŒ–ç”µè·¯çš„è®¾è®¡
<ul>
<li>é¦–å…ˆå†™å‡ºçœŸå€¼è¡¨</li>
<li>ç„¶åè½¬æ¢ä¸ºå¸ƒå°”ä»£æ•°</li>
<li>åŒ–ç®€</li>
<li>è®¾è®¡ç”µè·¯</li>
<li>æœ‰å¿…è¦çš„è¯çœ‹ä¸€ä¸‹lec10æœ€ç»ˆçš„ä¼˜åŒ–æ–¹æ¡ˆ</li>
</ul></li>
</ul>
<h2 id="sequential-logic-sl">Sequential Logic ï¼ˆSLï¼‰</h2>
<ul>
<li>é¡ºåºé€»è¾‘ç”µè·¯ï¼Œå®ƒä»¬çš„è¾“å‡ºä¸ä»…å–å†³äºå½“å‰çš„è¾“å…¥ï¼Œè¿˜å–å†³äºè¿‡å»çš„è¾“å…¥æˆ–çŠ¶æ€ã€‚</li>
</ul>
<ol type="1">
<li><strong>è§¦å‘å™¨ï¼ˆFlip-Flopsï¼‰</strong>ï¼šåŸºæœ¬çš„å­˜å‚¨å•å…ƒï¼Œèƒ½å¤Ÿå­˜å‚¨å•ä¸ªä½ï¼ˆ0æˆ–1ï¼‰ã€‚è§¦å‘å™¨çš„ç±»å‹æœ‰å¤šç§ï¼ŒåŒ…æ‹¬Dè§¦å‘å™¨ã€JKè§¦å‘å™¨ã€Tè§¦å‘å™¨ç­‰ï¼Œå®ƒä»¬åœ¨æ—¶é’Ÿä¿¡å·çš„æ§åˆ¶ä¸‹æ”¹å˜å’Œä¿æŒçŠ¶æ€ã€‚</li>
<li><strong>å¯„å­˜å™¨ï¼ˆRegistersï¼‰</strong>ï¼šå¯„å­˜å™¨æ˜¯ç”±å¤šä¸ªè§¦å‘å™¨ç»„æˆçš„ï¼Œç”¨äºå­˜å‚¨ä¸€ä¸ªå¤šä½çš„å­—ã€‚å¯„å­˜å™¨å¯ä»¥æŒ‰å­—ã€å­—èŠ‚æˆ–å…¶ä»–æ•°æ®å®½åº¦æ¥å­˜å‚¨ä¿¡æ¯ï¼Œå¹¶ä¸”é€šå¸¸åœ¨æ—¶é’Ÿè¾¹æ²¿åŒæ­¥æ›´æ–°å®ƒä»¬çš„çŠ¶æ€ã€‚</li>
<li><strong>è®¡æ•°å™¨ï¼ˆCountersï¼‰</strong>ï¼šä¸€ç§ç‰¹æ®Šç±»å‹çš„å¯„å­˜å™¨ï¼Œç”¨äºé¡ºåºè®¡æ•°ã€‚è®¡æ•°å™¨å¯ä»¥æ˜¯äºŒè¿›åˆ¶çš„ã€åè¿›åˆ¶çš„æˆ–è€…æ˜¯å…¶ä»–æ›´å¤æ‚çš„è®¡æ•°æ ¼å¼ï¼Œé€šå¸¸ç”¨äºè®¡æ—¶ã€è®¡æ•°å’ŒçŠ¶æ€æœºä¸­çš„çŠ¶æ€è½¬æ¢ã€‚</li>
<li><strong>å­˜å‚¨å™¨ï¼ˆMemoryï¼‰</strong>ï¼šå­˜å‚¨å™¨ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ç”±è®¸å¤šå¯„å­˜å™¨ç»„æˆï¼Œç”¨äºå­˜å‚¨å¤§é‡æ•°æ®ã€‚åœ¨æ›´é«˜çš„å±‚é¢ä¸Šï¼Œå­˜å‚¨å™¨å¯ä»¥æ˜¯éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆRAMï¼‰ã€åªè¯»å­˜å‚¨å™¨ï¼ˆROMï¼‰æˆ–å…¶ä»–ç±»å‹çš„å­˜å‚¨å™¨ã€‚</li>
<li><strong>çŠ¶æ€æœºï¼ˆState
Machinesï¼‰</strong>ï¼šçŠ¶æ€æœºç”¨äºæ§åˆ¶ç”µè·¯çš„è¡Œä¸ºï¼Œå¯ä»¥æ˜¯æœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰ï¼ŒåŒ…æ‹¬Mooreå‹å’ŒMealyå‹ã€‚çŠ¶æ€æœºæ ¹æ®è¾“å…¥å’Œå½“å‰çŠ¶æ€å†³å®šè¾“å‡ºä»¥åŠä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚</li>
</ol>
<h1 id="lecture-11-sequential-digital-logic">Lecture 11 Sequential
Digital Logic</h1>
<p><a
target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2023/pdf/22918222/1699352802656-83cc70fa-bbdf-4118-8bcc-0527882f0e01.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22918222%2F1699352802656-83cc70fa-bbdf-4118-8bcc-0527882f0e01.pdf%22%2C%22name%22%3A%22lec11.pdf%22%2C%22size%22%3A3869042%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u2b7aa1b9-ad28-4a17-bb3b-d71161cbb40%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22u730b3dc8%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">lec11.pdf</a>
## Multiplexer <img
src="https://cdn.nlark.com/yuque/0/2023/jpeg/22918222/1699169473283-2e29fde4-dab0-4a45-8c1f-28dafe045858.jpeg#averageHue=%23f8f8f8&amp;clientId=u33a69565-ba28-4&amp;from=drop&amp;height=250&amp;id=u80661a2b&amp;originHeight=500&amp;originWidth=733&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=39360&amp;status=done&amp;style=none&amp;taskId=u03e38df4-d094-4994-b244-ef3ed70793d&amp;title=&amp;width=367" srcset="/img/loading.gif" lazyload
alt="å¿«æ·é”® 2.jpeg" /></p>
<ul>
<li>å¤šè·¯å¤ç”¨å™¨ï¼Œå®ç°å¯¹Nä½ï¼ˆé€šå¸¸æ˜¯å›ºå®šçš„ï¼‰ä¿¡å·çš„é€‰æ‹©è¾“å‡º</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699169660399-b68597c9-73ee-4e3f-9fed-a0a3b708218a.png#averageHue=%23f3f2f2&amp;clientId=u33a69565-ba28-4&amp;from=paste&amp;height=234&amp;id=t5qID&amp;originHeight=936&amp;originWidth=1798&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=270096&amp;status=done&amp;style=none&amp;taskId=u4127b47f-9068-4d84-ad9e-b294f7f7751&amp;title=&amp;width=450" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="sequential-logical-timing">Sequential Logical Timing</h2>
<ul>
<li>ç´¯åŠ å™¨
<ul>
<li>å¯„å­˜å™¨ç»“åˆRSTæ§åˆ¶ä½å¯ä»¥å°†è¿›è¡Œè®¡ç®—ä¹‹å‰çš„åƒåœ¾ä¿¡å·æ¸…ç©ºä¸ºé›¶</li>
<li>å¯„å­˜å™¨ç»“åˆæ—¶é’Ÿä¿¡å·å¯ä»¥æ§åˆ¶ç´¯åŠ çš„å®Œæˆ</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/jpeg/22918222/1699170971720-20225754-f564-4f3b-8d62-d19d6bcb4da3.jpeg#averageHue=%23f8f8f8&amp;clientId=u33a69565-ba28-4&amp;from=drop&amp;height=164&amp;id=u3d0abfd7&amp;originHeight=655&amp;originWidth=1326&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=83757&amp;status=done&amp;style=none&amp;taskId=u28aca7e3-fe0a-4821-be70-193a569a8df&amp;title=&amp;width=332" srcset="/img/loading.gif" lazyload
alt="å¿«æ·é”®.jpeg" />
<figcaption aria-hidden="true">å¿«æ·é”®.jpeg</figcaption>
</figure>
<ul>
<li>å¯„å­˜å™¨</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699171178507-f0c447f4-5413-47df-a0f4-a09fb12f6da9.png#averageHue=%23f6f5f5&amp;clientId=u33a69565-ba28-4&amp;from=paste&amp;height=270&amp;id=uf50c6e42&amp;originHeight=1078&amp;originWidth=1976&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=174510&amp;status=done&amp;style=none&amp;taskId=u20383bc3-c199-4fdd-a24e-ee42170da1b&amp;title=&amp;width=494" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><strong>æ•°æ®è¾“å…¥</strong>ï¼šå¯„å­˜å™¨å¯ä»¥æ¥æ”¶ä¸åŒä½å®½çš„æ•°æ®è¾“å…¥ã€‚ä½å®½æ˜¯æŒ‡å¯ä»¥ä¼ è¾“çš„æ•°æ®çš„ä½æ•°ã€‚</li>
<li><strong>å†™ä½¿èƒ½ï¼ˆWrite
Enableï¼‰</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªæ§åˆ¶ä¿¡å·ï¼Œå½“æ¿€æ´»æ—¶å…è®¸æ•°æ®è¢«å†™å…¥å¯„å­˜å™¨ã€‚å¦‚æœæ²¡æœ‰å†™ä½¿èƒ½ä¿¡å·ï¼Œå¯„å­˜å™¨çš„å†…å®¹å°†ä¸ä¼šæ”¹å˜ã€‚</li>
<li><strong>æ—¶é’Ÿè¾“å…¥ï¼ˆClock
inputï¼‰</strong>ï¼šè¿™ä¸ªè¾“å…¥æ˜¯å¯„å­˜å™¨çš„ä¸€ä¸ªåŒæ­¥ä¿¡å·ï¼Œæ•°æ®çš„å†™å…¥åªä¼šåœ¨æ—¶é’Ÿä¿¡å·çš„æ¿€æ´»è¾¹ç¼˜ï¼ˆé€šå¸¸æ˜¯ä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿ï¼‰å‘ç”Ÿã€‚</li>
<li><strong>å¤ä½ï¼ˆResetï¼‰</strong>ï¼šå¤ä½ä¿¡å·ç”¨æ¥å°†å¯„å­˜å™¨çš„å†…å®¹è®¾ç½®ä¸ºé›¶ã€‚é€šå¸¸åœ¨ç³»ç»Ÿåˆå§‹åŒ–æˆ–ç‰¹å®šæ¡ä»¶ä¸‹éœ€è¦é‡ç½®å¯„å­˜å™¨æ—¶ä½¿ç”¨ã€‚</li>
<li><strong>æ•°æ®è¾“å‡º</strong>ï¼šå¯„å­˜å™¨å¯ä»¥æä¾›ä¸åŒä½å®½çš„æ•°æ®è¾“å‡ºï¼Œæ•°æ®è¾“å‡ºå°†æ˜¯å¯„å­˜å™¨å†…éƒ¨å­˜å‚¨çš„æ•°æ®ã€‚</li>
</ul>
<h2 id="clock">Clock</h2>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699172850480-827c102c-55ad-4d55-a37d-3b838d0d3120.png#averageHue=%23f4f1f1&amp;clientId=u33a69565-ba28-4&amp;from=paste&amp;height=539&amp;id=u24c6aadd&amp;originHeight=1078&amp;originWidth=1572&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=246049&amp;status=done&amp;style=none&amp;taskId=u9f512aea-29ae-4d39-9276-27b127e5f87&amp;title=&amp;width=786" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æ—¶é’Ÿä¿¡å·ï¼šæ•°å­—ç”µè·¯ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç‰¹åˆ«æ˜¯åœ¨åŒæ­¥ç”µè·¯è®¾è®¡ä¸­ï¼Œå®ƒå†³å®šäº†æ•°æ®ä½•æ—¶è¢«è¯»å–å’Œå†™å…¥ã€‚
<ul>
<li>æ—¶é’Ÿä¿¡å·å¾€å¾€åªå’Œé¡ºåºé€»è¾‘å…ƒç´ SLç›¸è”ï¼ŒCLæ ¹æ®ä¼ å…¥çš„ä¿¡å·å³ä½¿è®¡ç®—ï¼Œä¸ä¾èµ–äºè¿‡äºçš„çŠ¶æ€ã€‚</li>
</ul></li>
<li>æ—¶é’Ÿå‘¨æœŸï¼ˆClock
periodï¼‰ï¼šä¹Ÿç§°ä¸ºCPUå‘¨æœŸæ—¶é—´ï¼Œæ˜¯æ—¶é’Ÿä¿¡å·çš„ä¸€ä¸ªå®Œæ•´å‘¨æœŸæ‰€éœ€è¦çš„æ—¶é—´ã€‚è¿™é€šå¸¸ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç³»ç»Ÿçš„æ“ä½œé€Ÿåº¦ï¼ŒCPUçš„ä¸€ä¸ªæ“ä½œå‘¨æœŸå†…å¯ä»¥å®Œæˆä¸€ä¸ªåŸºæœ¬çš„æ“ä½œå‘½ä»¤ã€‚</li>
<li>ä¸Šå‡æ²¿å’Œä¸‹é™æ²¿ï¼ˆRising Edge and Falling
Edgeï¼‰ï¼šè¿™äº›æœ¯è¯­æè¿°çš„æ˜¯æ—¶é’Ÿæ³¢å½¢ä»ä½ç”µå¹³è·³å˜åˆ°é«˜ç”µå¹³ï¼ˆä¸Šå‡æ²¿ï¼‰å’Œä»é«˜ç”µå¹³è·³å˜åˆ°ä½ç”µå¹³ï¼ˆä¸‹é™æ²¿ï¼‰çš„ç¬é—´ã€‚åœ¨æ•°å­—ç”µè·¯ä¸­ï¼Œå¾ˆå¤šæ“ä½œå¦‚æ•°æ®çš„è¯»å–å’Œå­˜å‚¨å¸¸åœ¨ä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿è§¦å‘ã€‚</li>
<li>ä¿¡å·çš„ä¼ è¾“ï¼ˆSignal
transmissionï¼‰ï¼šæŒ‡ä¿¡å·æ˜¯å¦‚ä½•åœ¨ç”µçº¿ä¸­è¿ç»­ä¼ è¾“çš„ã€‚è¿™å¥è¯ä¸‹é¢çš„â€œTransmission
is effectively
instantaneousâ€æ„å‘³ç€ä¿¡å·çš„ä¼ æ’­é€Ÿåº¦éå¸¸å¿«ï¼Œä»¥è‡³äºå¯ä»¥è¢«è®¤ä¸ºæ˜¯ç¬æ—¶çš„ã€‚</li>
<li>çº¿ä¸Šçš„ä¿¡å·å€¼ï¼ˆWire signal valueï¼‰ï¼šè¿™é‡Œæåˆ°çš„â€œany wire only contains
one value at any given
timeâ€æ„å‘³ç€åœ¨ä»»ä½•ç‰¹å®šçš„æ—¶é—´ç‚¹ï¼Œä¸€ä¸ªå¯¼çº¿ä¸Šåªæœ‰ä¸€ä¸ªç”µå‹å€¼ï¼Œè¿™å¯ä»¥æ˜¯é€»è¾‘é«˜ï¼ˆ1ï¼‰æˆ–é€»è¾‘ä½ï¼ˆ0ï¼‰ã€‚</li>
<li>å…¬å¼ <span class="math inline">\(T =
\frac{1}{f{\text{req}}}\)</span><em>ï¼šè¿™æ˜¯è®¡ç®—æ—¶é’Ÿå‘¨æœŸçš„å…¬å¼ï¼Œå…¶ä¸­</em><span
class="math inline">\(T\)</span><em>æ˜¯æ—¶é’Ÿå‘¨æœŸæ—¶é—´ï¼Œ</em><span
class="math inline">\(f{\text{req}}\)</span>æ˜¯é¢‘ç‡ã€‚å¦‚æœé¢‘ç‡æ˜¯å•ä½æ—¶é—´å†…çš„å‘¨æœŸæ•°ï¼Œé‚£ä¹ˆå‘¨æœŸæ—¶é—´å°±æ˜¯é¢‘ç‡çš„å€’æ•°ã€‚å³è¾¹çš„å¤§çº¦ç­‰äº1çº³ç§’ï¼ˆ1nsï¼‰è¡¨æ˜ï¼Œå¦‚æœæ—¶é’Ÿé¢‘ç‡æ˜¯1GHz<span
class="math inline">\((10^9)Hz\)</span>ï¼Œåˆ™ä¸€ä¸ªå‘¨æœŸå¤§çº¦ä¸º1çº³ç§’ã€‚</li>
</ul>
<h2 id="group">Group</h2>
<ul>
<li>æˆ‘ä»¬å¸¸è¯´å¤šå°‘ä½çš„å¯„å­˜å™¨ï¼Œå¤šå°‘ä½çš„cpuï¼Œè¿™æ¶‰åŠåˆ°ä¸€ä¸ªæ€»çº¿ï¼ˆbusï¼‰çš„æ¦‚å¿µ</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699173167234-a1a05b3d-29c0-4a16-927d-e78f6580ef12.png#averageHue=%23f9f9f9&amp;clientId=u33a69565-ba28-4&amp;from=paste&amp;height=506&amp;id=ub3a03a1b&amp;originHeight=1012&amp;originWidth=1878&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=332364&amp;status=done&amp;style=none&amp;taskId=uda4cb5ce-3b3d-4b90-9506-9b77c53c39e&amp;title=&amp;width=939" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æœ€é¡¶éƒ¨çš„æ³¢å½¢ä»£è¡¨æ—¶é’Ÿä¿¡å·<span
class="math inline">\(CLK\)</span>ï¼Œå®ƒç”¨æ¥åŒæ­¥æ•°æ®çš„ä¼ è¾“ã€‚</li>
<li>ä¸‹é¢çš„å››è¡Œåˆ†åˆ«ä»£è¡¨å››æ ¹å¯¼çº¿ï¼Œæ ‡è®°ä¸º <span class="math inline">\(X_3,
X_2, X_1, X_0\)</span>ã€‚è¿™äº›çº¿ä¸€èµ·ä¼ è¾“ä¸€ä¸ªå››ä½çš„äºŒè¿›åˆ¶æ•°å­—ï¼Œå³ä¸€ä¸ªbit
fieldã€‚ä¸åŒæ—¶é—´ç‚¹ä¸Šï¼Œè¿™äº›çº¿ä¸Šçš„ç”µå¹³é«˜ä½ç»„åˆä»£è¡¨ä¸åŒçš„äºŒè¿›åˆ¶æ•°ã€‚</li>
<li><span class="math inline">\(X_3\)</span> ä¸ºæœ€é«˜ä½ï¼ˆMost Significant
Bit - MSBï¼‰ï¼Œ<span class="math inline">\(X_0\)</span> ä¸ºæœ€ä½ä½ï¼ˆLeast
Significant Bit - LSBï¼‰ã€‚</li>
<li>åº•éƒ¨çš„Xåˆ—æ˜¾ç¤ºäº†åœ¨ä¸åŒçš„æ—¶é—´ç‚¹ï¼Œè¿™å››æ ¹å¯¼çº¿ä¸Šçš„ä¿¡å·ç»„åˆæ‰€ä»£è¡¨çš„äºŒè¿›åˆ¶æ•°å¯¹åº”çš„åè¿›åˆ¶å€¼ã€‚ä¾‹å¦‚ï¼Œå½“
<span class="math inline">\(X_3X_2X_1X_0\)</span> ä¸º<span
class="math inline">\(0101\)</span>æ—¶ï¼Œå¯¹åº”çš„åè¿›åˆ¶å€¼ä¸º<span
class="math inline">\(5\)</span>ã€‚</li>
<li>å½“è¿™ç»„å¯¼çº¿è¢«ç”¨æ¥ä»£è¡¨ä¸€ä¸ªä½å­—æ®µæ—¶ï¼Œå®ƒä»¬å°±æ„æˆäº†ä¸€ä¸ªâ€œæ€»çº¿â€ï¼ˆbusï¼‰ã€‚æ€»çº¿æ˜¯ä¸€ç§é€šä¿¡ç³»ç»Ÿï¼Œå…è®¸å¤šä¸ªæ•°æ®å’Œä¿¡å·é€šè¿‡ä¸€ç»„å¯¼çº¿åŒæ—¶ä¼ è¾“ï¼Œè¿™åœ¨è®¡ç®—æœºç¡¬ä»¶ä¸­æ˜¯å¸¸è§çš„ä¸€ç§è®¾è®¡ã€‚</li>
<li>å›¾ä¸­è¿˜å±•ç¤ºäº†åœ†åœˆæ ‡è®°çš„â€œé‡‡æ ·ç‚¹â€ï¼Œè¿™é€šå¸¸è¡¨ç¤ºåœ¨æ—¶é’Ÿä¿¡å·çš„ç‰¹å®šé˜¶æ®µï¼ˆé€šå¸¸æ˜¯ä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿ï¼‰è¯»å–æ•°æ®çš„æ—¶åˆ»ã€‚åœ¨è¿™äº›é‡‡æ ·ç‚¹ä¸Šï¼Œ<span
class="math inline">\(X_3X_2X_1X_0\)</span>çš„ç»„åˆè¢«ç¡®å®šå¹¶ç”¨äºä¸‹ä¸€æ­¥çš„è®¡ç®—æˆ–å¤„ç†ã€‚</li>
</ul>
<h2 id="register">Register</h2>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699173658153-4249ea0e-33ca-4d3c-a717-46ef52d3d50f.png#averageHue=%23f4f3f3&amp;clientId=u33a69565-ba28-4&amp;from=paste&amp;height=554&amp;id=u68d8ae28&amp;originHeight=1108&amp;originWidth=1766&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=236758&amp;status=done&amp;style=none&amp;taskId=u0052b809-6e43-45d8-9e91-2efc2ed042c&amp;title=&amp;width=883" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å›¾ä¸­å±•ç¤ºäº†ä¸€ä¸ªå¯„å­˜å™¨çš„ç®€åŒ–ç¬¦å·å’Œå®ƒçš„å®é™…æ„æˆã€‚ä¸€ä¸ªå¯„å­˜å™¨ç”±å¤šä¸ªè§¦å‘å™¨ï¼ˆFlip-Flopï¼‰ç»„æˆï¼Œè¿™äº›è§¦å‘å™¨ä¸²è”åœ¨ä¸€èµ·ï¼Œæ¯ä¸ªè§¦å‘å™¨å­˜å‚¨ä¸€ä½ï¼ˆbitï¼‰çš„ä¿¡æ¯ã€‚</li>
<li>å¯„å­˜å™¨çš„è¾“å…¥ç«¯æ˜¯ Dï¼ˆData Inputï¼‰ï¼Œè¾“å‡ºç«¯æ˜¯ Qï¼Œå›¾ç¤ºå±•ç¤ºäº†ä¸€ä¸ª n
ä½çš„å¯„å­˜å™¨ï¼Œå…¶ä¸­ n è¡¨ç¤ºè§¦å‘å™¨çš„æ•°é‡ã€‚</li>
<li>å›¾ä¸­ç­‰å¼çš„å³ä¾§æ˜¯å¯„å­˜å™¨å†…éƒ¨çš„è¯¦ç»†è¡¨ç¤ºï¼Œæ˜¾ç¤ºäº† n
ä¸ªDå‹è§¦å‘å™¨ï¼ˆFlip-Flopï¼‰çš„é“¾ï¼Œæ ‡æœ‰ <span
class="math inline">\(d_{n-1}\)</span>_ åˆ° <em><span
class="math inline">\(d_0\)</span></em> å’Œ _<span
class="math inline">\(q_{n-1}\)</span> åˆ° <span
class="math inline">\(q_0\)</span>ã€‚è¿™è¡¨ç¤ºæ¯ä¸ªè§¦å‘å™¨åˆ†åˆ«æ¥æ”¶ä¸€ä½æ•°æ®è¾“å…¥ï¼Œå¹¶åœ¨æ—¶é’Ÿä¿¡å·ï¼ˆCLKï¼‰çš„æ§åˆ¶ä¸‹è¾“å‡ºä¸€ä½æ•°æ®ã€‚</li>
<li>Då‹è§¦å‘å™¨ï¼ˆD-type
Flip-Flopï¼‰æ˜¯ä¸€ç§åŸºç¡€çš„å­˜å‚¨è®¾å¤‡ï¼Œåœ¨æ­£è¾¹æ²¿æˆ–è´Ÿè¾¹æ²¿æ—¶é’Ÿè§¦å‘çš„æ—¶å€™ï¼Œä¼šæ ¹æ®Dè¾“å…¥æ›´æ–°å…¶è¾“å‡ºQã€‚
<ul>
<li>å®é™…ä¸Šï¼Œæ¯ä¸ªDå‹è§¦å‘å™¨æœ‰ä¸¤ä¸ªè¾“å‡ºï¼š<span
class="math inline">\(Q\)</span>å’Œ<span
class="math inline">\(\overline{Q}\)</span>ã€‚</li>
<li><span
class="math inline">\(Q\)</span>ï¼šè¿™æ˜¯ä¸»è¾“å‡ºç«¯ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºè§¦å‘å™¨å­˜å‚¨çš„å®é™…å€¼ã€‚</li>
<li><span
class="math inline">\(\overline{Q}\)</span>ï¼šè¿™æ˜¯Qè¾“å‡ºçš„åç›¸ï¼Œä¹Ÿå°±æ˜¯<span
class="math inline">\(Q\)</span>çš„é€»è¾‘éã€‚å¦‚æœ<span
class="math inline">\(Q\)</span>æ˜¯<span
class="math inline">\(1\)</span>ï¼Œé‚£ä¹ˆ<span
class="math inline">\(\overline{Q}\)</span>å°±æ˜¯<span
class="math inline">\(0\)</span>ï¼›å¦‚æœ<span
class="math inline">\(Q\)</span>æ˜¯<span
class="math inline">\(0\)</span>ï¼Œé‚£ä¹ˆ<span
class="math inline">\(\overline{Q}\)</span>å°±æ˜¯<span
class="math inline">\(1\)</span>ã€‚</li>
<li>åœ¨æŸäº›ç”µè·¯è®¾è®¡ä¸­ï¼Œå¯èƒ½åŒæ—¶éœ€è¦<span
class="math inline">\(Q\)</span>å’Œ<span
class="math inline">\(\overline{Q}\)</span>è¾“å‡ºã€‚ ### Edge-tiggered
D-type flip-flop <img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699174377406-3f269222-f466-4d96-9fb4-94c7a4e30b47.png#averageHue=%23f4f3f3&amp;clientId=u33a69565-ba28-4&amp;from=paste&amp;height=535&amp;id=u85a4b1dd&amp;originHeight=1070&amp;originWidth=1976&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=290392&amp;status=done&amp;style=none&amp;taskId=u1e459901-9c96-4e65-ab18-ba9cce3e4fb&amp;title=&amp;width=988" srcset="/img/loading.gif" lazyload
alt="image.png" /></li>
</ul></li>
</ul>
<ol type="1">
<li><strong>è¾¹æ²¿è§¦å‘Då‹è§¦å‘å™¨</strong>ï¼šè¿™é‡Œæåˆ°çš„Då‹è§¦å‘å™¨æ˜¯åœ¨æ—¶é’Ÿä¿¡å·çš„<strong>ä¸Šå‡æ²¿</strong>è§¦å‘çš„ï¼Œæ„å‘³ç€æ•°æ®çš„<strong>æ•è·å’Œä¼ é€’</strong>æ˜¯åœ¨æ—¶é’Ÿä¿¡å·ä»<strong>ä½ç”µå¹³è·³å˜åˆ°é«˜ç”µå¹³</strong>çš„ç¬é—´å‘ç”Ÿçš„ã€‚</li>
<li><strong>ä¸Šå‡æ²¿é‡‡æ ·è¡Œä¸º</strong>ï¼šå½“æ—¶é’Ÿä¿¡å·<span
class="math inline">\(CLK\)</span>çš„ä¸Šå‡æ²¿åˆ°æ¥æ—¶ï¼Œ<span
class="math inline">\(D\)</span>è¾“å…¥çš„æ•°æ®ä¼šè¢«é‡‡æ ·å¹¶ä¼ è¾“åˆ°è¾“å‡º<span
class="math inline">\(Q\)</span>ã€‚åœ¨å…¶ä»–æ—¶é—´ï¼Œè¾“å…¥<span
class="math inline">\(D\)</span>è¢«å¿½ç•¥ï¼Œè§¦å‘å™¨ä¿æŒå…ˆå‰é‡‡æ ·çš„å€¼ã€‚</li>
<li><strong>ç¤ºä¾‹æ³¢å½¢</strong>ï¼š</li>
</ol>
<ul>
<li><p><span
class="math inline">\(CLK\)</span>æ³¢å½¢æ˜¾ç¤ºäº†æ—¶é’Ÿä¿¡å·ï¼Œå®ƒçš„ä¸Šå‡æ²¿ç”¨çº¢è‰²è™šçº¿æ ‡è®°ã€‚</p></li>
<li><p><span class="math inline">\(d\)</span>æ³¢å½¢è¡¨ç¤º<span
class="math inline">\(D\)</span>å‹è§¦å‘å™¨çš„æ•°æ®è¾“å…¥ã€‚</p></li>
<li><p><span class="math inline">\(q\)</span>æ³¢å½¢æ˜¾ç¤ºè¾“å‡º<span
class="math inline">\(q\)</span>ï¼Œå±•ç¤ºäº†æ•°æ®å¦‚ä½•åœ¨CLKçš„æ¯ä¸ªä¸Šå‡æ²¿è¢«æ•è·å¹¶ä¿æŒè‡³ä¸‹ä¸€ä¸ªä¸Šå‡æ²¿ã€‚</p></li>
<li><p>ä¸ºäº†èƒ½å¤Ÿæ­£ç¡®çš„è¯»å–å¹¶è¾“å‡ºæ•°æ®ï¼ˆé¿å…æ—¶åºé”™è¯¯ï¼‰ï¼ŒFFç”µè·¯è®¾è®¡å­˜åœ¨ä¸€äº›è®¾è®¡è§„èŒƒ</p>
<ul>
<li><strong>Setup Timeï¼ˆå»ºç«‹æ—¶é—´ï¼‰</strong>:
è¾“å…¥ä¿¡å·å¿…é¡»ç¨³å®šä¿æŒä¸€å®šçš„æ—¶é—´é•¿åº¦ï¼Œåœ¨æ—¶é’Ÿä¿¡å·è§¦å‘ä¹‹å‰ï¼Œä»¥ç¡®ä¿è¾“å…¥èƒ½è¢«æ­£ç¡®è¯»å–ã€‚å¦‚æœè¾“å…¥åœ¨æ—¶é’Ÿä¿¡å·åˆ°æ¥ä¹‹å‰æ”¹å˜ï¼Œé‚£ä¹ˆç¿»è½¬-å¤ä½å¯èƒ½ä¸ä¼šæ­£ç¡®åœ°æ•è·è¾“å…¥ä¿¡å·çš„å½“å‰çŠ¶æ€ã€‚</li>
<li><strong>Hold Timeï¼ˆä¿æŒæ—¶é—´ï¼‰</strong>:
ä¸€æ—¦æ—¶é’Ÿä¿¡å·è§¦å‘å¹¶ä¸”è¾“å…¥è¢«è¯»å–ï¼Œè¾“å…¥ä¿¡å·éœ€è¦ä¿æŒç¨³å®šä¸€å®šçš„æ—¶é—´é•¿åº¦ï¼Œå³ä½¿åœ¨æ—¶é’Ÿä¿¡å·è§¦å‘ä¹‹åã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®åœ¨è¢«é”å­˜ä¹‹åä¸ä¼šç”±äºä»»ä½•å™ªå£°æˆ–è€…å…¶ä»–å¹²æ‰°è€Œè¢«é”™è¯¯åœ°è¯»å–ã€‚</li>
<li><strong>Clock-to-Q Delayï¼ˆæ—¶é’Ÿåˆ°Qçš„å»¶è¿Ÿï¼‰</strong>:
è¿™æ˜¯æŒ‡ä»æ—¶é’Ÿä¿¡å·è§¦å‘åˆ°è¾“å‡ºä¿¡å·<span
class="math inline">\(Q\)</span>æ”¹å˜æ‰€éœ€çš„æ—¶é—´ã€‚è¿™ä¸ªå»¶è¿Ÿæ˜¯ç¿»è½¬-å¤ä½å“åº”è¾“å…¥å˜åŒ–çš„é€Ÿåº¦çš„ä¸€ä¸ªåº¦é‡ã€‚</li>
</ul></li>
</ul>
<h3 id="accumulator-last">Accumulator Last</h3>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699175321266-6cce20d1-13b5-4b40-b063-5a6a3420743b.png#averageHue=%23f2f0f0&amp;clientId=u33a69565-ba28-4&amp;from=paste&amp;height=569&amp;id=ua3f30ff5&amp;originHeight=1138&amp;originWidth=1910&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=584832&amp;status=done&amp;style=none&amp;taskId=u606e7a31-3e0d-433e-b4b3-8b0693c3908&amp;title=&amp;width=955" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ç´¯åŠ å™¨æ˜¯ä¸€ç§å¸¸è§çš„æ•°å­—ç”µè·¯ï¼Œå®ƒå°†ä¸€ä¸ªæ•°å€¼åŠ åˆ°å¦ä¸€ä¸ªæ•°å€¼ä¸Šï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­ã€‚åœ¨è¿ç»­çš„æ—¶é’Ÿå‘¨æœŸä¸­ï¼Œç´¯åŠ å™¨å¯ä»¥å¯¹åºåˆ—ä¸­çš„æ•°å€¼è¿›è¡Œç´¯ç§¯æ±‚å’Œã€‚
<ul>
<li><strong>Reset Signal</strong>:
è¿™ä¸ªä¿¡å·ç”¨æ¥åˆå§‹åŒ–æˆ–æ¸…é›¶ç´¯åŠ å™¨å¯„å­˜å™¨<span
class="math inline">\(Reg.\)</span>ã€‚è¿™æ˜¯ä¸€ä¸ªæ§åˆ¶ä¿¡å·ï¼Œé€šå¸¸ç”¨æ¥åœ¨è®¡ç®—å¼€å§‹å‰å°†ç´¯åŠ å™¨çš„å€¼è®¾å®šä¸ºä¸€ä¸ªå·²çŸ¥çš„çŠ¶æ€ï¼Œå¦‚<span
class="math inline">\(0\)</span>ã€‚</li>
<li><strong>Signal Timing</strong>:
ä¿¡å·çš„å®šæ—¶å¯¹äºç´¯åŠ å™¨çš„æ­£ç¡®è¿è¡Œè‡³å…³é‡è¦ã€‚è¿™åŒ…æ‹¬ç¡®ä¿è¾“å…¥ä¿¡å· <span
class="math inline">\(X_i\)</span> å’Œä¹‹å‰çš„ç´¯ç§¯å€¼ <span
class="math inline">\(S_{i-1}\)</span>
èƒ½æ­£ç¡®åŒæ­¥ã€‚å¦‚æœè¿™äº›ä¿¡å·æ²¡æœ‰æ­£ç¡®åŒæ­¥ï¼Œç´¯åŠ å™¨çš„è¾“å‡º <span
class="math inline">\(S_i\)</span> å°†ä¼šæ˜¯é”™è¯¯çš„ã€‚</li>
</ul></li>
<li><strong>Temporary Wrong Values</strong>:
åœ¨ç´¯åŠ å™¨çš„æ“ä½œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šæš‚æ—¶å‡ºç°é”™è¯¯çš„å€¼ã€‚ç„¶è€Œï¼Œå¦‚æœç”µè·¯è®¾è®¡è‰¯å¥½ï¼Œå¯„å­˜å™¨æœ€ç»ˆä¼šæ•è·å¹¶å­˜å‚¨æ­£ç¡®çš„ç´¯ç§¯å€¼ã€‚</li>
<li><strong>Good Circuit Design</strong>:
åœ¨è‰¯å¥½è®¾è®¡çš„ç”µè·¯ä¸­ï¼Œä¸ç¨³å®šçš„ç°è±¡ï¼ˆæ¯”å¦‚ä¿¡å·æŠ–åŠ¨æˆ–é”™è¯¯çš„æš‚æ€å€¼ï¼‰ä¸ä¼šåœ¨æ—¶é’Ÿçš„ä¸Šå‡æ²¿é™„è¿‘å‘ç”Ÿã€‚ç”µè·¯è®¾è®¡åº”è¯¥ç¡®ä¿åœ¨æ—¶é’Ÿçš„å…³é”®æ—¶åˆ»ï¼ˆé€šå¸¸æ˜¯ä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿ï¼‰ï¼Œæ‰€æœ‰çš„ä¿¡å·éƒ½ç¨³å®šä¸”åŒæ­¥ï¼Œä»¥é¿å…æ•°æ®é”™è¯¯ã€‚</li>
<li><strong>Undefined (Unknown) Signal</strong>:
åœ¨æ³¢å½¢å›¾çš„æ ‡è®°ä¸­ï¼Œæœ‰ä¸€äº›ä¿¡å·çŠ¶æ€è¢«æ ‡è®°ä¸ºâ€œUndefinedâ€ï¼ˆæœªå®šä¹‰ï¼‰ï¼Œè¿™è¡¨æ˜åœ¨æŸäº›æ—¶åˆ»ä¿¡å·çš„ç¡®åˆ‡çŠ¶æ€æœªçŸ¥æˆ–ä¸ç¡®å®šã€‚</li>
</ul>
<h2 id="maximum-clock-frequency">Maximum Clock Frequency</h2>
<ul>
<li>æˆ‘ä»¬å¸Œæœ›Clockçš„å‘¨æœŸèƒ½å¤Ÿå¾ˆçŸ­ï¼ˆé¢‘ç‡å¾ˆé«˜ï¼‰ï¼Œå®Œæˆè¿™ä¸€æ­¥çš„å‰ææ˜¯ä¿¡å·å¯ä»¥æ­£ç¡®çš„è¢«å¯„å­˜å™¨å­˜å–
<ul>
<li>è®¾ç½®æ—¶é—´ï¼ˆsetup
timeï¼‰æ˜¯æŒ‡è¾“å…¥ä¿¡å·éœ€è¦åœ¨æ—¶é’Ÿä¿¡å·çš„è§¦å‘è¾¹æ²¿åˆ°æ¥ä¹‹å‰ä¿æŒç¨³å®šçš„æ—¶é—´é•¿åº¦ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿è¾“å…¥ä¿¡å·èƒ½å¤Ÿè¢«å¯„å­˜å™¨æ­£ç¡®åœ°é‡‡é›†å’Œé”å­˜ã€‚</li>
<li>ä¿æŒæ—¶é—´ï¼ˆhold
timeï¼‰æ˜¯æŒ‡è¾“å…¥ä¿¡å·åœ¨æ—¶é’Ÿä¿¡å·çš„è§¦å‘è¾¹æ²¿ä¹‹åéœ€è¦ä¿æŒç¨³å®šçš„æœ€çŸ­æ—¶é—´ã€‚å³ä½¿æ—¶é’Ÿè¾¹æ²¿åˆ°æ¥åï¼Œè¾“å…¥ä¿¡å·ä¹Ÿéœ€è¦ä¿æŒä¸€æ®µæ—¶é—´ï¼Œä»¥ç¡®ä¿æ•°æ®è¢«æ­£ç¡®åœ°é”å­˜ã€‚</li>
<li>å› æ­¤è¿™éƒ¨åˆ†æ—¶é—´çš„å‡å°‘è¦éå¸¸çš„å°å¿ƒ</li>
</ul></li>
<li>é™¤æ­¤ä¹‹å¤–ï¼ŒCPUçš„æœ€å¿«ä¸»é¢‘æ˜¯ç”±è€—æ—¶æœ€é•¿çš„Critical
Pathæ¥å®šä¹‰çš„ï¼Œå¦‚æœä¸»é¢‘è¿‡é«˜ï¼Œæ„å‘³ç€å¯„å­˜å™¨ä¼šè¯»åˆ°åƒåœ¾ä¿¡å·ã€‚</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699255628547-bd88658b-435b-4d11-876b-85080590a1cb.png#averageHue=%23f2eeee&amp;clientId=uf274c9d7-596b-4&amp;from=paste&amp;height=493&amp;id=uc53e51ed&amp;originHeight=986&amp;originWidth=1712&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=157275&amp;status=done&amp;style=none&amp;taskId=ua315a402-7559-403c-bfe0-8303c47a420&amp;title=&amp;width=856" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å…³é”®è·¯å¾„çš„è®¡ç®—é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†ï¼š
<ul>
<li>CLK-to-Q
Delayï¼ˆæ—¶é’Ÿåˆ°è¾“å‡ºçš„å»¶è¿Ÿï¼‰ï¼šå¯„å­˜å™¨ä»æ¥æ”¶åˆ°æ—¶é’Ÿä¿¡å·åˆ°è¾“å‡ºæ•°æ®æ‰€éœ€çš„æ—¶é—´ã€‚</li>
<li>CL
Delayï¼ˆç»„åˆé€»è¾‘å»¶è¿Ÿï¼‰ï¼šæ•°æ®åœ¨å¯„å­˜å™¨ä¹‹é—´ä¼ è¾“è¿‡ç¨‹ä¸­ç»è¿‡çš„æ‰€æœ‰ç»„åˆé€»è¾‘å•å…ƒäº§ç”Ÿçš„å»¶è¿Ÿã€‚</li>
<li>Adder
Delayï¼ˆåŠ æ³•å™¨å»¶è¿Ÿï¼‰ï¼šå¦‚æœè·¯å¾„ä¸­æœ‰åŠ æ³•å™¨ï¼Œå…¶å¤„ç†æ—¶é—´ä¹Ÿä¼šè¢«åŒ…æ‹¬åœ¨å†…ã€‚</li>
<li>Setup
Timeï¼ˆå»ºç«‹æ—¶é—´ï¼‰ï¼šä¸‹ä¸€ä¸ªå¯„å­˜å™¨åœ¨æ¥æ”¶åˆ°æ—¶é’Ÿä¿¡å·ä¹‹å‰éœ€è¦æ•°æ®ç¨³å®šçš„æ—¶é—´ã€‚</li>
</ul></li>
</ul>
<p>åœ¨<strong>è®¾è®¡</strong>æ—¶é’Ÿé©±åŠ¨çš„æ•°å­—ç³»ç»Ÿæ—¶ï¼Œ<strong>ç¡®ä¿æ—¶é’Ÿå‘¨æœŸé•¿äºå…³é”®è·¯å¾„ä¸Šçš„æ€»å»¶è¿Ÿæ˜¯è‡³å…³é‡è¦çš„</strong>ã€‚è¿™å¯ä»¥ç¡®ä¿æ¯ä¸ªæ•°æ®ç‚¹åœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿä¿¡å·åˆ°æ¥ä¹‹å‰éƒ½å·²ç»ç¨³å®šå¹¶<strong>å‡†å¤‡å¥½ä¼ é€’</strong>ï¼Œä»è€Œä¿æŒæ•°æ®çš„å®Œæ•´æ€§å’ŒåŒæ­¥ã€‚å¦‚æœæ—¶é’Ÿå‘¨æœŸå¤ªçŸ­ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®é”™è¯¯æˆ–ç”µè·¯åŠŸèƒ½ä¸ç¨³å®šã€‚å›¾ä¸­çº¢è‰²çš„çº¿æ¡æ˜¾ç¤ºäº†ç”µè·¯ä¸­çš„å…³é”®è·¯å¾„ï¼Œé€šè¿‡è®¡ç®—è¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰å»¶è¿Ÿçš„å’Œï¼Œè®¾è®¡è€…å¯ä»¥ç¡®å®šç³»ç»Ÿçš„æœ€å¤§æ—¶é’Ÿé¢‘ç‡ã€‚è¿™ä¸ªæ¦‚å¿µæ˜¯æ•°å­—ç³»ç»Ÿè®¾è®¡ä¸­çš„ä¸€ä¸ªåŸºæœ¬åŸåˆ™ï¼Œç‰¹åˆ«æ˜¯åœ¨è®¾è®¡é«˜é€Ÿå’Œé«˜æ€§èƒ½çš„ç”µè·¯æ—¶è‡³å…³é‡è¦ã€‚</p>
<h2 id="limited-frequency-by-circuit">Limited Frequency by circuit</h2>
<ul>
<li>çŠ¶æ€çš„ç­‰å¾…é™åˆ¶äº†CPUçš„æœ€å¤§ä¸»é¢‘</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699256055714-1d5a198d-f6a8-4608-a2a2-1f336f7e6fbe.png#averageHue=%23eae7e7&amp;clientId=uf274c9d7-596b-4&amp;from=paste&amp;height=353&amp;id=u9d050cc5&amp;originHeight=706&amp;originWidth=1494&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=207940&amp;status=done&amp;style=none&amp;taskId=u6078ed6c-d72b-412e-b6f1-97a2d34648e&amp;title=&amp;width=747" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æœ€å¤§æ—¶é’Ÿé¢‘ç‡æ˜¯æŒ‡æ•°å­—ç”µè·¯èƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„æœ€é«˜æ—¶é’Ÿé€Ÿç‡ã€‚ä¸ºäº†ä¿è¯ç”µè·¯çš„ç¨³å®šæ€§å’Œæ€§èƒ½ï¼Œæ—¶é’Ÿé¢‘ç‡ä¸èƒ½è¶…è¿‡è¿™ä¸ªå€¼ã€‚</li>
<li><strong>æœ€å¤§æ—¶é’Ÿé¢‘ç‡</strong>å—åˆ¶äºå¯„å­˜å™¨éœ€è¦å¤šå°‘æ—¶é—´æ¥æ­£ç¡®è·å–åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œè¿™ä¸ªæ—¶é—´å—åˆ°å»ºç«‹æ—¶é—´<span
class="math inline">\(( t_{setup} )\)</span>çš„çº¦æŸã€‚</li>
<li>è®¾è®¡å‡è®¾æœ€å¤§å»¶è¿Ÿï¼ˆMax Delayï¼‰è¦å¤§äºä¿æŒæ—¶é—´ï¼ˆHold
Timeï¼‰ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚ã€
<ul>
<li>å¦‚æœæœ€å¤§å»¶è¿Ÿå°äºä¿æŒæ—¶é—´ï¼Œæ„å‘³ç€å•ä½ä¿æŒæ—¶é—´å†…ï¼Œä¿¡å·å˜åŒ–å¯èƒ½ä¼šæœ‰å¤šæ¬¡ï¼Œè¿™ä¼šä½¿å¾—æˆ‘ä»¬ä¸¢å¤±ä¿¡å·</li>
</ul></li>
<li>æœ€å¤§å»¶è¿Ÿç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š
<ul>
<li><strong>CLK-to-Q
Delay</strong>ï¼šæ—¶é’Ÿä¿¡å·ä¼ æ’­åˆ°å¯„å­˜å™¨è¾“å‡ºçš„æ—¶é—´ã€‚</li>
<li><strong>CL Delay</strong>ï¼šç»„åˆé€»è¾‘äº§ç”Ÿçš„å»¶è¿Ÿã€‚</li>
<li><strong>Setup
Time</strong>ï¼šå¯„å­˜å™¨æ•è·è¾“å…¥ä¿¡å·ä¹‹å‰æ‰€éœ€æ•°æ®ç¨³å®šçš„æ—¶é—´ã€‚</li>
</ul></li>
<li>æœ€å°å‘¨æœŸï¼ˆMin
Periodï¼‰ç­‰äºæœ€å¤§å»¶è¿Ÿï¼Œå®ƒå®šä¹‰äº†æ—¶é’Ÿä¿¡å·é—´éš”çš„æœ€çŸ­æ—¶é—´ã€‚</li>
<li>æœ€å¤§é¢‘ç‡ï¼ˆMax Freqï¼‰æ˜¯æœ€å°å‘¨æœŸçš„å€’æ•°ï¼Œå³ <span
class="math inline">\(\frac{1}{Min Period}\)</span>ã€‚</li>
</ul>
<p>ç”µè·¯å›¾ç®€åŒ–äº†ç”µè·¯çš„å·¥ä½œæµç¨‹ï¼Œæ˜¾ç¤ºäº†è¾“å…¥é€šè¿‡ç»„åˆé€»è¾‘ä¼ é€’ç»™å¯„å­˜å™¨ï¼Œç„¶åå¯„å­˜å™¨è¾“å‡ºåˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ŒåŒæ—¶ä¹Ÿè®°å½•å½“å‰çŠ¶æ€ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯æ—¶åºé€»è¾‘çš„åŸºæœ¬å·¥ä½œæ¨¡å¼ï¼Œå…¶ä¸­æ—¶é’Ÿä¿¡å·åè°ƒæ•°æ®åœ¨å„ä¸ªéƒ¨åˆ†ä¹‹é—´çš„ä¼ é€’ã€‚</p>
<h2 id="pipelining">Pipelining</h2>
<ul>
<li>ä¸ºäº†æ­£ç¡®çš„è½¬ç§»å¯„å­˜å™¨çš„çŠ¶æ€ï¼Œæˆ‘ä»¬è§„å®šäº†æœ€å¤§æ—¶å»¶è¦å¤§äºä¿æŒæ—¶å»¶</li>
<li>è€Œæœ€å¤§æ—¶å»¶ä¼šCLçš„å¢åŠ è€Œå¢åŠ ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨CLä¸­æ’å¯„å­˜å™¨æ¥å‡å°‘å‘¨æœŸ</li>
<li>å…³äºæµæ°´çº¿æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç±»æ¯”ï¼Œå‡å¦‚æ•‘ç«çš„ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä¸€ä¸ªäººæ¯æ¬¡æ‹ä¸€æ¡¶æ°´ä»Aåˆ°Bç„¶åæ•‘ç«ï¼›ä¸€ç§æ˜¯ä¸€æ’äººä»¥ä¸€å®šé—´éš”æ’åˆ—ï¼Œç„¶åæŠŠæ°´æ¡¶ä»æ°´æºä¼ é€’ç»™ä¸‹ä¸€ä¸ªäººä¸€ç›´åˆ°ç«åœº
<ul>
<li>æµæ°´çº¿ä¹Ÿå­˜åœ¨å¯åŠ¨å»¶è¿Ÿï¼Œè€Œä¸”ä¸èƒ½ç®€å•çš„ç”¨å‰è¾¹çš„å„ç§å»¶è¿Ÿæ¥è§£é‡Šï¼Œæ¶‰åŠåˆ°æŒ‡ä»¤å¡«å……çš„é—®é¢˜</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699258857116-ac9fd024-600d-4321-9778-114c73cd8567.png#averageHue=%23f5f4f4&amp;clientId=uf274c9d7-596b-4&amp;from=paste&amp;height=484&amp;id=u64bc9321&amp;originHeight=968&amp;originWidth=1048&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=291181&amp;status=done&amp;style=none&amp;taskId=uc5240625-f809-4bce-994d-cf463809927&amp;title=&amp;width=524" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æ€ä¹ˆåˆ¤æ–­æŸç§ç”µè·¯èƒ½ä¸èƒ½åœ¨æŸä¸ªä¸»é¢‘çš„è®¡ç®—æœºä¸Šè¿è¡Œ
<ul>
<li>æ ¸å¿ƒå°±æ˜¯å…³é”®ç”µè·¯çš„æ—¶å»¶å°äºCPUä¸»é¢‘çš„å‘¨æœŸ</li>
<li>1GHZ = 1ns = 1000ps</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699261304551-5b8b8638-d28c-4719-bc88-e4d80524b838.png#averageHue=%23ede8e8&amp;clientId=uf274c9d7-596b-4&amp;from=paste&amp;height=234&amp;id=uf5b1a59c&amp;originHeight=936&amp;originWidth=1388&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=170122&amp;status=done&amp;style=none&amp;taskId=ubae0ea72-c9b1-47a3-b96e-f8da8355db0&amp;title=&amp;width=347" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="finite-state-machines">Finite State Machines</h2>
<ul>
<li>é€šè¿‡æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºæ¥å»ºç«‹é¡ºåºé€»è¾‘
<ul>
<li>FSMå¯ä»¥æ–¹ä¾¿çš„æ¦‚å¿µåŒ–éšæ—¶é—´çš„è®¡ç®—è¿‡ç¨‹</li>
<li>FSMé€šè¿‡åœ†åœˆè¡¨ç¤ºçŠ¶æ€ï¼Œé€šè¿‡ç®­å¤´è¡¨ç¤ºçŠ¶æ€çš„è½¬ç§»</li>
<li>ä»»ä½•æœ‰é™çŠ¶æ€æœºéƒ½å¯ä»¥é€šè¿‡å¯„å­˜å™¨å’Œé€»è¾‘ç”µè·¯åœ¨ç¡¬ä»¶ä¸­å®ç°</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699352416543-b946c8b0-fd76-4f3c-b6ce-231b5e52a5a6.png#averageHue=%23f5f2f2&amp;clientId=uf274c9d7-596b-4&amp;from=paste&amp;height=232&amp;id=uc2cddb2e&amp;originHeight=928&amp;originWidth=1516&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=280151&amp;status=done&amp;style=none&amp;taskId=u82a251f3-72c9-4052-b1e4-defd8f6a56e&amp;title=&amp;width=379" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æ­¤çŠ¶æ€æœºç”¨äºæ£€æµ‹è¿ç»­çš„ä¸‰ä¸ª1ï¼ŒFSMè¿˜æœ‰å¾ˆå¤šåº”ç”¨ã€‚</li>
</ul>
<ol type="1">
<li><strong>è®¡ç®—æœºç¨‹åº</strong>ï¼šåœ¨è½¯ä»¶å¼€å‘ä¸­ï¼ŒFSMè¢«ç”¨æ¥è®¾è®¡å…·æœ‰ä¸€å®šæ•°ç›®çŠ¶æ€çš„ç¨‹åºï¼Œæ¯”å¦‚æ–‡æœ¬ç¼–è¾‘å™¨ã€ç½‘ç»œåè®®å’Œæ¸¸æˆçš„çŠ¶æ€æ§åˆ¶ã€‚</li>
<li><strong>åè®®è®¾è®¡</strong>ï¼šåœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼Œå¦‚TCP/IPåè®®ï¼ŒFSMç”¨æ¥ç®¡ç†è¿æ¥çš„å»ºç«‹ã€æ•°æ®ä¼ è¾“å’Œè¿æ¥çš„ç»ˆæ­¢ã€‚</li>
<li><strong>ç”¨æˆ·ç•Œé¢</strong>ï¼šè®¸å¤šç”¨æˆ·ç•Œé¢ä¾èµ–äºFSMæ¥å¤„ç†ç”¨æˆ·çš„è¾“å…¥ï¼Œæ¯”å¦‚æŒ‰é’®æŒ‰ä¸‹ã€èœå•é€‰æ‹©å’Œè§¦æ‘¸å±æ‰‹åŠ¿ã€‚</li>
<li><strong>ç¡¬ä»¶è®¾è®¡</strong>ï¼šåœ¨æ•°å­—ç”µè·¯è®¾è®¡ï¼Œå¦‚å¾®å¤„ç†å™¨çš„æ§åˆ¶å•å…ƒï¼ŒFSMç”¨æ¥ç®¡ç†ä¿¡å·å’Œæ“ä½œçš„æµç¨‹ã€‚</li>
<li><strong>è¯­è¨€è§£æ</strong>ï¼šåœ¨ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨çš„å¼€å‘ä¸­ï¼ŒFSMç”¨äºå®ç°è¯æ³•åˆ†æå™¨ï¼Œå°†ç”¨æˆ·è¾“å…¥çš„ä»£ç è½¬æ¢ä¸ºå¯è¯†åˆ«çš„ä»¤ç‰Œã€‚</li>
<li><strong>æ¸¸æˆå¼€å‘</strong>ï¼šåœ¨æ¸¸æˆå¼€å‘ä¸­ï¼ŒFSMç”¨äºç®¡ç†è§’è‰²çŠ¶æ€ï¼Œå¦‚è¡Œèµ°ã€è·‘åŠ¨ã€è·³è·ƒæˆ–å…¶ä»–åŠ¨ä½œã€‚</li>
<li><strong>è‡ªåŠ¨æ§åˆ¶</strong>ï¼šåœ¨è‡ªåŠ¨åŒ–å’Œæœºå™¨äººæŠ€æœ¯ä¸­ï¼ŒFSMè¢«ç”¨äºæ§åˆ¶æœºå™¨çš„çŠ¶æ€è½¬æ¢ï¼Œæ¯”å¦‚ç”Ÿäº§çº¿ä¸Šçš„æœºæ¢°æ‰‹è‡‚ã€‚</li>
<li><strong>ä¿¡å·å¤„ç†</strong>ï¼šåœ¨æ•°å­—ä¿¡å·å¤„ç†ä¸­ï¼ŒFSMå¯ä»¥ç®¡ç†å’Œå†³å®šå¦‚ä½•å¤„ç†è¿›å…¥çš„ä¿¡å·åºåˆ—ã€‚</li>
<li><strong>äº¤é€šæ§åˆ¶</strong>ï¼šåœ¨äº¤é€šç¯ç³»ç»Ÿå’Œé“è·¯ä¿¡å·ç³»ç»Ÿä¸­ï¼ŒFSMç”¨æ¥æ§åˆ¶äº¤é€šæµç¨‹å’Œä¿¡å·ç¯çš„å˜åŒ–ã€‚</li>
<li><strong>ç”µå­æ¸¸æˆ</strong>ï¼šåœ¨ç”µå­æ¸¸æˆæ§åˆ¶ä¸­ï¼ŒFSMç”¨æ¥å†³å®šè§’è‰²çš„è¡Œä¸ºï¼Œæ•Œäººçš„AIé€»è¾‘ç­‰ã€‚</li>
<li><strong>æ¨¡å¼è¯†åˆ«</strong>ï¼šåœ¨æ¨¡å¼è¯†åˆ«å’Œåºåˆ—æ£€æµ‹ä¸­ï¼ŒFSMç”¨äºè¯†åˆ«è¾“å…¥æ•°æ®ä¸­çš„ç‰¹å®šæ¨¡å¼ï¼Œä¾‹å¦‚æ¡å½¢ç è¯»å–å™¨ã€‚</li>
<li><strong>æ–‡æœ¬å¤„ç†</strong>ï¼šFSMå¯ä»¥ç”¨æ¥è®¾è®¡æ–‡æœ¬æœç´¢ç®—æ³•ï¼Œä¾‹å¦‚æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ã€‚</li>
</ol>
<ul>
<li>çŠ¶æ€æœºçš„ç”µè·¯è®¾è®¡å¾€å¾€ç¦»ä¸å¼€å¯„å­˜å™¨å’Œç»„åˆé€»è¾‘</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699353102559-7770f6b0-3d64-4696-abc0-56e6e0d3ba07.png#averageHue=%23f0efef&amp;clientId=uf274c9d7-596b-4&amp;from=paste&amp;height=421&amp;id=u543ec40b&amp;originHeight=842&amp;originWidth=1928&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=265182&amp;status=done&amp;style=none&amp;taskId=u9935861b-83ae-4ce5-92b7-ba0c7b64d79&amp;title=&amp;width=964" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ol type="1">
<li><strong>å¯„å­˜å™¨ç”¨äºæŒæœ‰çŠ¶æ€æœºçŠ¶æ€çš„è¡¨ç¤º</strong>ï¼š</li>
</ol>
<ul>
<li>æ¯ä¸ªçŠ¶æ€éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ¯”ç‰¹æ¨¡å¼ã€‚</li>
<li>å¯„å­˜å™¨çš„è¾“å‡ºæ˜¯å½“å‰çš„çŠ¶æ€ï¼ˆPS/CSï¼ŒPresent State/Current
Stateï¼‰ã€‚</li>
<li>å¯„å­˜å™¨çš„è¾“å…¥æ˜¯ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼ˆNSï¼ŒNext Stateï¼‰ã€‚</li>
</ul>
<p><em>æ‹“å±•</em>ï¼šåœ¨ç¡¬ä»¶å®ç°ä¸­ï¼Œé€šå¸¸ä½¿ç”¨è§¦å‘å™¨ï¼ˆå¦‚Dè§¦å‘å™¨ï¼‰æ¥å­˜å‚¨çŠ¶æ€æœºçš„å½“å‰çŠ¶æ€ã€‚æ¯ä¸ªçŠ¶æ€éƒ½è¢«ç¼–ç ä¸ºä¸€ä¸ªå”¯ä¸€çš„äºŒè¿›åˆ¶å€¼ï¼Œå½“çŠ¶æ€å˜åŒ–æ—¶ï¼Œè¿™ä¸ªå€¼ä¼šåœ¨æ—¶é’Ÿä¿¡å·ï¼ˆCLKï¼‰çš„æ§åˆ¶ä¸‹è¢«æ›´æ–°ã€‚</p>
<ol start="2" type="1">
<li><strong>ç»„åˆé€»è¾‘å®ç°è½¬æ¢å‡½æ•°</strong>ï¼ˆçŠ¶æ€è½¬æ¢ + è¾“å‡ºï¼‰ï¼š</li>
</ol>
<ul>
<li>ç»„åˆé€»è¾‘è´Ÿè´£æ ¹æ®å½“å‰çŠ¶æ€å’Œè¾“å…¥ç¡®å®šä¸‹ä¸€ä¸ªçŠ¶æ€ä»¥åŠç›¸åº”çš„è¾“å‡ºã€‚</li>
</ul>
<p><em>æ‹“å±•</em>ï¼šç»„åˆé€»è¾‘ä¸å­˜å‚¨ä»»ä½•çŠ¶æ€ä¿¡æ¯ï¼Œå®ƒæ˜¯ç”±é€»è¾‘é—¨ï¼ˆå¦‚ANDã€ORã€NOTç­‰ï¼‰ç»„æˆçš„ç”µè·¯ã€‚å®ƒç”¨æ¥å®ç°çŠ¶æ€è½¬ç§»å‡½æ•°å’Œè¾“å‡ºå‡½æ•°ï¼Œè¿™äº›å‡½æ•°å®šä¹‰äº†åœ¨ç»™å®šçš„å½“å‰çŠ¶æ€å’Œè¾“å…¥æƒ…å†µä¸‹ï¼ŒçŠ¶æ€æœºåº”è¯¥è½¬ç§»åˆ°å“ªä¸ªçŠ¶æ€ï¼Œä»¥åŠåº”è¯¥äº§ç”Ÿä»€ä¹ˆè¾“å‡ºã€‚</p>
<ol start="3" type="1">
<li><strong>æ•´ä¸ªç³»ç»Ÿçš„å·¥ä½œæµç¨‹</strong>ï¼š</li>
</ol>
<ul>
<li>å½“æ—¶é’Ÿä¿¡å·æ¥ä¸´æ—¶ï¼Œå½“å‰çŠ¶æ€è¢«ç”¨ä½œç»„åˆé€»è¾‘çš„è¾“å…¥ï¼Œç»„åˆé€»è¾‘æ ¹æ®å½“å‰çŠ¶æ€å’Œå¤–éƒ¨è¾“å…¥è®¡ç®—å‡ºä¸‹ä¸€ä¸ªçŠ¶æ€å’Œè¾“å‡ºã€‚</li>
<li>è®¡ç®—å‡ºçš„ä¸‹ä¸€ä¸ªçŠ¶æ€åœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå˜æˆå½“å‰çŠ¶æ€ï¼Œå¦‚æ­¤å¾ªç¯ã€‚</li>
</ul>
<p><em>æ‹“å±•</em>ï¼šåœ¨ç¡¬ä»¶ä¸­å®ç°FSMæ„å‘³ç€æˆ‘ä»¬å¯ä»¥è®¾è®¡å‡ºååº”å¿«é€Ÿä¸”ç¡®å®šçš„ç³»ç»Ÿï¼Œè¿™äº›ç³»ç»Ÿåœ¨åµŒå…¥å¼ç³»ç»Ÿã€ç½‘ç»œè®¾å¤‡ã€æ¶ˆè´¹ç”µå­äº§å“ç­‰é¢†åŸŸéå¸¸æœ‰ç”¨ã€‚é€šè¿‡ç¡¬ä»¶å®ç°FSMï¼Œå¯ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºç¡¬ä»¶å¯ä»¥åœ¨çº³ç§’çº§çš„æ—¶é—´å†…å“åº”çŠ¶æ€å˜åŒ–ï¼Œè¿™æ¯”è½¯ä»¶å®ç°è¦å¿«å¾—å¤šã€‚</p>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699353533112-325d7966-08b2-4fdb-b2e0-606f5965574e.png#averageHue=%23edeaea&amp;clientId=uf274c9d7-596b-4&amp;from=paste&amp;height=167&amp;id=uf4eb7389&amp;originHeight=334&amp;originWidth=1062&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=104759&amp;status=done&amp;style=none&amp;taskId=u783860c5-2895-4eaf-ab0f-5adb2083f93&amp;title=&amp;width=531" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>CSä»£è¡¨å½“å‰çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥è¡¨ç¤ºçš„çŠ¶æ€æ•°è¦å¤§äºç­‰äºå®é™…çš„çŠ¶æ€æ•°
<ul>
<li>å¦‚æœå‡ºç°äº†å†—ä½™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¯¹XXéšæ„è®¾ç½®ä»¥ç®€åŒ–é€»è¾‘è¿›è€Œç®€åŒ–ç¡¬ä»¶ï¼ˆå®é™…ä¸Šæˆ‘ä»¬è‡ªç®€åŒ–å¸ƒå°”é€»è¾‘å®Œå…¨ä¸ä¼šè€ƒè™‘çº¢è‰²çš„éƒ¨åˆ†ï¼‰</li>
<li>è¿™ä¸ªç”µè·¯å…è®¸æˆ‘ä»¬è¯†åˆ«è¿ç»­çš„ä¸‰ä¸ª1
<ul>
<li>é¦–å…ˆæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºFSMæ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦å¼„æ¸…æ¥šå®ƒçš„ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œä»¥åŠå®ƒçš„è¾“å‡ºã€‚</li>
<li>æˆ‘ä»¬çš„çŠ¶æ€ä½¿ç”¨äº†ä¸¤ä½æ¯”ç‰¹ä½æ¥è¡¨ç¤ºï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒæ‹†å‡ºæ¥ï¼Œ<span
class="math inline">\(NS_1\)</span>ä»£è¡¨çš„æ˜¯çŠ¶æ€çš„é«˜ä½ï¼Œ<span
class="math inline">\(NS_0\)</span>ä»£è¡¨çš„æ˜¯çŠ¶æ€è¡¨ç¤ºçš„ä½ä½
<ul>
<li>å› æ­¤æˆ‘ä»¬ç”µè·¯çš„è¾“å‡ºæœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼šçŠ¶æ€é«˜ä½ï¼ŒçŠ¶æ€ä½ä½ï¼Œè¾“å‡ºä½ï¼ˆæ ¹æ®å½“å‰çŠ¶æ€è®¡ç®—å‡ºçš„å€¼ï¼‰</li>
<li>éšåç¡®è®¤æ¯ä¸€ä½çš„æœ€ç®€è¡¨ç¤ºï¼Œä¾‹å¦‚é™¤äº†çŠ¶æ€ä½ä½ï¼ŒçŠ¶æ€é«˜ä½ä»¥åŠè¾“å‡ºåªéœ€è¦ä¸¤ä¸ªæ¯”ç‰¹å°±å¯ä»¥æ¨å‡ºæ¥</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699355884181-31b097d1-c6b5-4a85-8f5c-d0cd8933fb2b.png#averageHue=%23f2f2f2&amp;clientId=uf274c9d7-596b-4&amp;from=paste&amp;height=259&amp;id=u6a07156d&amp;originHeight=1036&amp;originWidth=1662&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=173580&amp;status=done&amp;style=none&amp;taskId=ud661ed06-9070-42b7-a9d2-2b95b0f3874&amp;title=&amp;width=416" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="arithmetic-logic-unitalu">Arithmetic Logic Unitï¼ˆALUï¼‰</h2>
<ul>
<li>è®¡ç®—æœºå­˜åœ¨è®¸å¤šä¸åŒçš„Functional units</li>
<li>é™¤å»ALUè¿˜æœ‰æµ®ç‚¹è¿ç®—å•å…ƒï¼Œç®—æ•°é€»è¾‘å•å…ƒç­‰</li>
<li>åšLabæ—¶å†ä»”ç»†ç†è§£ALU</li>
</ul>
<h1 id="lecture-12-risc-v-cpu">Lecture 12 RISC-V CPU</h1>
<p><a
target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2023/pdf/22918222/1699512402694-fb43be65-5d69-4cf9-a6e4-ef3c61bcc85a.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22918222%2F1699512402694-fb43be65-5d69-4cf9-a6e4-ef3c61bcc85a.pdf%22%2C%22name%22%3A%22lec12.pdf%22%2C%22size%22%3A3723800%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u5fc03d61-3d26-4b3e-8704-fad11653f8a%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22u03eebc14%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">lec12.pdf</a></p>
<ul>
<li>CPUå¯ä»¥åˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼ŒDatapath &amp; Control</li>
<li>Datapathçš„ä½œç”¨æ˜¯æ‰§è¡ŒæŒ‡ä»¤é›†å®šä¹‰çš„æ“ä½œï¼Œä¾‹å¦‚ç®—æ•°æ“ä½œï¼Œä¾‹å¦‚æ•°æ®çš„ä¼ è¾“ï¼Œé€»è¾‘æ“ä½œç­‰
<ul>
<li>DatapathåŒ…å«äº†è®¸å¤šç¡¬ä»¶ï¼Œä¾‹å¦‚Registerï¼ŒALUï¼ŒBUSï¼ŒMUXç­‰</li>
</ul></li>
<li>Controlçš„ä½œç”¨æ˜¯å¼„æ¸…æ¥šä¸€ä¸ªæŒ‡ä»¤è¦åšä»€ä¹ˆï¼Œå¹¶æ­£ç¡®çš„è®©Dathpathæ‰§è¡Œæ“ä½œ</li>
</ul>
<h2 id="r-type">R-Type</h2>
<ul>
<li>ä½¿ç”¨ä½¿ç”¨ä¸¤ä¸ªå¯„å­˜å™¨è¿›è¡Œè¿ç®—ï¼Œå°†ç»“æœå­˜å‚¨åˆ°å¦ä¸€ä¸ªå¯„å­˜å™¨
<ul>
<li>è·å–æŒ‡ä»¤</li>
<li>è§£ææŒ‡ä»¤ï¼Œå…·ä½“æ“ä½œçš„æ˜¯å“ªäº›å¯„å­˜å™¨ï¼ˆrd,rs1,rs2 -&gt;
32ä¸ªå¯„å­˜å™¨ä¸­çš„å“ªä¸€ä¸ªï¼‰ï¼Œæ“ä½œæ˜¯ä»€ä¹ˆï¼ˆadd, sub, or ...ï¼‰</li>
<li>ä»è§£æå‡ºçš„å¯„å­˜å™¨ä¸­è¯»å–æ•°æ®</li>
<li>æ ¹æ®è¯»å–çš„æ•°æ®ä»¥åŠæ“ä½œè¿ç®—</li>
<li>å°†ç»“æœå†™å›åˆ°rdï¼ˆç›®æ ‡å¯„å­˜å™¨ï¼‰ä¸­</li>
</ul></li>
</ul>
<p><img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699423585966-03678628-0728-4006-a9fe-f7a58c9e2f95.png#averageHue=%23f3f3f3&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=453&amp;id=uf8f0f3ec&amp;originHeight=906&amp;originWidth=1496&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=121295&amp;status=done&amp;style=none&amp;taskId=u1f8c3ebc-02ff-4117-88e3-a5e964bf523&amp;title=&amp;width=748" srcset="/img/loading.gif" lazyload
alt="image.png" /> ### Get the Instruction</p>
<ul>
<li>æŒ‡ä»¤å­˜åœ¨å“ªé‡Œï¼Ÿ
<ul>
<li>å­˜åœ¨å†…å­˜ä¸­ï¼Œè€ŒIMEMä¸­ä¹Ÿå­˜å‚¨äº†æŒ‡ä»¤</li>
<li>CPUä»å“ªé‡Œè·å–æŒ‡ä»¤
<ul>
<li>IMEMä¸­è€Œä¸æ˜¯å†…å­˜ä¸­ï¼Œå†…å­˜ä¸­çš„æŒ‡ä»¤ä¾‹å¦‚addiä¼šä¼ è¾“åˆ°IMEMä¸­ï¼ŒCPUç›´æ¥ä»IMEMä¸­è¯»å–æŒ‡ä»¤</li>
</ul></li>
</ul></li>
<li>æˆ‘æ€ä¹ˆçŸ¥é“è¯¥æ‰§è¡Œå“ªä¸€æ¡æŒ‡ä»¤ï¼Ÿ
<ul>
<li>PCä¸­å­˜å‚¨äº†å³å°†æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€</li>
</ul></li>
<li>æŒ‡ä»¤æ‰§è¡Œå®Œåï¼Œæ€ä¹ˆåˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤å‘¢
<ul>
<li>å¯¹äºR-Typeç±»å‹çš„æŒ‡ä»¤ï¼Œåªéœ€è¦PC+4å°±è¡Œ</li>
</ul></li>
<li>R-typeçš„æŒ‡ä»¤åœ¨å–æŒ‡é˜¶æ®µï¼ŒControlè¿˜æ²¡æœ‰å‘æŒ¥ä½œç”¨</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699424737159-337f7751-44d3-4994-9cdd-d9f188c83a9e.png#averageHue=%23f2f2f2&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=348&amp;id=u889bcc36&amp;originHeight=696&amp;originWidth=1046&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=28340&amp;status=done&amp;style=none&amp;taskId=u982f2b19-c10a-4db7-acf2-f69defdb25c&amp;title=&amp;width=523" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h3 id="parse-instruction">Parse Instruction</h3>
<ul>
<li>é€šè¿‡å–æŒ‡æˆ‘ä»¬å·²ç»ç¡®å®šåˆ°åº•è¦æ‰§è¡ŒR-typeç±»å‹çš„æŒ‡ä»¤äº†ï¼Œè¿™ä¸ªæŒ‡ä»¤éœ€è¦æ“ä½œä¸‰ä¸ªå¯„å­˜å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä»æŒ‡ä»¤ä¸­è§£æå‡ºæˆ‘ä»¬è¦æ“ä½œçš„å¯„å­˜å™¨çš„å®é™…åœ°å€</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699425035232-ca49ea0b-4bb0-4f05-b298-6438cfbbc214.png#averageHue=%23f0f0f0&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=353&amp;id=u3dc2c272&amp;originHeight=706&amp;originWidth=1054&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=37287&amp;status=done&amp;style=none&amp;taskId=u7c48b6e3-1150-4d62-87bb-8f6aaa08a36&amp;title=&amp;width=527" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>éƒ½æ˜¯5ä½ï¼ˆRISC-Vè§„å®šäº†32ä¸ªå¯„å­˜å™¨ï¼‰</li>
</ul>
<h3 id="read-data">Read-Data</h3>
<ul>
<li>ç°åœ¨æˆ‘ä»¬æœ‰äº†å¯„å­˜å™¨çš„åœ°å€ï¼Œéœ€è¦ä»å¯„å­˜å™¨ä¸­æŠŠæ•°æ®ï¼ˆæ“ä½œæ•°ï¼‰å–å‡ºæ¥</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699425497792-efdffceb-5161-4c3e-838a-4d7d4ccf7679.png#averageHue=%23ebebeb&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=346&amp;id=u42fee804&amp;originHeight=692&amp;originWidth=1020&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=49338&amp;status=done&amp;style=none&amp;taskId=u7dab6816-419f-4112-9e0d-99ea1128e85&amp;title=&amp;width=510" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>RISC-Vçš„CPUå­˜åœ¨ä¸€ä¸ªä¸“æœ‰çš„ç¡¬ä»¶ç»“æ„ï¼Œä¸“é—¨ç”¨äºå­˜å‚¨å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œç§°ä¹‹ä¸ºRegister-File</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699425548280-3e65a142-b8d9-411f-a5ad-1964328542f0.png#averageHue=%23ebeae9&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=213&amp;id=u8ba27b19&amp;originHeight=852&amp;originWidth=1564&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=205383&amp;status=done&amp;style=none&amp;taskId=uc6c82d97-9426-4a70-8a89-137ef76a451&amp;title=&amp;width=391" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>Register-Fileå…·æœ‰32ä¸ª32ä½çš„æ ‡å‡†å¯„å­˜å™¨ï¼Œ0å¯„å­˜å™¨é€šå¸¸ä¸ä¼šè¢«è®¾è®¡è¿›å»ï¼Œæ‰€ä»¥é’ˆå¯¹Register-Fileæ¥è¯´æ—¶å¾€å¾€æ˜¯è¯´æœ‰31ä¸ªå¯„å­˜å™¨</li>
<li>ç«¯å£Aï¼ŒBç”¨äºè¾“å‡º32ä½çš„æ•°æ®ç»™ALUåšè¿ç®—</li>
<li>RAï¼ŒRBä»£è¡¨è¦è¯»æ•°æ®çš„å¯„å­˜å™¨çš„åœ°å€ï¼ŒRWä»£è¡¨è¦å†™æ•°æ®çš„å¯„å­˜å™¨åœ°å€ï¼ˆå½“å†™ä½¿èƒ½ä¸º1æ—¶ï¼‰</li>
<li>portWåˆ™ç”¨äºæ¥å—è¦å­˜å…¥åˆ°å¯„å­˜å™¨ä¸­çš„æ•°æ®</li>
<li>ClkåŒæ­¥è¯»å†™çš„æ—¶é’Ÿä¿¡å·</li>
</ul>
<h3 id="perform-operation">Perform operation</h3>
<ul>
<li>å†æœ‰äº†å®é™…çš„æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ALUæ¥æ‰§è¡Œè®¡ç®—</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699426426902-1fbf501e-7aff-47b5-a9c0-656b385bf8c5.png#averageHue=%23f1e9e9&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=368&amp;id=u360afb90&amp;originHeight=736&amp;originWidth=1016&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=59159&amp;status=done&amp;style=none&amp;taskId=u34949fc4-560c-482c-b36b-1a334e0b709&amp;title=&amp;width=508" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>åœ¨è¿™ä¸€æ­¥Controlæ¥å‘Šè¯‰äº†ALUåˆ°åº•è¯¥æ‰§è¡Œä»€ä¹ˆè¿ç®—ï¼ˆfunc3+func7
æ¥ç¡®å®šæ‰§è¡Œä»€ä¹ˆæ“ä½œ R-typeæœ‰å¾ˆå¤šè¿ç®— addå’Œaddiçš„fun3å’Œfun7æ˜¯ä¸€æ ·çš„ï¼‰</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699426664808-5e099664-c0c4-43fa-81d9-68e95cc826ad.png#averageHue=%23ededed&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=262&amp;id=ud6f58e9e&amp;originHeight=524&amp;originWidth=1666&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=573725&amp;status=done&amp;style=none&amp;taskId=uf8223486-6233-48ed-bc75-3a3b92d9287&amp;title=&amp;width=833" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ALUä»Register-Fileæ¥å—ä¸¤ä¸ªæ•°æ®ï¼Œåœ¨ä¸‹ä¸€æ­¥å†™å‡ºåˆ°å¯„å­˜å™¨</li>
</ul>
<h3 id="write-res-to-destination-register">Write res to destination
register</h3>
<ul>
<li>æ§åˆ¶å†™ä¿¡å·ä¸º1</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699426842572-c283a15f-584b-4530-af95-7c59eedc4d99.png#averageHue=%23eae7e7&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=381&amp;id=u3006fadf&amp;originHeight=762&amp;originWidth=996&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=62831&amp;status=done&amp;style=none&amp;taskId=u7d366067-8c94-43b1-9a5a-4e1fcd67d00&amp;title=&amp;width=498" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="i-type">I-type</h2>
<ul>
<li>å½“æˆ‘ä»¬å¼€å§‹äº†è§£I-typeæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥äº†è§£åˆ°ï¼Œä¸ºä»€ä¹ˆæŒ‡ä»¤é›†ä¸­çš„å¯„å­˜å™¨å‡ ä¹æ€»æ˜¯è§„å®šåœ¨åŒæ ·çš„ä½ç½®ï¼Œä¸€åˆ‡éƒ½æ˜¯ä¸ºäº†ç”µè·¯çš„ç®€åŒ–ä¸å¤ç”¨ï¼Œæˆ‘ä»¬æ¯æ¬¡ä¸éœ€è¦ä¸ºæ¯ä¸€ç§æŒ‡ä»¤è®¾ç½®æ–°çš„ç¡¬ä»¶ç»“æ„ï¼Œåè€Œæ˜¯ä¸æ–­çš„å¤ç”¨ä¹‹å‰çš„ç»“æ„</li>
<li>å¯¹äºI-typeç±»å‹çš„æŒ‡ä»¤ï¼Œä»¥addiæ¥åšç¤ºä¾‹</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699428274920-46ad503f-1047-421c-87fe-2f2a41402cf0.png#averageHue=%23f0f0f0&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=375&amp;id=ue11c5559&amp;originHeight=750&amp;originWidth=1686&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=156064&amp;status=done&amp;style=none&amp;taskId=u0d5aac74-947a-43e6-958d-c7e5c176477&amp;title=&amp;width=843" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å¯¹äºI-typeï¼Œæˆ‘ä»¬å»æ‰äº†fun7ä»¥åŠä¸€ä¸ªå¯„å­˜å™¨æ¥è¡¨ç¤ºä¸€ä¸ªå¸¦ç¬¦å·çš„ç«‹å³æ•°å…¶ä»–çš„ä½ç½®å’ŒT-typeçš„æŒ‡ä»¤ä¸€æ‘¸ä¸€æ ·</li>
</ul>
<p>å¯¹äºI-typeçš„æŒ‡ä»¤ï¼Œé™¤äº†è§£ææŒ‡ä»¤ï¼Œä»¥åŠæ‰§è¡Œè®¡ç®—éƒ¨åˆ†ï¼Œå…¶ä»–çš„ä¸€åˆ‡å’ŒR-typeä¿æŒä¸€è‡´ï¼Œç”šè‡³æ˜¯ç”µè·¯ã€‚</p>
<h3 id="parse-instruction-with-i-type">Parse Instruction with I
type</h3>
<ul>
<li>æˆ‘ä»¬é€šè¿‡æ·»åŠ ä¸€ä¸ªç«‹å³æ•°ç”Ÿæˆå™¨æ¥å®Œæˆç«‹å³æ•°è¿ç®—</li>
<li>æˆ‘ä»¬é€šè¿‡ImmSelæ¥æ§åˆ¶å¦‚ä½•å¯¹12ä½çš„immè¿›è¡Œæ‹“å±•ï¼ˆä¾‹å¦‚ç¬¦å·æ‹“å±•ï¼Œæ— ç¬¦å·æ‹“å±•ç­‰ï¼‰</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699428618872-5b9e19a9-76c1-491c-8cf3-92b0fc1a44f8.png#averageHue=%23eceaea&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=453&amp;id=u6dd5a845&amp;originHeight=906&amp;originWidth=1076&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=75234&amp;status=done&amp;style=none&amp;taskId=ue62ba47b-5736-4fd2-baa3-a5814f0718e&amp;title=&amp;width=538" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h3 id="perform-operation-1">Perform operation</h3>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699429112979-20f6f8cf-4bbf-49ac-b71b-e1dba722faf1.png#averageHue=%23e9e7e7&amp;clientId=ub4f88ffc-0c5f-4&amp;from=paste&amp;height=421&amp;id=ua6c3fabf&amp;originHeight=842&amp;originWidth=1054&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=80882&amp;status=done&amp;style=none&amp;taskId=uf3a70291-cebc-4969-bdca-892f74e5569&amp;title=&amp;width=527" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>è‰¯å¥½çš„æŒ‡ä»¤ç¼–ç è®¾è®¡è§„èŒƒä½“ç°äº†å‡ºæ¥ï¼ˆRS2ä¸ºä»€ä¹ˆåœ¨RS1ä¹‹å‰ï¼Ÿï¼‰ï¼Œæˆ‘ä»¬é€šè¿‡æ·»åŠ ä¸€ä¸ªMUXæ¥æ§åˆ¶é€åˆ°ALUçš„æ˜¯rs2è¿˜æ˜¯immï¼Œè¿™ä¸ªä¿¡å·çš„æ§åˆ¶é€šè¿‡BSelæ¥ç›´æ¥æ§åˆ¶</li>
</ul>
<h2 id="i-type-load-type">I-Type + (Load type)</h2>
<ul>
<li>Load type ä¹Ÿæ˜¯I-typeç±»å‹çš„æŒ‡ä»¤</li>
<li>åœ¨I-Typeçš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„ç¡¬ä»¶ç»“æ„æ¥æ“ä½œå†…å­˜</li>
<li>æˆ‘ä»¬ä»å†…å­˜ä¸­è¯»å–æ•°æ®é¦–å…ˆä¼šæ”¾åˆ°<code>DMEM</code>é‡Œ</li>
<li>æˆ‘ä»¬éœ€è¦é¢å¤–çš„MUXæ¥å†³å®šï¼Œæˆ‘ä»¬æ˜¯è¦è¯»å–çš„æ•°æ®ï¼Œè¿˜æ˜¯ç›´æ¥è¦ALUçš„è¿ç®—ç»“æ„ï¼Œè¿™ä¸ªæ ‡å¿—ä½ç”±WBselæ¥æ§åˆ¶</li>
<li>åŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªæ ‡å¿—ä½æ¥æ§åˆ¶è¿™ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œæˆ‘ä»¬æ˜¯å‘DMEMä¸­å†™æ•°æ®è¿˜æ˜¯ä»DMEMä¸­æ‹¿æ•°æ®å‡ºæ¥</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699513628682-7bef1b37-f72b-4a64-b65d-2b6e22c822eb.png#averageHue=%23efeded&amp;clientId=u42a9ba41-dca7-4&amp;from=paste&amp;height=722&amp;id=u1f697239&amp;originHeight=1444&amp;originWidth=2064&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=184042&amp;status=done&amp;style=none&amp;taskId=u3829afc6-2557-4a02-ad35-8353a0cecc5&amp;title=&amp;width=1032" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å®é™…çš„DMEMä¼šå¾ˆå¤æ‚ï¼Œæˆ‘ä»¬é€šè¿‡ç®€åŒ–çš„å†…å­˜æ¨¡å—æ¥æè¿°</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699514044180-4062f199-fe04-49fe-8d96-f80d958b5fd6.png#averageHue=%23f0efee&amp;clientId=u42a9ba41-dca7-4&amp;from=paste&amp;height=655&amp;id=u514f440b&amp;originHeight=1310&amp;originWidth=2090&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=296318&amp;status=done&amp;style=none&amp;taskId=ufceea75d-0342-460d-83d1-a0931ce5cb9&amp;title=&amp;width=1045" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><p>å­˜å‚¨å™¨æœ‰ä¸€ä¸ªè¾“å…¥ç«¯å£ï¼ˆData Inï¼‰å’Œä¸€ä¸ªè¾“å‡ºç«¯å£ï¼ˆData
Outï¼‰ã€‚</p></li>
<li><p>å­˜å‚¨å™¨è®¿é—®å¯ä»¥æ˜¯è¯»æ“ä½œæˆ–å†™æ“ä½œï¼š</p>
<ul>
<li>è¯»æ“ä½œï¼šå½“Write
Enableï¼ˆå†™ä½¿èƒ½ä¿¡å·ï¼‰ä¸º0æ—¶ï¼Œå­˜å‚¨å™¨ä¼šåœ¨ç‰¹å®šçš„åœ°å€è¾“å‡ºæ•°æ®åˆ°Data
Outï¼ˆ32ä½ï¼‰ã€‚</li>
<li>å†™æ“ä½œï¼šå½“Write Enableä¸º1æ—¶ï¼Œæ•°æ®ä¼šè¢«å†™å…¥åˆ°ç‰¹å®šçš„åœ°å€ä¸­ã€‚</li>
</ul></li>
<li><p>å­˜å‚¨å™¨è¿˜æœ‰ä¸€ä¸ªæ—¶é’Ÿè¾“å…¥ï¼ˆCLKï¼‰ï¼Œè¿™ä¸ªè¾“å…¥åªåœ¨å†™æ“ä½œæ—¶æ˜¯ä¸€ä¸ªå› ç´ ã€‚å†™æ“ä½œéœ€è¦åœ¨æ—¶é’Ÿä¿¡å·çš„æ§åˆ¶ä¸‹è¿›è¡Œä»¥ä¿è¯æ•°æ®çš„åŒæ­¥å†™å…¥ã€‚</p></li>
<li><p>åœ¨è¯»å–æ—¶ï¼Œå­˜å‚¨å™¨çš„è¡Œä¸ºç±»ä¼¼äºç»„åˆé€»è¾‘å—ï¼šå½“åœ°å€æœ‰æ•ˆåï¼ŒData
Outå°†åœ¨â€œè®¿é—®æ—¶é—´â€åå˜å¾—æœ‰æ•ˆã€‚</p></li>
<li><p>æ•°æ®è·¯å¾„ï¼šæ˜¯æŒ‡åœ¨å¤„ç†å™¨å†…éƒ¨ï¼Œæ•°æ®ä»è¾“å…¥åˆ°è¾“å‡ºè¿‡ç¨‹ä¸­ç»è¿‡çš„é€»è¾‘å’Œç‰©ç†è·¯å¾„ã€‚è¿™é‡Œæ¶‰åŠåˆ°çš„ç»„ä»¶åŒ…æ‹¬ï¼š</p></li>
<li><p>IMEM (æŒ‡ä»¤å­˜å‚¨å™¨)</p></li>
<li><p>Register file(ç”¨æ¥å­˜æ”¾ä¸´æ—¶è®¡ç®—ç»“æœçš„å¯„å­˜å™¨é›†åˆ)</p></li>
<li><p>ALU (ç®—æœ¯é€»è¾‘å•å…ƒï¼Œæ‰§è¡Œæ•°å­¦å’Œé€»è¾‘è¿ç®—)</p></li>
<li><p>DMEM (æ•°æ®å­˜å‚¨å™¨ï¼Œå­˜æ”¾æ•°æ®çš„å­˜å‚¨å™¨)</p></li>
<li><p>å¤„ç†å™¨è®¾è®¡æœ‰è®¸å¤šä¸åŒçš„ç»„ä»¶ã€‚</p></li>
<li><p>ä¸æ˜¯æ¯æ¡æŒ‡ä»¤éƒ½éœ€è¦ç”¨åˆ°æ‰€æœ‰çš„ç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œæ‰€æœ‰çš„Rç±»å‹æŒ‡ä»¤ï¼ˆå¯„å­˜å™¨åˆ°å¯„å­˜å™¨çš„æ“ä½œï¼‰ä»¥åŠæŸäº›Iç±»å‹æŒ‡ä»¤ï¼ˆå³å…·æœ‰ç«‹å³æ•°çš„æ“ä½œï¼‰åœ¨æ‰§è¡Œæ—¶ä¸éœ€è¦è®¿é—®DMEMã€‚</p></li>
<li><p>ç¡®å®æœ‰æŸäº›æŒ‡ä»¤éœ€è¦ç”¨åˆ°æ‰€æœ‰çš„ç»„ä»¶ï¼Œå¦‚åŠ è½½ï¼ˆloadï¼‰æŒ‡ä»¤ã€‚è¿™ç±»æŒ‡ä»¤é€šå¸¸åœ¨æ•°æ®è·¯å¾„ä¸­å®šä¹‰äº†â€œå…³é”®è·¯å¾„ï¼ˆcritical
pathï¼‰â€ï¼Œæ„æ€æ˜¯è¿™äº›æŒ‡ä»¤åœ¨æ‰§è¡Œæ—¶ä¼šè§¦åŠåˆ°æ•°æ®è·¯å¾„ä¸­çš„æ¯ä¸€ä¸ªéƒ¨åˆ†ï¼Œå¯èƒ½å› æ­¤å†³å®šäº†å¤„ç†å™¨æ€§èƒ½çš„æé™ã€‚</p></li>
</ul>
<p>æ‰€è°“çš„â€œå…³é”®è·¯å¾„â€æ˜¯æŒ‡å¤„ç†å™¨å†…éƒ¨æœ€é•¿çš„æ•°æ®å¤„ç†è·¯å¾„ï¼Œé€šå¸¸ä¹Ÿæ˜¯é™åˆ¶å¤„ç†å™¨æ€§èƒ½çš„å…³é”®å› ç´ ï¼Œå› ä¸ºå®ƒå†³å®šäº†å¤„ç†å™¨å¯ä»¥è¾¾åˆ°çš„æœ€é«˜æ—¶é’Ÿé¢‘ç‡ã€‚</p>
<h2 id="s-type">S-Type</h2>
<ul>
<li>S-Typeç±»å‹çš„æŒ‡ä»¤æ˜¯ç›´æ¥ä½œç”¨äºå†…å­˜çš„
<ul>
<li>éœ€è¦IMEM</li>
<li>éœ€è¦ALU</li>
<li>éœ€è¦Imm</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699589709628-2f758d96-14dc-4a53-bf9a-ac5bc4bf9626.png#averageHue=%23eae9e9&amp;clientId=ue835a858-d22f-4&amp;from=paste&amp;height=320&amp;id=ufe75257e&amp;originHeight=640&amp;originWidth=1026&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=66484&amp;status=done&amp;style=none&amp;taskId=ufcadb776-4d81-4e96-a298-a1b6ca00f1b&amp;title=&amp;width=513" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æœ¬è´¨ä¸Šæˆ‘ä»¬æ·»åŠ äº†ä¸¤æ¡å¯¼çº¿
<ul>
<li>RegWENåœ¨S-typeé‡Œä¸€åªä¼šæ˜¯Falseï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦æ“ä½œå¯„å­˜å™¨</li>
<li>å¯ä»¥ç›´æ¥æŠŠå¯„å­˜å™¨çš„å€¼å†™åˆ°DMEM</li>
</ul></li>
</ul>
<h2 id="sb-type">SB-Type</h2>
<ul>
<li>SB-Formalå’ŒS-Formatååˆ†ç›¸åƒï¼ˆé™¤äº†ç«‹å³æ•°çš„æ‘†æ”¾ä½ç½®æ¯”è¾ƒè¯¡å¼‚ï¼‰
<ul>
<li>è¿™æ„å‘³ç€ä»–ä»¬çš„ç¡¬ä»¶æœ‰å¾ˆå¤§çš„å¤ç”¨è®¾è®¡</li>
<li>SB-typeç±»å‹çš„æŒ‡ä»¤ä¸»è¦å°±æ˜¯ç”¨äºåˆ†æ”¯çš„è·³è½¬ï¼Œä»¥åŠæ¯”è¾ƒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨S-typeåŸºç¡€ä¹‹ä¸Šæ·»åŠ ä¸€ä¸ªæ–°çš„æ¯”è¾ƒç¡¬ä»¶æ¥å®ç°åˆ†æ”¯çš„æ¯”è¾ƒ</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699590935304-03e35505-5089-45d2-8029-d63ed7eb6592.png#averageHue=%23f4f4f4&amp;clientId=ue835a858-d22f-4&amp;from=paste&amp;height=55&amp;id=u9d111744&amp;originHeight=110&amp;originWidth=1078&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=73302&amp;status=done&amp;style=none&amp;taskId=ubb7b44cc-3d3d-4abb-824c-f62be4d45e7&amp;title=&amp;width=539" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>è¿™ä¸ªç¡¬ä»¶çš„ä½œç”¨å°±æ˜¯æ ¹ç»ä¸¤ä¸ªå¯„å­˜å™¨çš„å€¼ï¼ˆæ³¨æ„æ˜¯å¯„å­˜å™¨å†…çš„å€¼ï¼‰æ¥è¾“å‡ºæ¯”è¾ƒä¿¡å·
<ul>
<li>ä¸ºæˆ‘ä»¬ä¸éœ€è¦&gt;æˆ–è€…æ˜¯&gt;=çš„ä¿¡å·çº¿ï¼Œ&gt;å¯ä»¥ç”¨!&lt;= ï¼Œ&gt;=
å¯ä»¥ç”¨!&lt;</li>
<li>å“ªé‡Œæ¥å¤„ç†è¿™äº›é¢å¤–çš„æƒ…å†µå‘¢ï¼Ÿï¼ˆcontrolï¼‰</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699591071931-0753fd9f-378c-45c7-9a55-3a216da5bab6.png#averageHue=%23eeeeee&amp;clientId=ue835a858-d22f-4&amp;from=paste&amp;height=302&amp;id=u868acf8c&amp;originHeight=604&amp;originWidth=1098&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=84746&amp;status=done&amp;style=none&amp;taskId=u4bcb3225-52b5-45cd-b3ed-369a6e0dca4&amp;title=&amp;width=549" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æˆ‘ä»¬ä¸»è¦éœ€è¦å¤„ç†æ§åˆ¶é€»è¾‘
<ul>
<li>å¤šäº†å››æ¡çº¿ï¼Œä»å·¦åˆ°å³ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åˆ†æ
<ul>
<li>ç¬¬ä¸€æ¡çº¿æ‰¿è½½äº†aluè¿ç®—ä¿¡å·ï¼Œå³æ¯”è¾ƒç»“æœæˆç«‹ï¼Œè·³è½¬åˆ°PC+Immå¤„çš„åœ°å€ï¼ˆä¸ºä»€ä¹ˆè¿æ¥åˆ°DMEMå‘¢ï¼Ÿï¼‰</li>
<li>ç¬¬äºŒæ¡çº¿å°†PCæ›¿æ¢äº†RS1ï¼ŒALUä¼šæŠŠç«‹å³æ•°å’ŒPCåšç›¸åŠ è¿ç®—</li>
<li>ç¬¬ä¸‰æ¡çº¿ç”¨äºæ§åˆ¶åˆ†æ”¯æ¯”è¾ƒç»“æœæ˜¯å¦æˆç«‹ï¼Œæ¥æºäºBranch
Compç¡¬ä»¶çš„è¾“å‡ºçš„æ§åˆ¶ä¿¡å·</li>
<li>ç¬¬å››æ¡çº¿ç”¨äºæ§åˆ¶ï¼Œæˆ‘ä»¬æ˜¯éœ€è¦RS1çš„å€¼è¿˜æ˜¯PCçš„å€¼</li>
</ul></li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699591745442-ad79363a-06d9-434f-be22-329b0039f7ee.png#averageHue=%23e6e1e1&amp;clientId=ue835a858-d22f-4&amp;from=paste&amp;height=318&amp;id=ua118f616&amp;originHeight=636&amp;originWidth=1008&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=78037&amp;status=done&amp;style=none&amp;taskId=uaa7c5631-c732-40a1-a560-5213eefd9e0&amp;title=&amp;width=504" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="i-type-branch-related">I-type ï¼ˆBranch relatedï¼‰</h2>
<ul>
<li><code>JALR rd, rs, immediate</code>
<ul>
<li>è·³è½¬åˆ°PC+immï¼Œå†™å…¥PC+4 åˆ°å¯„å­˜å™¨</li>
</ul></li>
</ul>
<p><img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699593487306-ebdc7321-9e30-4101-ab8f-eb5720a28b94.png#averageHue=%23f8f8f7&amp;clientId=ue835a858-d22f-4&amp;from=paste&amp;height=75&amp;id=ue0014425&amp;originHeight=150&amp;originWidth=1036&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=72308&amp;status=done&amp;style=none&amp;taskId=ud1b52e13-3841-48e2-96b8-c6b49d42a9f&amp;title=&amp;width=518" srcset="/img/loading.gif" lazyload
alt="image.png" /> <img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699593340689-94f2b47f-7463-4f8c-a9ab-af3dd11d6f2b.png#averageHue=%23e1dfdf&amp;clientId=ue835a858-d22f-4&amp;from=paste&amp;height=311&amp;id=u1a4d69d7&amp;originHeight=622&amp;originWidth=998&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=76583&amp;status=done&amp;style=none&amp;taskId=u67415bed-646c-4df8-a9e6-e807c3b862b&amp;title=&amp;width=499" srcset="/img/loading.gif" lazyload
alt="image.png" /></p>
<ul>
<li>ç¡¬ä»¶è®¾è®¡ä¹Ÿæ˜¯åœ¨SB-Typeä¸Šç»™MUXå¤šåŠ äº†ä¸€ä¸ªæ§åˆ¶ä¿¡å·ï¼Œç”¨äºå°†PC+4çš„å€¼å†™åˆ°æŸä¸ªå¯„å­˜å™¨</li>
</ul>
<h2 id="j-type">J-type</h2>
<ul>
<li>datapathæ²¡æœ‰ä»»ä½•æ”¹å˜</li>
</ul>
<h2 id="u-type-uj-type">U-type &amp; UJ-type</h2>
<ul>
<li>datapthæ²¡æœ‰ä»»ä½•æ”¹å˜</li>
</ul>
<h2 id="final-datahpath-risc-v">Final-Datahpath-RISC-V</h2>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699593723512-ea659337-a844-4f0d-a239-742e4553ff15.png#averageHue=%23e3dfdf&amp;clientId=ue835a858-d22f-4&amp;from=paste&amp;height=308&amp;id=u92a3f7b0&amp;originHeight=616&amp;originWidth=1008&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=76569&amp;status=done&amp;style=none&amp;taskId=uef250798-8b06-469d-8ea6-4a5816e5e20&amp;title=&amp;width=504" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><p>å•æŒ‡ä»¤å‘¨æœŸCPUï¼ˆä¸€ä¸ªCLOCKå®Œæˆæ‰€æœ‰çš„äº‹æƒ…ï¼Œä»å†…å­˜ä¸­è¯»å–æŒ‡ä»¤ï¼ŒæŒ‡ä»¤è§£æï¼Œæ‰§è¡Œï¼Œè¯»å†™å†…å­˜ï¼Œè¯»å†™å¯„å­˜å™¨ï¼‰</p></li>
<li><p>è®¾è®¡å¤„ç†å™¨çš„äº”ä¸ªæ­¥éª¤ï¼š</p></li>
</ul>
<ol type="1">
<li><strong>åˆ†ææŒ‡ä»¤é›†</strong> â€”
æ ¹æ®æŒ‡ä»¤é›†åˆ†ææ•°æ®é€šè·¯éœ€æ±‚ã€‚è¿™æ¶‰åŠç†è§£å¤„ç†å™¨éœ€è¦æ‰§è¡Œçš„å„ç§æ“ä½œä»¥åŠè¿™äº›æ“ä½œå¯¹ç¡¬ä»¶çš„å…·ä½“éœ€æ±‚ã€‚</li>
<li><strong>é€‰æ‹©æ•°æ®é€šè·¯ç»„ä»¶ &amp; å»ºç«‹æ—¶é’Ÿæ–¹æ³•è®º</strong> â€”
é€‰æ‹©æ„æˆæ•°æ®é€šè·¯çš„ä¸åŒç¡¬ä»¶éƒ¨ä»¶ï¼Œå¹¶ç¡®å®šå¦‚ä½•åŒæ­¥è¿™äº›ç»„ä»¶çš„æ“ä½œï¼Œé€šå¸¸æ˜¯é€šè¿‡ä¸€ä¸ªæ—¶é’Ÿä¿¡å·ã€‚</li>
<li><strong>ç»„è£…æ»¡è¶³éœ€æ±‚çš„æ•°æ®é€šè·¯</strong> â€”
æ ¹æ®ç¬¬ä¸€æ­¥ä¸­åˆ†æå¾—å‡ºçš„éœ€æ±‚ï¼Œç»„è£…æ•°æ®é€šè·¯çš„ç¡¬ä»¶ç»„ä»¶ï¼Œç¡®ä¿å®ƒä»¬èƒ½å¤Ÿæ‰§è¡Œæ‰€æœ‰å¿…è¦çš„æŒ‡ä»¤ã€‚</li>
<li><strong>åˆ†ææ¯æ¡æŒ‡ä»¤çš„å®ç°</strong> â€”
åˆ†ææ¯æ¡æŒ‡ä»¤å¦‚ä½•å½±å“å¯„å­˜å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼Œå¹¶ç¡®å®šæ§åˆ¶ç‚¹ã€‚è¿™é€šå¸¸æ¶‰åŠæŒ‡ä»¤çš„è§£ç ä»¥åŠç¡®å®šæ•°æ®æµå‘ã€‚</li>
<li><strong>ç»„è£…æ§åˆ¶é€»è¾‘</strong></li>
</ol>
<ul>
<li><p><strong>åˆ¶å®šé€»è¾‘æ–¹ç¨‹</strong> â€”
åŸºäºæŒ‡ä»¤çš„éœ€æ±‚å’Œæ•°æ®é€šè·¯çš„åŠŸèƒ½ï¼Œåˆ›å»ºé€»è¾‘æ–¹ç¨‹å¼æ¥æ§åˆ¶æ•°æ®æµå‘ã€‚</p></li>
<li><p><strong>è®¾è®¡ç”µè·¯</strong> â€”
æ ¹æ®é€»è¾‘æ–¹ç¨‹è®¾è®¡ç”µè·¯ï¼Œè¿™äº›ç”µè·¯å°†å®ç°å¤„ç†å™¨çš„æ§åˆ¶é€»è¾‘ã€‚</p></li>
<li><p>è®¾è®¡å¤„ç†å™¨æ•°æ®é€šè·¯å’Œæ§åˆ¶ä¿¡å·çš„è®¾è®¡åŸåˆ™ã€‚</p></li>
</ul>
<ol type="1">
<li><strong>ç¡®å®šæ§åˆ¶ä¿¡å·</strong>ï¼š</li>
</ol>
<ul>
<li>å½“æ•°æ®é€šè·¯çš„æŸä¸ªå…ƒç´ æœ‰è¾“å…¥æ”¹å˜å…¶è¡Œä¸ºæ—¶ï¼ˆä¾‹å¦‚ï¼Œç®—æœ¯é€»è¾‘å•å…ƒï¼ˆALUï¼‰æ“ä½œã€è¯»/å†™æ“ä½œï¼‰ï¼Œå®ƒå°±éœ€è¦ä¸€ä¸ªæ§åˆ¶ä¿¡å·ã€‚</li>
<li>æ¯å½“ä½ éœ€è¦åŸºäºæŒ‡ä»¤ä¼ é€’ä¸åŒçš„è¾“å…¥æ—¶ï¼Œå°±è¦æ·»åŠ ä¸€ä¸ªå¸¦æœ‰æ§åˆ¶ä¿¡å·ä½œä¸ºé€‰æ‹©å™¨çš„å¤šè·¯å¤ç”¨å™¨ï¼ˆMUXï¼‰ï¼Œå¦‚ä¸‹ä¸€æ¡ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ã€ALUè¾“å…¥ã€è¦å†™å…¥çš„å¯„å­˜å™¨ç­‰ã€‚</li>
</ul>
<ol start="2" type="1">
<li><strong>æ§åˆ¶ä¿¡å·å°†åŸºäºæ‚¨çš„ç¡®åˆ‡æ•°æ®é€šè·¯è€Œå˜åŒ–</strong>ï¼š</li>
</ol>
<ul>
<li>è¿™æ„å‘³ç€æ ¹æ®æ•°æ®é€šè·¯çš„è®¾è®¡å’Œéœ€æ±‚ï¼Œæ§åˆ¶ä¿¡å·çš„è®¾ç½®ä¼šæœ‰æ‰€ä¸åŒã€‚ä¾‹å¦‚ï¼Œä¸åŒç±»å‹çš„æŒ‡ä»¤å¯èƒ½éœ€è¦ä¸åŒçš„æ§åˆ¶ä¿¡å·æ¥ç®¡ç†æ•°æ®åœ¨æ•°æ®é€šè·¯ä¸­çš„æµå‘ã€‚</li>
</ul>
<ol start="3" type="1">
<li><strong>æ•°æ®é€šè·¯å°†åŸºäºæŒ‡ä»¤é›†æ¶æ„ï¼ˆISAï¼‰è€Œå˜åŒ–</strong>ï¼š</li>
</ol>
<ul>
<li>å¤„ç†å™¨è®¾è®¡å¿…é¡»èƒ½å¤Ÿæ”¯æŒå…¶æŒ‡ä»¤é›†æ¶æ„ä¸­å®šä¹‰çš„æ‰€æœ‰æŒ‡ä»¤ã€‚å› æ­¤ï¼Œæ•°æ®é€šè·¯çš„è®¾è®¡ä¼šæ ¹æ®ISAçš„è¦æ±‚è¿›è¡Œè°ƒæ•´ï¼Œä»¥ç¡®ä¿æ‰€æœ‰æŒ‡ä»¤éƒ½å¯ä»¥è¢«æ­£ç¡®åœ°æ‰§è¡Œã€‚</li>
</ul>
<p>å¤„ç†å™¨è®¾è®¡å…·æœ‰æ¨¡å—åŒ–å’Œçµæ´»æ€§ï¼Œæ§åˆ¶é€»è¾‘éœ€è¦æ ¹æ®æŒ‡ä»¤çš„ä¸åŒè€ŒåŠ¨æ€å˜åŒ–ï¼Œä»¥ç¡®ä¿æ•°æ®é€šè·¯å¯ä»¥æ­£ç¡®åœ°æ‰§è¡ŒæŒ‡ä»¤é›†ä¸­çš„æ¯æ¡æŒ‡ä»¤ã€‚</p>
<h1 id="lectur-13-risc-v-single-cycle-control-and-pipelining">Lectur 13
RISC-V Single-Cycle Control and Pipelining</h1>
<p><a
target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2023/pdf/22918222/1699595147216-5cd0371c-3b12-41dc-96c9-95e6eae7cbaf.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F22918222%2F1699595147216-5cd0371c-3b12-41dc-96c9-95e6eae7cbaf.pdf%22%2C%22name%22%3A%22lec13.pdf%22%2C%22size%22%3A6094293%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22ubd48f122-ca26-4003-a19b-e6e1b379e5d%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22uc0d4d48f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">lec13.pdf</a></p>
<ul>
<li>å›é¡¾</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699873136535-72b696fa-7745-4770-9071-8f32bf45d9f5.png#averageHue=%23efe2ca&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=523&amp;id=ube91335d&amp;originHeight=1046&amp;originWidth=1534&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=147955&amp;status=done&amp;style=none&amp;taskId=uac2c0a93-9710-4bae-ab4c-9463a33545d&amp;title=&amp;width=767" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><p><strong>PCSel</strong>:
ç¨‹åºè®¡æ•°å™¨é€‰æ‹©ä¿¡å·ï¼Œæ§åˆ¶ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€æ¥æºï¼Œæ¯”å¦‚æ˜¯å¦æ¥è‡ªåˆ†æ”¯æŒ‡ä»¤æˆ–è€…æ­£å¸¸çš„é¡ºåºæ‰§è¡Œã€‚</p></li>
<li><p><strong>ImmSel</strong>:
ç«‹å³æ•°é€‰æ‹©ä¿¡å·ï¼Œç”¨äºæ§åˆ¶æ˜¯å¦å°†æŒ‡ä»¤ä¸­çš„éƒ¨åˆ†å­—æ®µç”¨ä½œç«‹å³æ•°ã€‚</p></li>
<li><p><strong>RegWEn</strong>:
å¯„å­˜å™¨å†™ä½¿èƒ½ä¿¡å·ï¼Œæ§åˆ¶æ˜¯å¦å°†æ•°æ®å†™å…¥å¯„å­˜å™¨æ–‡ä»¶ã€‚</p></li>
<li><p><strong>BrUn/BrEq/BrLT</strong>:
åˆ†æ”¯æŒ‡ä»¤çš„ç±»å‹ä¿¡å·ï¼Œç”¨äºåˆ¤æ–­åˆ†æ”¯æ¡ä»¶ï¼Œå¦‚æ— æ¡ä»¶åˆ†æ”¯ï¼ˆBrUnï¼‰ã€ç›¸ç­‰åˆ†æ”¯ï¼ˆBrEqï¼‰æˆ–å°äºåˆ†æ”¯ï¼ˆBrLTï¼‰ã€‚</p></li>
<li><p><strong>BSel/ASel</strong>:
Bé€‰æ‹©å’ŒAé€‰æ‹©ä¿¡å·ï¼Œå†³å®šALUçš„ä¸¤ä¸ªæ“ä½œæ•°æ¥æºï¼Œå¦‚æ˜¯å¦æ¥è‡ªå¯„å­˜å™¨æˆ–ç«‹å³æ•°ã€‚</p></li>
<li><p><strong>ALUSel</strong>:
ALUæ“ä½œé€‰æ‹©ä¿¡å·ï¼Œå†³å®šALUå°†æ‰§è¡Œå“ªç§æ“ä½œï¼Œå¦‚åŠ æ³•ã€å‡æ³•ç­‰ã€‚</p></li>
<li><p><strong>MemRW</strong>:
å†…å­˜è¯»å†™ä¿¡å·ï¼Œæ§åˆ¶æ˜¯å¯¹å†…å­˜çš„è¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œã€‚</p></li>
<li><p><strong>WBSel</strong>:
å†™å›é€‰æ‹©ä¿¡å·ï¼Œå†³å®šå†™å›é˜¶æ®µçš„æ•°æ®æ¥æºï¼Œå¦‚æ¥è‡ªALUçš„ç»“æœæˆ–å†…å­˜è¯»æ•°æ®ã€‚ ##
Control Implementation</p></li>
<li><p>13.2 for Lab3</p></li>
<li><p>æ§åˆ¶ä¿¡å·çš„æ„ä¹‰åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„æ§åˆ¶ä¿¡å·ï¼Œæ¥ä½¿å¾—åŒæ ·çš„ç¡¬ä»¶å»è¯†åˆ«å¹¶æ‰§è¡Œä¸åŒçš„æŒ‡ä»¤</p></li>
<li><p>æ¯ä¸ªæ§åˆ¶ä¿¡å·éƒ½åŸºäºfunc3å’Œfunc7æ¥ç¡®å®šå…·ä½“çš„æŒ‡ä»¤ï¼Œå¯¹äºæŸæ¡ç¡®å®šçš„æŒ‡ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¸è®¾è®¡é‚£äº›ä¸æ¶‰åŠè¯¥æ¡æŒ‡ä»¤æ§åˆ¶çš„ä¿¡å·ï¼ˆä½¿ç”¨*æ¥è¡¨ç¤ºæˆ‘ä»¬ä¸åœ¨æ„çš„æ§åˆ¶ä¿¡å·ï¼‰</p>
<ul>
<li>func7å°½ç®¡æœ‰7ä½ï¼Œä½†æˆ‘ä»¬ç›®å‰å¹¶æ²¡æœ‰å…¨éƒ¨ç”¨åˆ°ï¼›åŒç†fun3ä¹Ÿæ˜¯ï¼Œè¿™æ˜¯å¯¹æ‹“å±•æ€§çš„ä¸€ç§å…¼å®¹ã€‚</li>
<li>func7çš„é«˜5ä½å¸¸è¢«ç”¨äºåŒºåˆ†å…·æœ‰è¾ƒå¤§å·®å¼‚çš„æŒ‡ä»¤ï¼ˆæ‹“å±•æŒ‡ä»¤ï¼‰ï¼Œä¾‹å¦‚ADDå’ŒADDIç­‰â€œè·¨typeâ€çš„æŒ‡ä»¤ï¼›func3çš„é«˜ä¸¤ä½åˆ™ç”¨ä½œæ›´ç»†ç²’åº¦çš„åŒºåˆ†ï¼Œä¾‹å¦‚LBï¼ŒLHç­‰â€œtype
å†…â€çš„æ›´ä¸ºç»†ç²’åº¦çš„æ“ä½œ</li>
</ul></li>
<li><p>é€šè¿‡ADDæŒ‡ä»¤æ¥è§‚å¯Ÿä¸åŒçš„æ§åˆ¶ä¿¡å·æ˜¯å¦‚ä½•è¢«éœ€è¦ï¼Œä»¥åŠè¢«è®¾ç½®ä¸º*çš„</p></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699875737196-8e0725f3-7e76-460f-ba1c-9002d69e82f9.png#averageHue=%23efefef&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=393&amp;id=zSQop&amp;originHeight=786&amp;originWidth=1424&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=113678&amp;status=done&amp;style=none&amp;taskId=u49f1b324-ee01-42a5-8673-82d7331ffb9&amp;title=&amp;width=712" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å¾ˆæ˜æ˜¾å¯¹äºADDæ“ä½œæ¥è¯´ï¼Œæˆ‘ä»¬çš„PCSelåªéœ€è¦+4å°±å¯ä»¥äº†ï¼Œå› ä¸ºæˆ‘ä»¬çš„ADDæŒ‡ä»¤ä¸è®¾è®¡ä»»ä½•åˆ†æ”¯çš„è·³è½¬</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699875822110-0981b10b-2f5f-4d39-9128-ce0cf4e81846.png#averageHue=%23efecec&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=510&amp;id=uced3bc9f&amp;originHeight=1020&amp;originWidth=1510&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=190355&amp;status=done&amp;style=none&amp;taskId=u89ef29b7-a5dc-4dd8-b627-6922780ecec&amp;title=&amp;width=755" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ADDæ“ä½œæ˜¯é’ˆå¯¹ä¸¤ä¸ªå¯„å­˜å™¨å†…çš„å€¼è¿›è¡Œè¿ç®—å¹¶å­˜å‚¨åˆ°ç›®æ ‡å¯„å­˜å™¨çš„è¿ç®—ï¼Œå› æ­¤å¯¹äºImmSelä¿¡å·æ¥è¯´ï¼Œæˆ‘ä»¬ç›´æ¥å¿½ç•¥æ‰ï¼Œåªæœ‰æ¶‰åŠåˆ°ç«‹å³æ•°è¿ç®—çš„æ“ä½œæˆ‘ä»¬æ‰éœ€è¦å…³æ³¨è¿™ä¸ªä¿¡å·ï¼›è€Œå¯¹äºRegWEnæ¥è¯´ï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬éœ€è¦æŠŠå®ƒè®¾ç½®ä¸º1ï¼Œå› ä¸ºæˆ‘ä»¬è¦æŠŠç»“æœå†™å›åˆ°å¯„å­˜å™¨é‡Œã€‚</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699875969843-7492513d-d4b6-4c2c-b00e-6ac7a980dfd9.png#averageHue=%23f1efef&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=522&amp;id=ua830967e&amp;originHeight=1044&amp;originWidth=1526&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=139943&amp;status=done&amp;style=none&amp;taskId=uf8fb4654-8050-4d1f-bbe3-f3213021b25&amp;title=&amp;width=763" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å¾ˆæ˜æ˜¾å¯¹äºADDæ“ä½œæ¥è¯´ï¼Œæˆ‘ä»¬æ²¡æœ‰ä»»ä½•åˆ†æ”¯åˆ¤æ–­çš„æ¦‚å¿µï¼Œæˆ‘ä»¬åªæ˜¯æŠŠä¸¤ä¸ªå¯„å­˜å™¨çš„å†…å®¹è¿›è¡Œç›¸åŠ ï¼Œå› æ­¤è®¾ç½®ä¸º*</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699876046914-c7cc5590-08a7-4aab-9ead-a36adfe36eea.png#averageHue=%23f1eded&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=533&amp;id=u6cc9cc6d&amp;originHeight=1066&amp;originWidth=1648&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=187421&amp;status=done&amp;style=none&amp;taskId=u14b7ceec-be7b-447f-aba2-a1ffcd15ee2&amp;title=&amp;width=824" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å¯¹äºBSelä¿¡å·å’ŒASelä¿¡å·æ¥è¯´ï¼ŒADDæ“ä½œæ¶‰åŠåˆ°äº†ä¸¤ä¸ªå¯„å­˜å™¨çš„å€¼ç›¸åŠ ï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦ç«‹å³æ•°ï¼Œæ‰€ä»¥ASelå’ŒBSelä¸€èµ·è®¾ç½®ä¸º0æ¥é€‰æ‹©å¯„å­˜å™¨ï¼›å¯¹äºALUselæ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ALUåˆ°åº•åšäº†ä»€ä¹ˆè¿ç®—ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸ºAddï¼Œæ‰€ä»¥è®¾ç½®ä¸ºï¼Ÿ<strong>è¿™é‡Œå¤´ä¸€æ¬¡å‡ºç°äº†æˆ‘ä»¬æ— æ³•ç”¨0æˆ–1æ¥æè¿°æ‰€æœ‰æ“ä½œçš„æƒ…å†µï¼Œ</strong>å› ä¸ºALUä¸ä»…ä»…æ”¯æŒåŠ æ³•é™¤æ³•è€Œå·²ï¼Œå®é™…ä¸Šè¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ï¼Œå…·ä½“çš„å€¼å’Œæ„å»ºALUçš„è¡Œä¸ºæœ‰å…³ï¼Œæˆ‘ä»¬åªéœ€è¦ç¡®å®šæ‰€æœ‰ADDçš„æ“ä½œéƒ½ä½¿ç”¨ä¸€ä¸ªALUselå°±è¡Œã€‚</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699876654809-03039830-daba-47b7-96df-6bf7f09e04dc.png#averageHue=%23efecec&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=531&amp;id=u93db6920&amp;originHeight=1062&amp;originWidth=1554&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=195452&amp;status=done&amp;style=none&amp;taskId=u3d08720f-24c0-4d80-8e5a-8b0ff518429&amp;title=&amp;width=777" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ADDæ“ä½œä¸è®¾è®¡ä»»ä½•å¯¹RAMçš„æ“ä½œï¼Œé‚£ä¾ç…§åˆšåˆšçš„è®¾è®¡ï¼ŒMemRWä½œä¸ºæ— å…³çš„ä¿¡å·æˆ‘ä»¬å¿½ç•¥å°±å¥½ï¼Œä½†è¿™é‡Œå­˜åœ¨ä¸€ä¸ªå‡†åˆ™ï¼Œå¦‚æœæ“ä½œæ²¡æœ‰å†…å®¹éœ€è¦è¯»/å†™åˆ°å†…å­˜ï¼ŒMemRWæ°¸è¿œä¸º0ã€‚WBSelè®¾ç½®ä¸º1ï¼Œå°†ALUç»“æœè¾“å‡ºåˆ°å¯„å­˜å™¨ã€‚</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699877160929-6dc1e282-1ca4-480e-965d-212df0056ef4.png#averageHue=%23eea677&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=553&amp;id=ufaff0dc3&amp;originHeight=1106&amp;originWidth=1546&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=223072&amp;status=done&amp;style=none&amp;taskId=u4cafc32b-fd2d-4019-833d-429efe82a2c&amp;title=&amp;width=773" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><p>ç»¿è‰²ä»£è¡¨Controlæ¥æ”¶çš„ä¿¡å·è¾“å…¥ï¼Œæ©™è‰²åˆ™ä»£è¡¨è¾“å‡ºåˆ°DathPathçš„ä¿¡å·</p></li>
<li><p>æˆ‘ä»¬æœ‰ä¸¤ç§å®ç°Controlçš„æ–¹æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡ROMæ¥å­˜å‚¨ä¸Šè¿°çš„æ§åˆ¶è¡¨ï¼Œè¿™ç§æ–¹æ³•å®¹æ˜“ç¼–ç¨‹ä¸”å®¹æ˜“ä¿®æ”¹ï¼›ç¬¬äºŒç§æ˜¯é€šè¿‡CLæ¥å®ç°ï¼Œè¿™ç§æ–¹æ³•æˆæœ¬æ›´ä½ï¼Œä½†å¤æ‚åº¦æ›´é«˜ï¼Œå› ä¸ºéœ€è¦ç”µè·¯è®¾è®¡ã€‚</p>
<ul>
<li>åŸºäºROMçš„è®¾è®¡æ¥å—11ä½çš„æ§åˆ¶ä¿¡å·è¾“å…¥ï¼Œè¾“å‡º15ä½çš„æ§åˆ¶ä¿¡å·</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699877807732-68b92d67-e5b0-4100-991d-eb7dc6e7cffa.png#averageHue=%23fcfefc&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=453&amp;id=u8adba903&amp;originHeight=906&amp;originWidth=1420&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=113654&amp;status=done&amp;style=none&amp;taskId=u370a7301-ef84-4476-a5ee-34f11beaec8&amp;title=&amp;width=710" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å½“ç„¶é¦–å…ˆè¦ç»è¿‡è§£ç çš„å¤„ç†</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699877892322-0238ce83-6bff-4612-b6dc-29d46f80d837.png#averageHue=%23f5f5f5&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=444&amp;id=udde06842&amp;originHeight=888&amp;originWidth=1406&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=88994&amp;status=done&amp;style=none&amp;taskId=u27d3078e-f329-494e-b553-b5e4670b5b9&amp;title=&amp;width=703" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="performance-analysis">Performance Analysis</h2>
<ul>
<li>åœ¨æˆ‘ä»¬é€‰è´­ä¸€å°è·‘è½¦æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒçš„å¹³å‡é€Ÿåº¦èƒ½å¤Ÿå¾ˆå¿«ï¼Œä½†å¾ˆæ˜æ˜¾ä¸æ˜¯è¶Šå¿«è¶Šå¥½ï¼Œè¿™åœ¨ç‰©ç†ä¸Šä»¥åŠå®é™…ä½¿ç”¨ä¸Šéƒ½éå¸¸ä¸åˆ‡å®é™…ã€‚</li>
<li>æˆ‘ä»¬å¯¹äºæŒ‡ä»¤çš„è¦æ±‚ï¼Œå¸Œæœ›å®ƒè¶Šå¿«è¶Šå¥½ï¼Œé€Ÿåº¦è¶Šå¿«ï¼Œæˆ‘ä»¬å¯ä»¥è§£å†³è¶Šå¤šçš„é—®é¢˜ï¼Œç„¶è€Œå—åˆ¶äºç°å®ï¼Œè¿™ä¹Ÿæ˜¾å¾—ä¸åˆ‡å®é™…ã€‚å¹¶ä¸”æŒ‡ä»¤çš„æ‰§è¡Œé€Ÿåº¦ï¼Œä¹Ÿä¸æ˜¯å”¯ä¸€çš„æ€§èƒ½æŒ‡æ ‡ã€‚</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699878252553-d59ae283-e9f2-48ee-aa1e-3f7459021512.png#averageHue=%23e7d89b&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=416&amp;id=u404c315f&amp;originHeight=832&amp;originWidth=1498&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=197186&amp;status=done&amp;style=none&amp;taskId=u7c29331c-da4f-4a32-857d-75723a0477f&amp;title=&amp;width=749" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æˆ‘ä»¬æŒ‡ä»¤çš„è¿è¡Œé˜¶æ®µåˆ†ä¸ºäº”ä¸ªå‘¨æœŸï¼ŒIFï¼ˆå–æŒ‡ï¼‰ï¼ŒIDï¼ˆè¯»æŒ‡ï¼‰ï¼ŒEXï¼ˆæ‰§è¡Œï¼‰ï¼ŒMEMï¼ˆå†…å­˜è¯»å†™ï¼ŒWBï¼ˆå¯„å­˜å™¨å†™ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿè‡³å°‘ä¾ç…§ç›®å‰çš„ç†è§£ï¼ŒCPUçš„ç”µè·¯å›¾è¡¨æ˜ä¸€æ¡æŒ‡ä»¤è¦ä¹ˆæ˜¯åˆ†æ”¯æŒ‡ä»¤è¦ä¹ˆä¸æ˜¯ï¼Œå¦‚æœä¸æ˜¯é‚£ä¹ˆæ„å‘³ç€å¿…é¡»è·³è½¬åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼‰</li>
<li>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„æ˜¯IDå’ŒWBæ“ä½œè€—æ—¶æ˜¯æ¯”è¾ƒå°‘çš„ï¼ŒALUï¼ŒIFï¼ŒMEMéƒ½æ¯”è¾ƒæ…¢ã€‚</li>
</ul>
<p><span class="math inline">\(\frac{1}{800} ps = 1.25GHz\)</span></p>
<ul>
<li>RISC-Væ˜¯å•å‘¨æœŸæŒ‡ä»¤ï¼Œæ‰€ä»¥åœ¨ä¸è€ƒè™‘ä»»ä½•ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ—¶é’Ÿé¢‘ç‡æœ€å¤§ä¹Ÿåªèƒ½åœ¨1Ghzå·¦å³æµ®åŠ¨ã€‚å³1æ¡æŒ‡ä»¤éœ€è¦800psçš„æ‰§è¡Œæ—¶é—´ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæé«˜æŒ‡ä»¤çš„æ€§èƒ½ã€‚</li>
</ul>
<h3 id="performance-in-cpu">Performance in CPU</h3>
<ul>
<li>CPUçš„æ€§èƒ½æŒ‡æ ‡ä¸ä»…ä»…æ˜¯æŒ‡ä»¤çš„é€Ÿåº¦å¿«æ…¢ï¼Œæ€§èƒ½æŒ‡æ ‡ä¸é‚£ä¹ˆæ˜æ˜¾ï¼Œé€šå¸¸æ¶‰åŠåˆ°ï¼š
<ul>
<li>èƒ½æºæ¶ˆè€—</li>
<li>ç¨‹åºçš„æ‰§è¡Œæ—¶é—´èƒ½ä¸èƒ½æ›´æ…¢</li>
<li>æœåŠ¡å™¨çš„ååé‡èƒ½ä¸èƒ½æ›´é«˜</li>
</ul></li>
</ul>
<h3 id="iron-law-of-processor-performance">Iron law of Processor
Performance</h3>
<p><img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699879801599-770076e8-6630-4fd7-bfa8-cd70e68e872e.png#averageHue=%23f0eaea&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=115&amp;id=ucac88725&amp;originHeight=230&amp;originWidth=1344&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=27095&amp;status=done&amp;style=none&amp;taskId=u9221c619-db80-42e5-96a8-9e14b062d65&amp;title=&amp;width=672" srcset="/img/loading.gif" lazyload
alt="image.png" />
"å¤„ç†å™¨æ€§èƒ½çš„é“å¾‹"æ˜¯ä¸€ä¸ªåŸºç¡€å…¬å¼ï¼Œç”¨äºç†è§£æ‰§è¡Œç¨‹åºæ‰€éœ€æ—¶é—´çš„å½±å“å› ç´ ã€‚å®ƒå°†æ‰§è¡Œç¨‹åºçš„æ€»æ—¶é—´åˆ†è§£ä¸ºä¸‰ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š</p>
<ol type="1">
<li><strong>æ¯ä¸ªç¨‹åºçš„æŒ‡ä»¤æ•°</strong>ï¼šç¨‹åºåŒ…å«çš„æœºå™¨çº§æŒ‡ä»¤æ€»æ•°ã€‚</li>
<li><strong>æ¯æ¡æŒ‡ä»¤çš„å‘¨æœŸæ•°
(CPI)</strong>ï¼šå¤„ç†å™¨æ‰§è¡Œæ¯æ¡æŒ‡ä»¤å¹³å‡éœ€è¦çš„æ—¶é’Ÿå‘¨æœŸæ•°ã€‚è¿™å–å†³äºæŒ‡ä»¤çš„å¤æ‚æ€§å’Œå¤„ç†å™¨çš„æ•ˆç‡ã€‚</li>
<li><strong>æ¯ä¸ªå‘¨æœŸçš„æ—¶é—´</strong>ï¼šè¿™æ˜¯æ—¶é’Ÿå‘¨æœŸï¼Œæˆ–æ—¶é’Ÿé¢‘ç‡çš„å€’æ•°ã€‚å®ƒæ˜¯å®Œæˆä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰€éœ€çš„æ—¶é—´ã€‚</li>
</ol>
<p>è¿™ä¸‰ä¸ªå› ç´ çš„ä¹˜ç§¯ç»™å‡ºäº†æ‰§è¡Œç¨‹åºæ‰€éœ€çš„æ€»æ—¶é—´ã€‚é€šè¿‡ä¼˜åŒ–è¿™äº›å› ç´ ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå¯ä»¥æé«˜å¤„ç†å™¨æ‰§è¡Œç¨‹åºçš„æ€§èƒ½ã€‚</p>
<ul>
<li>Instructions per Program
<ul>
<li>task - å¤æ‚ä»»åŠ¡å¯èƒ½éœ€è¦æ›´å¤šçš„æŒ‡ä»¤æ•°</li>
<li>ç®—æ³• - ä¾‹å¦‚<span class="math inline">\(O(n)\)</span>å’Œ <span
class="math inline">\(O(n^2)\)</span>ï¼Œæ›´é«˜å¤æ‚åº¦çš„ç®—æ³•å¯èƒ½ä¼šç”Ÿæˆæ›´å¤šæŒ‡ä»¤</li>
<li>ç¼–è¯‘å™¨ - ç¼–è¯‘ä¼˜åŒ–</li>
<li>ISAçš„è®¾è®¡ -
æŸäº›å¤æ‚æ“ä½œåœ¨æŸäº›ISAå¯èƒ½åªéœ€è¦ä¸€æ¡æŒ‡ä»¤ï¼Œä½†åœ¨åˆ«çš„ISAå¯èƒ½éœ€è¦æ•°æ¡</li>
<li>è¾“å…¥ -
ç›´åˆ°è¾“å…¥ä¹‹å‰æˆ‘ä»¬æ˜¯ä¸çŸ¥é“ç¨‹åºä¼šè¿è¡Œå¤šä¹…ï¼ˆè¿™ä¸ªæ„Ÿè§‰å’ŒæŸä¸ªç¨‹åºçš„æŒ‡ä»¤æ•°ä¸å¤ªæ­ï¼Œä½†ä¹Ÿçš„ç¡®ä¼šå½±å“æ‰§è¡Œæ•ˆç‡ï¼‰ï¼›æ­¤å¤–ä¸€ä¸ªæ¯”è¾ƒåˆä¹çš„è§£é‡Šå°±æ˜¯ï¼Œè¾“å…¥å¯¹åŠ¨æ€æ‰§è¡ŒæŒ‡ä»¤çš„å½±å“ï¼Œè™½ç„¶æˆ‘ä»¬æœ‰å¾ˆå¤šæŒ‡ä»¤ï¼Œä½†æ˜¯è¿™äº›æŒ‡ä»¤å¹¶ä¸ä¸€å®šéƒ½ä¼šè¢«æ‰§è¡Œã€‚</li>
</ul></li>
<li>Clock cycles per Instruction ï¼ˆ CPI ï¼‰
<ul>
<li>ISAçš„è®¾è®¡ï¼Œä¾‹å¦‚å¯¹äºRISC-Væ¥è¯´ï¼Œä¸€ä¸ªå‘¨æœŸä¸€ä¸ªæŒ‡ä»¤ï¼Œè€Œå¤æ‚æŒ‡ä»¤é›†å•æ¡æŒ‡ä»¤å¯èƒ½éœ€è¦æ›´å¤šçš„å‘¨æœŸä»è€Œå¯¼è‡´æ›´å¤§çš„CPI</li>
<li>Superscalar processors ï¼Œæƒ³åŠæ³•ä»¤CPIå°äº1</li>
</ul></li>
<li>Time per Cycle
<ul>
<li>å¤„ç†å™¨çš„å¾®æ¶æ„ï¼Œä¾‹å¦‚å…³é”®è·¯å¾„ä¼šå½±å“æœ€å°å‘¨æœŸ</li>
<li>æ™¶ä½“ç®¡æŠ€æœ¯çš„æé«˜å¯ä»¥é™ä½æ—¶é’Ÿå‘¨æœŸ</li>
<li>åŠŸç‡é¢„ç®—ï¼ˆä½ç”µå‹å¸¦æ¥é•¿å‘¨æœŸï¼‰</li>
</ul></li>
<li>é’ˆå¯¹æŸä»»åŠ¡çš„åˆ†æ
<ul>
<li><span class="math inline">\(\frac{1*2.5}{2.5Ghz} &gt;
\frac{1.5*1}{2Ghz}\)</span></li>
<li>é™ä½äº†ç”µå‹ï¼ŒåŒæ—¶åˆé™ä½äº†æ‰§è¡Œæ—¶é—´ï¼Œè¿™é‡Œçš„å…³é”®å› ç´ å°±æ˜¯ï¼ŒCPIçš„å¤§å°</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699881394636-18f38318-1b90-4a76-9fbc-99d8dd476739.png#averageHue=%23cbe1bd&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=243&amp;id=u790041df&amp;originHeight=486&amp;originWidth=1428&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=81204&amp;status=done&amp;style=none&amp;taskId=u2a8a6463-2ff1-46de-a551-2f1fda393e0&amp;title=&amp;width=714" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>Energy per Task
<ul>
<li>å•ä¸ªç¨‹åºçš„èƒ½æºæ¶ˆè€—ç­‰äºå•ä¸ªç¨‹åºçš„æŒ‡ä»¤æ•°ä¹˜æ¯ä¸ªæŒ‡ä»¤æ¶ˆè€—çš„èƒ½é‡ï¼Œæ­£æ¯”äºå•ä¸ªç¨‹åºçš„æŒ‡ä»¤æ•°ä¹˜ç”µå®¹å’Œç”µå‹çš„å¹³æ–¹</li>
<li>ä¸ºäº†é™ä½å•ä¸ªä»»åŠ¡çš„èƒ½è€—ï¼Œæˆ‘ä»¬éœ€è¦é™ä½ç”µå®¹å’Œç”µå‹ï¼›ç”±äºç”µå‹æ˜¯äºŒæ¬¡æ–¹é¡¹ï¼Œé™ä½è¿™ä¸€é¡¹ç›´æ¥å½±å“èƒ½è€—ã€‚</li>
<li>æ‘©å°”å®šå¾‹æ„å‘³ç€æˆ‘ä»¬çš„CPUèƒ½è€—æ¯”è¶Šæ¥è¶Šé«˜
<ul>
<li>ç”µå®¹çš„ä¸‹é™ï¼Œç”µå‹çš„ä¸‹é™ï¼Œæ›´ä½çš„å‘çƒ­</li>
</ul></li>
</ul></li>
</ul>
<h3 id="energy-iron-law">Energy Iron Law</h3>
<p><span class="math inline">\(Performance = Power * Energy \
Efficiency\)</span></p>
<ul>
<li>åŒæ ·çš„åŠŸç‡ï¼Œè¦ä¹ˆæ„å‘³ç€å¤§åŠŸç‡ï¼Œè¦ä¹ˆæ„å‘³ç€åˆ©ç”¨ç‡æ›´é«˜çš„ç³»ç»Ÿ</li>
<li>å¯¹äºæ•°æ®ä¸­å¿ƒï¼Œæˆ‘ä»¬çš„ä¼˜å…ˆçº§æ˜¯å¸Œæœ›èƒ½å¤Ÿå¤„ç†æ›´å¤šçš„ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸æ˜¯Energy-sensitiveçš„ï¼Œä½†æ˜¯å¯¹äºç§»åŠ¨è®¾å¤‡è€Œè¨€ï¼Œæˆ‘ä»¬çš„èƒ½é‡æ˜¯æœ‰é™çš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»è¦æé«˜çš„èƒ½é‡åˆ©ç”¨æ•ˆç‡æ‰å¯ä»¥ç»´æŒä¸€å®šçš„æ•ˆèƒ½</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699930548981-08e9e571-36de-4861-9dc8-de959c4be2b5.png#averageHue=%23e5e5e5&amp;clientId=u2dfade29-2fd3-4&amp;from=paste&amp;height=356&amp;id=u54b51faa&amp;originHeight=712&amp;originWidth=1502&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=131998&amp;status=done&amp;style=none&amp;taskId=uf4eb541d-bf9b-435a-92c7-fe179062ea8&amp;title=&amp;width=751" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ç°ä»£CPUåœ¨åˆ¶ç¨‹æ–¹é¢é‡åˆ°äº†ä¸€å®šç“¶é¢ˆ
<ul>
<li>ç”µå‹è¿‡ä½å¯¼è‡´çš„æ³„æ¼é—®é¢˜ï¼Œå¼€å…³ï¼ˆgateï¼‰æ— æ³•é—­åˆï¼Œå¯¼è‡´æˆ‘ä»¬åªæœ‰1ä¸ªçŠ¶æ€</li>
<li>æ™¶ä½“ç®¡çš„ç¼©å°å˜å¾—å¾ˆå›°éš¾</li>
<li>çƒ­ç®¡ç†ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶æˆ‘ä»¬æ— æ³•ç¼©å°èŠ¯ç‰‡ï¼Œé‚£å°±æé«˜åŠŸç‡ï¼Œä½†è¿™æ„å‘³ç€æˆ‘ä»¬åœ¨éå¸¸å°çš„ç©ºé—´äº§ç”Ÿäº†å·¨å¤§çš„èƒ½é‡ï¼Œç”šè‡³å¯ä»¥èåŒ–èŠ¯ç‰‡ï¼Œé£å†·æ•£çƒ­æ˜¯æˆ‘ä»¬çš„åŠŸç‡è¢«é™åˆ¶åœ¨äº†150w
## Pipelined</li>
</ul></li>
<li>é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜Pipelinedçš„åŸç†</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699934308309-4c92395b-7970-481b-8adf-e9b0fbf1dd51.png#averageHue=%23ededed&amp;clientId=ucfeacce5-31a1-4&amp;from=paste&amp;height=456&amp;id=u1f9dac16&amp;originHeight=912&amp;originWidth=1478&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=134682&amp;status=done&amp;style=none&amp;taskId=u3b647409-6527-4ed7-88da-2f397d06a52&amp;title=&amp;width=739" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å‡è®¾æœ‰å››ä¸ªä¸åŒäººï¼Œä»–ä»¬éƒ½éœ€è¦ç”¨åˆ°æ´—è¡£æœºï¼Œçƒ˜å¹²æœºï¼Œå•æ‰€ï¼Œè€Œè¿™äº›ä¸œè¥¿åœ¨ä¸€ä¸ªå±‹å­é‡Œã€‚
<ul>
<li>æœ€ç›´æ¥çš„ç­–ç•¥å°±æ˜¯ä¸€ä¸ªäººåœ¨å±‹å­é‡Œå¤„ç†å®Œæ‰€æœ‰çš„äº‹ï¼Œç„¶åç”±ä¸‹ä¸€ä¸ªäººç»§ç»­</li>
<li>æ¯ä¸€ä¸ªä»»åŠ¡éœ€è¦2å°æ—¶æ¥å®Œæˆï¼Œå››ä¸ªä»»åŠ¡ä¸€å…±éœ€è¦8ä¸ªå°æ—¶</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699934363404-ead88815-3283-459f-bee1-33c3f4fe13ad.png#averageHue=%23f2f2f2&amp;clientId=ucfeacce5-31a1-4&amp;from=paste&amp;height=521&amp;id=u67090e73&amp;originHeight=1042&amp;originWidth=1500&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=148193&amp;status=done&amp;style=none&amp;taskId=u588a4847-ed69-4659-8de9-dbf852c96e2&amp;title=&amp;width=750" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>é€šè¿‡æœ€å¤§é™åº¦çš„èµ„æºæŠ¢å ï¼Œ3.5ä¸ªå°æ—¶å¯ä»¥å®Œæˆ4ä¸ªä»»åŠ¡</li>
<li>ä¸€ä¸ªä»»åŠ¡çš„å»¶è¿Ÿå¢åŠ äº†</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699935783698-1264667c-54ab-431b-b2b6-a9cc8fbdfeb8.png#averageHue=%23818282&amp;clientId=ucfeacce5-31a1-4&amp;from=paste&amp;height=293&amp;id=ufab29eed&amp;originHeight=586&amp;originWidth=1270&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=123531&amp;status=done&amp;style=none&amp;taskId=u6471b15f-2e13-4af0-9ac8-04ad7bc4877&amp;title=&amp;width=635" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æµæ°´çº¿çš„å»¶è¿Ÿä¹‹æ‰€ä»¥æé«˜äº†ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦ä»¥æœ€å¤§å»¶è¿Ÿæ¥è®¾ç½®æŒ‡ä»¤äº”ä¸ªé˜¶æ®µçš„æ¯ä¸€æ®µæ—¶å»¶ï¼Œå¦‚æœä¸è¿™æ ·çš„è¯æˆ‘ä»¬å¯èƒ½ä¼šè¯»å‡ºåƒåœ¾ä¿¡å·</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699936148260-68ce58f4-a05d-4a71-a314-0c98a9d7b4c6.png#averageHue=%23f9f9f9&amp;clientId=ucfeacce5-31a1-4&amp;from=paste&amp;height=238&amp;id=uc94a2c8f&amp;originHeight=476&amp;originWidth=1242&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=103620&amp;status=done&amp;style=none&amp;taskId=u28c88bf7-262d-41cc-be6a-04bff4c2754&amp;title=&amp;width=621" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>åŸæœ¬éœ€è¦ä¸²è¡Œæ‰§è¡Œçš„æŒ‡ä»¤ï¼Œç°åœ¨åœ¨ä¸€éƒ¨åˆ†æ—¶é—´ä¸Šæ˜¯å¹¶è¡Œçš„ï¼Œä½†å•ä¸ªç”µè·¯åœ¨åŒä¸€æ—¶åˆ»ä¾ç„¶æ˜¯ä¸²è¡Œçš„</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699936975492-5f153ec4-c8dc-48fd-ae24-054666dbde72.png#averageHue=%239dd06a&amp;clientId=ucfeacce5-31a1-4&amp;from=paste&amp;height=551&amp;id=ud45559a5&amp;originHeight=1102&amp;originWidth=1660&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=238240&amp;status=done&amp;style=none&amp;taskId=ucfd1e5c6-574c-4f15-8f4c-5cd07a6ca97&amp;title=&amp;width=830" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å¯¹äº<span
class="math inline">\(t_{cycle}\)</span>æ¥è¯´ï¼Œå®ƒæ˜¯å¤§äºç»™å®šå€¼çš„ï¼Œå› ä¸ºæµæ°´çº¿çš„æœ¬è´¨æ—¶æ˜¯å¯„å­˜å™¨åˆ°æ¯ä¸€ä¸ªé˜¶æ®µï¼Œå¯„å­˜å™¨ä¼šå¯¼è‡´ä¸€äº›å…¶ä»–çš„æ—¶å»¶</li>
<li>æˆ‘ä»¬å¸Œæœ›CPI&lt;1
ï¼Œä½†ç°å®çš„æƒ…å†µæ˜¯å¼•å…¥æµæ°´çº¿åå®ƒä¼šå¤§äºä¸€ï¼Œä½†è¿™å¸¦æ¥äº†æ›´é«˜çš„ååé‡</li>
<li>å…³äº<span class="math inline">\(f_s\)</span>ä¸ºä»€ä¹ˆæ˜¯<span
class="math inline">\(\frac{1}{200}\)</span>ï¼Œè®¡ç®—æ–¹å¼åº”è¯¥æ˜¯<span
class="math inline">\(\frac{æŒ‡ä»¤æ•°}{æ€»è¿è¡Œæ—¶é—´} =
\frac{5}{1000}\)</span></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699937497542-6bf6df95-3261-45e4-99df-dbdeea497e19.png#averageHue=%23eceaea&amp;clientId=ucfeacce5-31a1-4&amp;from=paste&amp;height=441&amp;id=u60b2af59&amp;originHeight=882&amp;originWidth=1506&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=205204&amp;status=done&amp;style=none&amp;taskId=ucd281340-725f-4d6b-b6dc-187acc562eb&amp;title=&amp;width=753" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å…·ä½“è€Œè¨€æˆ‘ä»¬ä¼šåœ¨è·¯å¾„ä¸Šæ·»åŠ å¯„å­˜å™¨ï¼Œç„¶åæé«˜ä¸»é¢‘ã€‚</li>
<li>è¿™é‡Œçš„æµæ°´çº¿çš„ç”µè·¯ä»¥åéœ€è¦çš„è¯åœ¨ä»”ç»†ç ”ç©¶</li>
</ul>
<h1 id="lecture-14-pipeline-hazards">Lecture 14 pipeline hazards</h1>
<ul>
<li>hazardsæ˜¯ä¸€ç§é˜»æ­¢ä¸‹ä¸€æ¡æŒ‡ä»¤ç›´æ¥è¿è¡Œçš„æƒ…å†µï¼Œæˆ‘ä»¬æœ‰ä¸‰ç§ä¸åŒçš„hazards
<ul>
<li>structural hazard</li>
<li>data hazard</li>
<li>control hazard</li>
</ul></li>
</ul>
<ol type="1">
<li>ç»“æ„å±é™© (Structural Hazard):</li>
</ol>
<ul>
<li>ç»“æ„å±é™©å‘ç”Ÿåœ¨æŸä¸ªæ‰€éœ€çš„èµ„æºæ­£åœ¨è¢«å…¶ä»–æ“ä½œæˆ–æŒ‡ä»¤å ç”¨çš„æƒ…å†µä¸‹ã€‚è¿™ç§å±é™©é€šå¸¸æ¶‰åŠåˆ°ç¡¬ä»¶èµ„æºçš„å†²çªï¼Œæ¯”å¦‚æŸä¸ªåŠŸèƒ½å•å…ƒï¼ˆå¦‚ç®—æœ¯é€»è¾‘å•å…ƒï¼‰åŒæ—¶è¢«å¤šæ¡æŒ‡ä»¤ä½¿ç”¨ã€‚</li>
<li>ä¾‹å­ï¼šå¦‚æœä¸€æ¡æŒ‡ä»¤éœ€è¦æ‰§è¡Œä¸€ä¸ªä¹˜æ³•æ“ä½œï¼Œè€Œåœ¨åŒä¸€æ—¶é’Ÿå‘¨æœŸå†…å¦ä¸€æ¡æŒ‡ä»¤ä¹Ÿéœ€è¦æ‰§è¡Œä¹˜æ³•æ“ä½œï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿç»“æ„å±é™©ï¼Œå› ä¸ºä¹˜æ³•åŠŸèƒ½å•å…ƒå¯èƒ½æ— æ³•åŒæ—¶å¤„ç†è¿™ä¸¤æ¡æŒ‡ä»¤ã€‚</li>
</ul>
<ol start="2" type="1">
<li>æ•°æ®å±é™© (Data Hazard):</li>
</ol>
<ul>
<li>æ•°æ®å±é™©å‘ç”Ÿåœ¨ä¸¤æ¡æˆ–å¤šæ¡æŒ‡ä»¤ä¹‹é—´å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»ï¼Œåä¸€æ¡æŒ‡ä»¤éœ€è¦ä¾èµ–å‰ä¸€æ¡æŒ‡ä»¤çš„ç»“æœï¼Œä½†å‰ä¸€æ¡æŒ‡ä»¤çš„ç»“æœè¿˜æ²¡æœ‰å‡†å¤‡å¥½ã€‚è¿™ç§å±é™©ä¼šå¯¼è‡´ç­‰å¾…å‰ä¸€æ¡æŒ‡ä»¤å®Œæˆå…¶æ•°æ®å†™å…¥ã€‚</li>
<li>ä¾‹å­ï¼šè€ƒè™‘ä¸€æ¡æŒ‡ä»¤è¦å°†ä¸€ä¸ªå€¼å­˜å‚¨åˆ°å†…å­˜ä¸­ï¼Œè€Œç´§éšå…¶åçš„å¦ä¸€æ¡æŒ‡ä»¤éœ€è¦è¯»å–åˆšåˆšå­˜å‚¨çš„å€¼ã€‚å¦‚æœç¬¬ä¸€æ¡æŒ‡ä»¤çš„å­˜å‚¨æ“ä½œæ²¡æœ‰å®Œæˆï¼Œç¬¬äºŒæ¡æŒ‡ä»¤å°±æ— æ³•è·å¾—æ­£ç¡®çš„æ•°æ®ï¼Œä»è€Œå¯¼è‡´æ•°æ®å±é™©ã€‚</li>
</ul>
<ol start="3" type="1">
<li>æ§åˆ¶å±é™© (Control Hazard):</li>
</ol>
<ul>
<li>æ§åˆ¶å±é™©å‘ç”Ÿåœ¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºå–å†³äºå‰ä¸€æ¡æŒ‡ä»¤çš„æ§åˆ¶æµï¼ˆå¦‚åˆ†æ”¯æˆ–è·³è½¬æŒ‡ä»¤ï¼‰ã€‚å¦‚æœå‰ä¸€æ¡æŒ‡ä»¤çš„æ¡ä»¶åˆ†æ”¯è¿˜æ²¡æœ‰è§£å†³ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡Œè·¯å¾„å¯èƒ½ä¼šå—åˆ°å½±å“ï¼Œéœ€è¦ç­‰å¾…å‰ä¸€æ¡æŒ‡ä»¤çš„åˆ†æ”¯å†³ç­–ã€‚</li>
<li>ä¾‹å­ï¼šå½“æ‰§è¡Œæ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ï¼ˆå¦‚ifè¯­å¥ï¼‰æ—¶ï¼Œå¦‚æœåˆ†æ”¯æ¡ä»¶è¿˜æ²¡æœ‰è®¡ç®—å®Œæˆï¼Œç³»ç»Ÿå¯èƒ½éœ€è¦ç­‰å¾…æ¡ä»¶è®¡ç®—å®Œæˆåæ‰èƒ½å†³å®šæ‰§è¡Œå“ªä¸ªåˆ†æ”¯ï¼Œä»è€Œå¯¼è‡´æ§åˆ¶å±é™©ã€‚</li>
</ul>
<p>è¿™äº›å±é™©ç±»å‹éƒ½ä¼šå½±å“æŒ‡ä»¤çš„æ‰§è¡Œæ•ˆç‡å’Œæµæ°´çº¿çš„ååé‡ã€‚ä¸ºäº†è§£å†³è¿™äº›å±é™©ï¼Œå¤„ç†å™¨è®¾è®¡å¸ˆé€šå¸¸ä¼šé‡‡ç”¨æŠ€æœ¯å¦‚<strong>è¶…æ ‡é‡æ‰§è¡Œ</strong>ã€<strong>æ•°æ®å‰ç»æ‰§è¡Œ</strong>ã€<strong>ä¹±åºæ‰§è¡Œ</strong>ç­‰ï¼Œä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘å±é™©çš„å½±å“ï¼Œæé«˜æŒ‡ä»¤æ‰§è¡Œçš„æ•ˆç‡ã€‚</p>
<h2 id="structure-hazards">Structure hazards</h2>
<ul>
<li>Register file
<ul>
<li>ä¸¤ç§è§£å†³æ–¹æ¡ˆä½¿å¾—å•ä¸ªå‘¨æœŸåŒæ—¶å¯¹å¯„å­˜å™¨è¯»å’Œå†™æˆç«‹ã€‚
<ul>
<li>æ„å»ºå…·æœ‰ç‹¬ç«‹è¯»å’Œå†™ç«¯å£çš„å¯„å­˜å™¨æ–‡ä»¶ã€‚è¿™æ„å‘³ç€åœ¨åŒä¸€æ—¶é’Ÿå‘¨æœŸå†…å¯ä»¥åŒæ—¶è¿›è¡Œè¯»å’Œå†™æ“ä½œï¼ˆå•çº§æµæ°´çº¿å¾ˆé€‚åˆä½¿ç”¨ï¼‰ã€‚</li>
<li>Double Pumpingç¬¬ä¸€ä¸ªåŠå‘¨æœŸçš„ä¸‹é™æ²¿å†™ï¼Œç¬¬äºŒä¸ªåŠå‘¨æœŸè¯»</li>
</ul></li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699945252928-2b3e88c1-68c3-4b63-9e36-8fafc46dd6b7.png#averageHue=%23f5f5f5&amp;clientId=ub65e741a-44e6-4&amp;from=paste&amp;height=457&amp;id=ua50dbcc8&amp;originHeight=914&amp;originWidth=1612&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=156033&amp;status=done&amp;style=none&amp;taskId=u78003dc1-24f3-4c66-b926-b104e74b9e4&amp;title=&amp;width=806" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>Memory</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699946036129-73e1a243-9808-4f2e-8113-c1906159df98.png#averageHue=%23f5f4f4&amp;clientId=ub65e741a-44e6-4&amp;from=paste&amp;height=465&amp;id=uff49a987&amp;originHeight=930&amp;originWidth=1580&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=159603&amp;status=done&amp;style=none&amp;taskId=u7c25acc5-d852-4001-bfcb-2fa57b52e99&amp;title=&amp;width=790" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>å°±ä¸€ä¸ªå†…å­˜å•å…ƒçš„è¯é‚£å°±åªèƒ½ç­‰ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«å¥½çš„æ–¹æ³•ï¼Œä½†æ˜¯Cacheä¸€å®šç¨‹åº¦ä¼šç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨IMé˜¶æ®µå¯èƒ½ä¼šä»ç¼“å­˜ä¸­æ‹¿åˆ°æ•°æ®ã€‚</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699946331006-607d95ed-c763-4f80-9ff6-18e4a2f7988f.png#averageHue=%2382a247&amp;clientId=ue4f24806-b56c-4&amp;from=paste&amp;height=381&amp;id=u85136ee4&amp;originHeight=762&amp;originWidth=1350&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=92520&amp;status=done&amp;style=none&amp;taskId=u902a1068-8a1c-4cd0-b7a2-4c2335cf36a&amp;title=&amp;width=675" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="data-hazards">Data Hazards</h2>
<ul>
<li>ä»¥Rtypeä¸ºä¾‹</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699946935232-30973a18-c0fa-40f0-a4fd-e73322d51b8a.png#averageHue=%23f6f5f5&amp;clientId=ue4f24806-b56c-4&amp;from=paste&amp;height=254&amp;id=u4da68e42&amp;originHeight=508&amp;originWidth=1420&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=165776&amp;status=done&amp;style=none&amp;taskId=ua8a9053c-f432-469e-a60d-8c551379175&amp;title=&amp;width=710" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><p>å¯¹äºç¬¬2ï¼Œ3æ¡æŒ‡ä»¤æ¥è¯´ï¼Œå®ƒä»¬ä¾èµ–äºt0å¯„å­˜å™¨çš„ç»“æœï¼Œå¦‚æœæ²¡æœ‰piplineçš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸æ˜¯é—®é¢˜ã€‚ä½†ç°åœ¨åœ¨ç¬¬ä¸€æ¡æŒ‡ä»¤è¿˜æ²¡æ‰§è¡Œå®Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„2ï¼Œ3æŒ‡ä»¤å°±å·²ç»å¼€å§‹æ‰§è¡Œäº†ã€‚è¿™ç§å‡ºç°æ•°æ®ä¾èµ–çš„æƒ…å†µå°±å«åšData
hazardsã€‚</p></li>
<li><p>ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯æµæ°´çº¿æš‚åœï¼Œä¹Ÿå«Stallingã€‚é€šè¿‡æ‰§è¡Œä¸€äº›ä¸ä¼šæ”¹å˜ä»»ä½•çŠ¶æ€çš„å‘½ä»¤ä¾‹å¦‚add
x0, x0,x0 ï¼ˆx0å¯„å­˜å™¨æ°¸è¿œæ˜¯0ï¼‰</p></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699947400307-be24e918-283d-4ac7-b5f8-05b7b73d67eb.png#averageHue=%23f6f6f6&amp;clientId=ue4f24806-b56c-4&amp;from=paste&amp;height=387&amp;id=uc1f7bccd&amp;originHeight=774&amp;originWidth=1768&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=313340&amp;status=done&amp;style=none&amp;taskId=u9f699ee8-0a49-4dc5-afac-5fb99699a48&amp;title=&amp;width=884" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ç¬¬äºŒç§å¯èƒ½çš„æ–¹æ¡ˆæ˜¯ç”±ç¼–è¯‘å™¨è¿›è¡Œçš„æŒ‡ä»¤é‡æ’ï¼Œæˆ–è€…ç”±ç¼–å†™è€…æ‰‹åŠ¨è¿›è¡Œä¼˜åŒ–</li>
<li>ç¬¬ä¸‰ç§æ–¹æ¡ˆæ˜¯æ•°æ®çš„å‰å‘ä¼ é€’ï¼Œä¾‹å¦‚å°†ALUè®¡ç®—å®Œä¹‹åç›´æ¥å°†ç»“æœä¼ é€’ç»™æµæ°´çº¿ä¸‹ä¸€æ¡æŒ‡ä»¤çš„ALUï¼Œè¿™éœ€è¦é¢å¤–çš„ç¡¬ä»¶å®ç°</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699948155875-4a57cecd-ff48-4c6d-8d88-f69b251b9fa0.png#averageHue=%23f5f0f0&amp;clientId=ue4f24806-b56c-4&amp;from=paste&amp;height=440&amp;id=ubf120bff&amp;originHeight=880&amp;originWidth=1856&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=201109&amp;status=done&amp;style=none&amp;taskId=udc57e219-4876-4249-af19-3508524570b&amp;title=&amp;width=928" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ç¡¬ä»¶åŸç†åœ¨è¿™é‡Œï¼Œéœ€è¦çš„è¯åœ¨ä»”ç»†ç ”ç©¶</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699948531102-70b1b179-9dce-4722-9c73-90b1243ee2d7.png#averageHue=%23eceaea&amp;clientId=ue4f24806-b56c-4&amp;from=paste&amp;height=508&amp;id=uc116fa26&amp;originHeight=1016&amp;originWidth=1612&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=155085&amp;status=done&amp;style=none&amp;taskId=u0b358fba-72b3-4d98-bd03-ca8e7e1b862&amp;title=&amp;width=806" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ä¸æ˜¯æ‰€æœ‰çš„data
hazardséƒ½å¯ä»¥ç”¨å‰å‘ä¼ é€’æ¥è§£å†³ï¼Œä»¥åŠ è½½æŒ‡ä»¤ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ— æ³•ç”¨å‰å‘ä¼ é€’æ¥è§£å†³ï¼Œå¿…é¡»è¦ç­‰ï¼Œè€Œä¸”å¦‚æœéè¦ä½¿ç”¨å‰å‘ä¼ é€’çš„è¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ ç¡¬ä»¶</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699949418920-83d62d2d-4d9b-4bb9-9045-10f67aa4bd3d.png#averageHue=%23f0eeee&amp;clientId=u22923803-2ba2-4&amp;from=paste&amp;height=364&amp;id=ub4bddbe9&amp;originHeight=728&amp;originWidth=1788&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=145497&amp;status=done&amp;style=none&amp;taskId=u1da15f2c-dfaa-49f4-9512-c397aba52a3&amp;title=&amp;width=894" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æš‚åœçš„æ–¹æ³•é™¤äº†æ‰§è¡ŒnopæŒ‡ä»¤å¤–ï¼Œç°ä»£å¾®å¤„ç†å™¨è¿˜æ”¯æŒç¡¬ä»¶ä¸­æ–­</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699949665278-75834907-e9bf-4099-91ae-795a3f4d1a88.png#averageHue=%23f5f4f3&amp;clientId=u22923803-2ba2-4&amp;from=paste&amp;height=427&amp;id=u9a2a9519&amp;originHeight=854&amp;originWidth=1688&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=200078&amp;status=done&amp;style=none&amp;taskId=u659d888c-991f-426a-854c-328fcfd4ae7&amp;title=&amp;width=844" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æ•ˆæœå’ŒnopæŒ‡ä»¤æ˜¯ä¸€æ ·çš„</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699949784010-51a57b07-7094-41d9-907c-f416849ca3d0.png#averageHue=%23f5f5f4&amp;clientId=u22923803-2ba2-4&amp;from=paste&amp;height=440&amp;id=u9c6caf7e&amp;originHeight=880&amp;originWidth=1706&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=186665&amp;status=done&amp;style=none&amp;taskId=u8769f648-bce7-4647-b3a6-1d303d7f3fd&amp;title=&amp;width=853" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>æ— è®ºå“ªç§æ–¹æ³•ï¼Œåªè¦å‘ç”Ÿäº†æš‚åœï¼Œé‚£æ„å‘³ç€æˆ‘ä»¬æ•ˆèƒ½çš„æŸå¤±ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è®©ç¼–è¯‘å™¨æ¥é€šè¿‡æŒ‡ä»¤é‡æ’ï¼Œä½¿å¾—é‚£äº›æœ¬æ¥éœ€è¦ä¸­æ–­æˆ–è€…æ·»åŠ nopæŒ‡ä»¤çš„ä½ç½®æ¥æ‰§è¡Œå…¶ä»–æŒ‡ä»¤</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1699950098999-806e5336-8ea6-4d6a-bd93-67fa12b1aeb9.png#averageHue=%23efecec&amp;clientId=u22923803-2ba2-4&amp;from=paste&amp;height=280&amp;id=u4d6e1904&amp;originHeight=560&amp;originWidth=1520&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=117097&amp;status=done&amp;style=none&amp;taskId=uc6d6a255-a45c-4896-81d4-ec34e385489&amp;title=&amp;width=760" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="control-hazards">Control Hazards</h2>
<ul>
<li>Pipline
ä¼šå¯¹beqæŒ‡ä»¤äº§ç”Ÿä¸€äº›å½±å“ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸ç¡®å®šè¦è·³è½¬åˆ°å“ªé‡Œï¼Œç›´åˆ°ALUç»™å‡ºå…·ä½“çš„åœ°å€
<ul>
<li>CPUå°±åƒä¸€ä¸ªè‡ªåŠ¨æœºä¸€æ ·ï¼Œä¸æ–­çš„æ‰§è¡ŒæŒ‡ä»¤ï¼Œå¯¹äºæ²¡æœ‰piplineçš„CPUï¼Œæˆ‘ä»¬çš„å–æŒ‡é˜¶æ®µæ€»ä¼šåœ¨ä¸Šä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•ä¹‹åæ‰ä¼šç»§ç»­æ‰§è¡Œï¼›è€Œå¯¹äºpiplineæ¥è¯´ï¼Œåœ¨ç¬¬ä¸€æ¡æŒ‡ä»¤è¿˜æ²¡æœ‰ç»“æŸçš„æ—¶å€™ï¼Œç¬¬äºŒæ¡æŒ‡ä»¤çš„IMå°±å¼€å§‹äº†ã€‚è€Œæ­¤æ—¶çš„PCè¿˜æ²¡æœ‰æ›´æ–°</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1700109920508-b70a7db9-6327-4e65-adb9-6151e498c7bb.png#averageHue=%23f3f1f1&amp;clientId=u29fb0314-bb32-4&amp;from=paste&amp;height=384&amp;id=ub00ec4f7&amp;originHeight=384&amp;originWidth=640&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=54841&amp;status=done&amp;style=none&amp;taskId=ue2e12ce0-498f-4436-88a7-1f2e8dc4c26&amp;title=&amp;width=640" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>åˆ†æ”¯æ§åˆ¶æŒ‡ä»¤æ˜¯åœ¨ALUé˜¶æ®µè¿›è¡Œäº†åˆ†æ”¯çš„æ¯”è¾ƒå¹¶æ›´æ–°å¯„å­˜å™¨ï¼›ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯æˆ‘ä»¬æŠŠè¿™ä¸ªæ¯”è¾ƒçš„è¿‡ç¨‹æå‰åˆ°IDé˜¶æ®µæ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥å¯ä»¥å‡å°‘ä¸€ä¸ªnopæŒ‡ä»¤ï¼›å¯¹åº”çš„ï¼Œæˆ‘ä»¬éœ€è¦æ–°çš„ç¡¬ä»¶ä»¥åŠé€»è¾‘å’Œæ§åˆ¶ä¿¡å·è®¾è®¡ï¼Œæˆ‘ä»¬å¿…é¡»å®ç°åœ¨IDé˜¶æ®µå°±å¯ä»¥æ›´æ–°PC</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1700110689060-466ec92c-f421-4ed7-bbbd-65866523218c.png#averageHue=%23f5f3f3&amp;clientId=u29fb0314-bb32-4&amp;from=paste&amp;height=465&amp;id=u53d898f0&amp;originHeight=465&amp;originWidth=955&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=77877&amp;status=done&amp;style=none&amp;taskId=u97964d72-f19f-4c61-9445-743eae74d7e&amp;title=&amp;width=955" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ç„¶è€Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆå¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨beqæŒ‡ä»¤çš„IDé˜¶æ®µå°±è¦t0çš„å€¼ï¼Œä½†ç°åœ¨è¿™ä¸ªå€¼æ‹¿ä¸åˆ°ã€‚</li>
<li>ä¼ ç»Ÿçš„æµæ°´çº¿è®¾è®¡ä¸­ï¼Œåˆ†æ”¯å†³ç­–é€šå¸¸æ˜¯åœ¨æ‰§è¡Œï¼ˆEXï¼‰é˜¶æ®µå®Œæˆçš„ã€‚è¿™æ ·ï¼Œå½“addæŒ‡ä»¤åœ¨EXé˜¶æ®µäº§ç”Ÿç»“æœæ—¶ï¼Œåç»­çš„beqæŒ‡ä»¤è¿˜æ²¡æœ‰è¿›å…¥åˆ°IDé˜¶æ®µï¼Œå› æ­¤ä¸å­˜åœ¨éœ€è¦æ•°æ®å‰é€çš„æƒ…å†µã€‚beqæŒ‡ä»¤ä¼šåœ¨addæŒ‡ä»¤å®Œæˆåçš„ä¸‹ä¸€ä¸ªæµæ°´çº¿é˜¶æ®µè‡ªç„¶åœ°ç­‰å¾…å®ƒéœ€è¦çš„æ•°æ®ã€‚ä½†æ˜¯ï¼Œå¦‚æœåˆ†æ”¯å†³ç­–è¢«æå‰åˆ°IDé˜¶æ®µï¼Œå¦‚ä¸Šä¸€å¼ PPTæ‰€å»ºè®®çš„ï¼Œé‚£ä¹ˆbeqæŒ‡ä»¤ä¼šæ›´æ—©åœ°éœ€è¦t0çš„å€¼ï¼Œè€Œè¿™ä¸ªå€¼æ­¤æ—¶è¿˜åœ¨addæŒ‡ä»¤çš„æµæ°´çº¿é˜¶æ®µä¸­è¢«è®¡ç®—ã€‚è¿™å°±å¯¼è‡´äº†ä¸€ä¸ªæ•°æ®å±å®³ï¼Œå› ä¸ºbeqæŒ‡ä»¤éœ€è¦çš„æ•°æ®è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æµæ°´çº¿ä¸­æ’å…¥æš‚åœï¼ˆstallï¼‰ï¼Œç›´åˆ°addæŒ‡ä»¤çš„ç»“æœå˜å¾—å¯ç”¨ã€‚å› æ­¤ï¼Œåªæœ‰åœ¨æˆ‘ä»¬é‡‡å–å‡å°‘åˆ†æ”¯å»¶è¿Ÿå±å®³çš„æªæ–½ï¼ˆå¦‚æå‰åˆ†æ”¯å†³ç­–åˆ°IDé˜¶æ®µï¼‰æ—¶ï¼Œè¿™ä¸ªæ•°æ®å±å®³æ‰ä¼šå‡ºç°ã€‚è¿™ä¹Ÿè¡¨æ˜ï¼Œä»»ä½•å¯¹æµæ°´çº¿æ¶æ„çš„æ”¹è¿›éƒ½éœ€è¦ç»¼åˆè€ƒè™‘ï¼Œå› ä¸ºæ”¹è¿›çš„åŒæ—¶å¯èƒ½ä¼šå¼•å…¥æ–°çš„é—®é¢˜.</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1700111492565-555aad81-477b-4769-9b22-8fb3c71162f7.png#averageHue=%23eeecec&amp;clientId=u29fb0314-bb32-4&amp;from=paste&amp;height=491&amp;id=uf7fbdfd0&amp;originHeight=491&amp;originWidth=1109&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=88237&amp;status=done&amp;style=none&amp;taskId=u7510ce08-c03f-4dfa-a80c-ceae2c7292d&amp;title=&amp;width=1109" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>ä¼¼ä¹çœ‹èµ·æ¥æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç­‰ä¸€æ®µæ—¶é—´ï¼Œæˆ–è€…åŠ å…¥ä¸€äº›æ–°çš„ç¡¬ä»¶ï¼Œåœ¨RISC-Vä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€ç§æ–°çš„æ–¹å¼ï¼Œåˆ†æ”¯é¢„æµ‹ã€‚
<ul>
<li>åˆ†æ”¯é¢„æµ‹å°±æ˜¯çŒœPCçš„å€¼ï¼Œå¦‚æœçŒœå¯¹äº†ï¼Œé‚£æˆ‘ä»¬ä¸éœ€è¦ä»»ä½•çš„åœé¡¿ï¼›çŒœé”™äº†ï¼Œé‚£å°±æ¸…ç©ºpiplineï¼Œä»è·³è½¬æŒ‡ä»¤çš„ä¸‹ä¸€æ¡ç»§ç»­æ‰§è¡Œï¼›æ›´è¯¦ç»†çš„ä¸œè¥¿å‚ç…§CS152ã€‚</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1700113062140-31d6ca35-3088-4dfd-88b8-a73e37bdd5d4.png#averageHue=%23f4f4f3&amp;clientId=u29fb0314-bb32-4&amp;from=paste&amp;height=477&amp;id=ud434e4e5&amp;originHeight=477&amp;originWidth=1154&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=54802&amp;status=done&amp;style=none&amp;taskId=ud63a6771-647e-495a-a1f0-6bd4011ba39&amp;title=&amp;width=1154" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>çœ‹èµ·æ¥é€‰Cï¼Œè€Œå®é™…ä¸Šåº”è¯¥é€‰A
<ul>
<li>lw
æŒ‡ä»¤ä»å†…å­˜ä¸­åŠ è½½äº†ä¸€ä¸ªå­—åˆ°t0ä¸­ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯¹å†…å­˜è¿›è¡Œäº†æ“ä½œï¼Œä¹Ÿå°±æ˜¯ç»“æœæœ€æ—©ä¹Ÿåªèƒ½åœ¨DMé˜¶æ®µè·å¾—ï¼Œè€ŒæŒ‡ä»¤å®Œæ•´çš„ç»“æœå°†ä¼šåœ¨ç¬¬äº”ä¸ªé˜¶æ®µæ‰ä¼šå†™åˆ°t0å¯„å­˜å™¨é‡Œï¼›
<ul>
<li><code>IF</code> -&gt;<code>ID</code>-&gt; <code>ALU</code>-&gt;
<code>DM</code>-&gt; <code>Reg</code>-&gt;
(ä»»æ„ä¸€ä¸ªé˜¶æ®µåªæœ‰åœ¨-&gt;æ‰ä¼šæ‰§è¡Œå®Œæˆï¼‰</li>
<li><pre><code class="hljs">          nop    `IF`-&gt; `ID`-&gt;  `ALU`-&gt; `DM` -&gt;`Reg` -&gt; ï¼ˆæŠŠDMçš„å€¼é€šè¿‡åå‘ä¼ é€’ç›´æ¥ç»™ALUï¼‰</code></pre>
<h2 id="spuerscalar-processors">spuerscalar processors</h2></li>
</ul></li>
</ul></li>
<li>ä¸ºäº†æ›´å¥½çš„æ•ˆèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š
<ul>
<li>æé«˜æ—¶é’Ÿé¢‘ç‡ - å—åˆ¶äºå‘çƒ­ï¼Œèƒ½è€—ï¼Œç§‘æŠ€ï¼Œä¸èƒ½å†é«˜äº†</li>
<li>æµæ°´çº¿ -
å¯ä»¥æŠŠæµæ°´çº¿åŠ æ·±ï¼Œä½†è¦å¤„ç†æ›´å¤šçš„hazardsé—®é¢˜ï¼Œä»¥åŠæ›´å¤šçš„ç¡¬ä»¶æ”¯æŒï¼Œè¿™å¯èƒ½ä¼šå¢é«˜CPI</li>
<li>è¶…æ ‡ç¨‹ï¼Œè¿™ä¹Ÿæ˜¯ç°ä»£CPUçš„ç‰¹ç‚¹</li>
</ul></li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1700117827609-08746fe7-1d88-4557-b658-05a1aeab6a10.png#averageHue=%23f6f4f3&amp;clientId=u29fb0314-bb32-4&amp;from=paste&amp;height=651&amp;id=u7f02ea14&amp;originHeight=651&amp;originWidth=1039&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=113954&amp;status=done&amp;style=none&amp;taskId=u9ad5f900-2662-42bb-9204-98ba39e1d5e&amp;title=&amp;width=1039" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>åŒä¸€æ—¶é—´å¤šæ¡æŒ‡ä»¤åŒæ—¶æ‰§è¡Œï¼Œæ±‡æ€»ç»“æœï¼Œæ·»åŠ è®¸å¤šè®¡ç®—å•å…ƒ</li>
</ul>
<h1 id="lecture-15-memory-caches-fully-associative-cache">Lecture 15
Memory &amp; Caches &amp; Fully Associative Cache</h1>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1700143593897-d7bb3b01-8d36-41aa-be60-5bbd3416db23.png#averageHue=%23f9f9f9&amp;clientId=u9c1773a6-8481-4&amp;from=paste&amp;height=561&amp;id=u6c629770&amp;originHeight=561&amp;originWidth=1067&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=80028&amp;status=done&amp;style=none&amp;taskId=u99bd636b-d419-4d9c-a91e-c1354d4ea15&amp;title=&amp;width=1067" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><p>å†…å­˜åœ°å€å°±æ˜¯æ•°ï¼Œåªä¸è¿‡æ˜¯16è¿›åˆ¶çš„</p></li>
<li><p>æ•°æ®ä»æ¥ä¸ä¼šåŒ…å«åœ¨16è¿›åˆ¶çš„åœ°å€ä¸­ï¼Œ16è¿›åˆ¶çš„åœ°å€ä»…ä»…åªæ˜¯æ ‡è¯†ä¸åŒçš„åœ°å€ï¼ŒçœŸæ­£çš„æ•°æ®å­˜åœ¨åˆ«çš„åœ°æ–¹ï¼Œå®ƒçš„å¤§å°ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬è¯´çš„æŒ‰Byteå¯»å€çš„Byte</p></li>
<li><p>Cachesçš„å­˜åœ¨æ ¹æºåœ¨äºå±€éƒ¨æ€§åŸç†çš„ä½œç”¨</p>
<ul>
<li>æ—¶é—´å±€éƒ¨æ€§åŸç†ï¼šå½“å‰è®¿é—®è¿‡çš„æŒ‡ä»¤æˆ–è€…æ•°æ®ï¼Œåœ¨ä¸‹ä¸€æ—¶é—´è¿˜æœ‰å¯èƒ½è¢«è®¿é—®åˆ°</li>
<li>ç©ºé—´å±€éƒ¨æ€§åŸç†ï¼šå½“å‰æŸä¸ªèŒƒå›´çš„æŒ‡ä»¤æˆ–è€…æ•°æ®ï¼Œåœ¨ä¸‹ä¸€æ—¶é—´è¿˜æœ‰å¯èƒ½è¢«è®¿é—®åˆ°
<ul>
<li>æˆ‘ä»¬å°†<strong>ä¸€æ®µè¿ç»­çš„åœ°å€ç©ºé—´ç§°ä¹‹ä¸ºBlock</strong>ï¼Œå±€éƒ¨æ€§åŸç†çš„ä½œç”¨å‘Šè¯‰æˆ‘ä»¬ï¼Œä¸€å°æ®µæ—¶é—´çš„è®¿é—®å¯èƒ½é›†ä¸­åœ¨æŸä¸ªå¾ˆå°çš„åœ°å€èŒƒå›´å†…ï¼Œæˆ‘ä»¬çš„Blockåˆ™å¯èƒ½å›Šæ‹¬äº†è¿™ä¸ªåœ°å€ç©ºé—´ï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦é€ ä¸€ä¸ªå’Œå†…å­˜ä¸€æ ·è´µè€Œå¤§çš„å­˜å‚¨ä»‹è´¨ï¼Œé€šè¿‡é€ ä¸€ä¸ªå¾ˆå°å®¹é‡çš„å­˜å‚¨ä»‹è´¨ï¼Œå°±å¯ä»¥åŠ é€ŸCPUæ‰§è¡ŒæŒ‡ä»¤çš„é€Ÿåº¦ã€‚</li>
</ul></li>
</ul></li>
<li><p>Cachesçš„è®¾è®¡ä¼´éšç€å››ä¸ªé‡è¦çš„é—®é¢˜</p>
<ul>
<li>æˆ‘ä»¬æ€ä¹ˆæŠŠå†…å­˜ä¸­çš„block dataæ”¾åˆ°cachesé‡Œï¼Ÿ</li>
<li>æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å†…å­˜ä¸­çš„æŸä¸ªblock dataæ—©å·²ç»åœ¨cachesé‡Œäº†ï¼Ÿ</li>
<li>æˆ‘ä»¬æ€ä¹ˆå¿«é€Ÿçš„æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„æŸä¸ªblock dataï¼Ÿ</li>
<li>å¦‚æœæˆ‘ä»¬çš„cachesæ»¡äº†ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆåŠï¼Ÿ</li>
</ul></li>
<li><p>Blocksä¸€èˆ¬æ˜¯æ²¡æœ‰å›ºå®šçš„å¤§å°çš„ï¼Œä½†ä¸€èˆ¬ä¼šç”¨å­—å¤§å°æ¥æè¿°ï¼ˆ32ä½ï¼‰</p></li>
<li><p>Cachesçš„å¤§å°ä¸€èˆ¬ä¹Ÿç”¨å­—ï¼ˆBytesï¼‰æ¥æè¿°</p></li>
<li><p>å¯¹äºFAçš„Cacheï¼Œç©ºé—´åˆ©ç”¨ç‡å¾ˆé«˜ï¼Œä¸å­˜åœ¨å¯¹é½çš„æ¦‚å¿µï¼Œä»»æ„éƒ¨åˆ†çš„å†…å­˜éƒ½å¯ä»¥å­˜åˆ°ä»»æ„Sloté‡Œ</p></li>
</ul>
<h2 id="where-do-we-put-a-block-of-data-from-memory">Where do we put a
block of data from memory?</h2>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1700143961419-ac037d15-6bbc-4808-8e3f-c05eeb11b00f.png#averageHue=%23faf8f8&amp;clientId=u9c1773a6-8481-4&amp;from=paste&amp;height=547&amp;id=ube672b5a&amp;originHeight=547&amp;originWidth=647&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=83136&amp;status=done&amp;style=none&amp;taskId=uebf6bcfd-ccd8-474a-93fd-a407215a6cf&amp;title=&amp;width=647" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li><p>æˆ‘ä»¬çš„æ•°æ®ä»¥Blockçš„å½¢å¼æ”¾åœ¨Cacheä¸­çš„æŸä¸ªç¡¬ä»¶ç»„æˆï¼ˆData
Blockï¼‰</p>
<ul>
<li>ç¼“å­˜æœ‰å¤šå°‘Blockï¼Œè¿™ç§ç¡¬ä»¶å°±æœ‰å¤šå°‘ä¸ª</li>
<li>æ¯ä¸ªData Blockéƒ½å­˜å‚¨äº†å†…å­˜ä¸­çš„ä¸€æ®µè¿ç»­å†…å®¹ ## How do we know if a
block is already in cache? <img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1700288900615-76646d1d-7d21-4f44-b753-c0013f1fbee4.png#averageHue=%23faf9f9&amp;clientId=u5feb84ce-0875-4&amp;from=paste&amp;height=550&amp;id=u5ef2bdc7&amp;originHeight=1100&amp;originWidth=1332&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=238225&amp;status=done&amp;style=none&amp;taskId=u5a7ce431-e7e6-412b-92c7-fe96ce38586&amp;title=&amp;width=666" srcset="/img/loading.gif" lazyload
alt="image.png" /></li>
</ul></li>
<li><p>æ¯å½“éœ€è¦ä»å†…å­˜ä¸­å–æ•°æ®æ—¶ï¼Œè¿™æ®µåœ°å€ä¼šè¢«è§£æä¸ºä¸¤éƒ¨åˆ†ï¼›Offsetéƒ¨åˆ†ä¼šç”¨ä½œMUXéƒ¨åˆ†ç”¨äºé€‰æ‹©åç§»é‡ï¼ŒTagåˆ™ç”¨äºåŒ¹é…å…·ä½“çš„å†…å­˜ï¼ŒVåˆ™ä¼šæ ‡å¿—è¿™ä¸ªå­—æˆ–è€…æ˜¯Byteæ˜¯ä¸æ˜¯åƒåœ¾ä¿¡å·ï¼›
## How do we quickly find a block when we need it?</p></li>
<li><p>è¿™ä¸ªç”µè·¯åœ¨æ—¶é—´ä¸Šæ˜¯å¹¶è¡Œè¿›è¡Œåœ°å€åŒ¹é…çš„ ## When do we replace
something in the cache?</p></li>
<li><p>å¸¸ç”¨çš„å°±æ˜¯LRU</p></li>
</ul>
<h2 id="fa--cache">FA- Cache</h2>
<ul>
<li>æ€»bitsè¡¨ç¤º
<ul>
<li><span class="math inline">\(\frac{Cache\ Size(Byte)}{num \
block}*(8*2^{Offset}+Tag+1+?)\)</span>
<ul>
<li>8ä»£è¡¨äº†æˆ‘ä»¬Cacheæœ€åŸºæœ¬çš„å¤§å°Byteï¼Œä¸€ä¸ªByteæ˜¯8ä½ï¼Œå› æ­¤<span
class="math inline">\(8*2^{Offset}\)</span>å°±è¡¨ç¤ºäº†æˆ‘ä»¬çš„ä¸€ä¸ªç¼“å­˜å—éœ€è¦å¤šå°‘ä½ï¼Œ<span
class="math inline">\(2^{Offset}\)</span>åˆ™ä»£è¡¨æˆ‘ä»¬çš„ä¸€ä¸ªç¼“å­˜å—æœ‰å¤šå°‘å­—èŠ‚</li>
<li>Tagå…¶å®å°±æ˜¯å†…å­˜åœ°å€çš„é«˜ä½ï¼Œç”¨äºç¡®å®šåˆ°åº•æ˜¯å†…å­˜ä¸­çš„å“ªä¸ªBlock</li>
<li>1æ˜¯æ˜¯å¦åƒåœ¾æ–°çš„æ ‡å¿—ä½</li>
<li>ï¼Ÿå­˜å‚¨ä¸€äº›é¢å¤–çš„Bitsä¾‹å¦‚LRUBits</li>
</ul></li>
</ul></li>
</ul>
<h2 id="cache-access">Cache Access</h2>
<ul>
<li>åˆ°ç›®å‰ä¼¼ä¹ä¸€åˆ‡éƒ½çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬å›é¿äº†ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼ŒCacheçš„å†™ä»¥åŠç”±æ­¤å¼•å‘çš„é—®é¢˜</li>
</ul>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1700295420849-395dcedd-268f-4e1d-b7bc-3edf482fe1d9.png#averageHue=%23efefef&amp;clientId=u5feb84ce-0875-4&amp;from=paste&amp;height=368&amp;id=ubc637d4c&amp;originHeight=736&amp;originWidth=1020&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=51692&amp;status=done&amp;style=none&amp;taskId=uc7647aca-74ed-4d6c-9f95-fdf2e2e2722&amp;title=&amp;width=510" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>Cacheæ˜¯ç‹¬ç«‹äºå†…å­˜çš„ï¼Œä½†æ˜¯å®ƒæœ‰ç‹¬ç«‹çš„æ•°æ®å—ï¼Ÿ
<ul>
<li>æ²¡æœ‰ï¼Œä½†æ˜¯Cacheçš„æ•°æ®ç‰ˆæœ¬å’ŒRAMå¯èƒ½æ˜¯ä¸ä¸€è‡´çš„ï¼Œä¸ºäº†å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å®šçš„è§„èŒƒ</li>
</ul></li>
<li>Cacheç°ä»£ä¸€èˆ¬ä¼šåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯æŒ‡ä»¤çš„çš„ç¼“å­˜I<span
class="math inline">\(ï¼Œä¸€éƒ¨åˆ†æ˜¯æ•°æ®çš„ç¼“å­˜\)</span>Dï¼Œä¸¤è€…éƒ½å…è®¸è¯»ï¼Œä½†æ˜¯åªæœ‰<span
class="math inline">\(Då…è®¸å†™ï¼Œå› æ­¤æˆ‘ä»¬å¸¸è¯´çš„ç¼“å­˜å’Œä¸»å­˜ä¸€æ‰§æ€§é—®é¢˜ä¸»è¦ä½“ç°åœ¨\)</span>Dä¸Š(I$ä¹Ÿæ„å‘³ç€è‡ªä¿®æ”¹ä»£ç ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¼šå¿½ç•¥æ‰å®ƒï¼‰</li>
</ul>
<h3 id="cache-write-hits">Cache Write hits</h3>
<ul>
<li><p>å¯¹äºCache Read hitsæˆ‘ä»¬æ€»å¸Œæœ›å®ƒå‘½ä¸­ï¼Œå¯¹äºå†™åˆ™ä¸ä¸€å®š</p></li>
<li><p><strong>Write-Through Policy</strong></p>
<ul>
<li>è¿™ç§ç­–ç•¥è¦æ±‚æˆ‘ä»¬æ¯æ¬¡çš„å†™æ“ä½œéƒ½éœ€è¦æˆ‘ä»¬åŒæ—¶å†™åˆ°Cacheå’ŒRAMä¸­ï¼Œè¿™ç§æ–¹æ³•ä¿è¯äº†Cacheå’ŒRAMçš„ä¸€è‡´æ€§ï¼Œæ¶ˆé™¤äº†ä¸åŒç‰ˆæœ¬çš„æ•°æ®ï¼Œä½†é€Ÿåº¦å¾ˆæ…¢ï¼Œå› ä¸ºRAMå¾ˆæ…¢ï¼ˆæˆ‘ä»¬åœ¨è¯´Write
though policyæ—¶ä¸€èˆ¬éƒ½ä¼šå‡å®šWrite
Bufferçš„å­˜åœ¨ï¼Œä¹Ÿå°±æ„å‘³ç€å¤„ç†å™¨å¯ä»¥ä¸éœ€è¦ç­‰å¾…å®Œæ•´çš„å†™æ“ä½œï¼‰</li>
</ul></li>
<li><p><strong>Write-Back Policy</strong></p>
<ul>
<li>è¿™ç§ç­–ç•¥çš„å†™ä¼šä¼˜å…ˆå†™åˆ°ç¼“å­˜é‡Œï¼Œå½“ä¸”ä»…å½“ç¼“å­˜ä¸­çš„æ•°æ®è¦è¢«æ·˜æ±°æ‰æ—¶ï¼Œæ‰ä¼šå†™å…¥åˆ°å†…å­˜ä¸­ã€‚å¦å¤–ä¹Ÿä¸æ˜¯æ‰€æœ‰çš„ç¼“å­˜ä¸­è¢«æ·˜æ±°æ‰çš„å†…å®¹ä¼šè¢«å†™åˆ°å†…å­˜ä¸­ï¼Œå½“ä¸”ä»…å½“å‘ç”Ÿäº†Write-Hits
ï¼ˆè„ï¼‰çš„æ•°æ®åœ¨è¢«æ·˜æ±°çš„æ—¶å€™ï¼Œæ‰ä¼šå†™å…¥åˆ°å†…å­˜ã€‚</li>
</ul></li>
</ul>
<h3 id="cache-wirte-miss">Cache Wirte miss</h3>
<ul>
<li><strong>æœªå‘½ä¸­æƒ©ç½š</strong>éšç€å—å¤§å°çš„å¢åŠ è€Œå¢åŠ ï¼Œå› ä¸ºéœ€è¦ç§»åŠ¨æ›´å¤šçš„æ•°æ®ã€‚</li>
</ul>
<ol type="1">
<li><strong>è¯»å–æœªå‘½ä¸­ï¼ˆI$ å’Œ D$ï¼‰</strong>ï¼š
<ul>
<li>æ‰§è¡Œè¢«æš‚åœï¼Œä»å†…å­˜ä¸­å–å‡ºæ•°æ®å—ï¼Œæ”¾å…¥ç¼“å­˜ï¼Œç„¶åæ¢å¤æ‰§è¡Œã€‚</li>
</ul></li>
<li><strong>å†™å…¥æœªå‘½ä¸­ï¼ˆD$ï¼‰</strong>ï¼š
<ul>
<li>æ€»æ˜¯éœ€è¦ä»å†…å­˜ä¸­æ›´æ–°å—ã€‚</li>
<li>åœ¨è¿™ç§æƒ…å†µä¸‹éœ€è¦åšå‡ºé€‰æ‹©ï¼š
<ul>
<li>æ˜¯å¦å°†æ›´æ–°åçš„å—è½½å…¥ç¼“å­˜ä¸­ï¼Œè¿™å–å†³äºæ‰€é‡‡ç”¨çš„å…·ä½“ç­–ç•¥å’Œç³»ç»Ÿçš„è®¾è®¡ã€‚</li>
<li><strong>Write
Allocateç­–ç•¥</strong>ï¼šåœ¨å†™å…¥æœªå‘½ä¸­åï¼Œå°†æ•°æ®å—å¸¦å…¥ç¼“å­˜ã€‚è¿™æ„å‘³ç€å½“å°è¯•å†™å…¥ä¸€ä¸ªä¸åœ¨ç¼“å­˜ä¸­çš„åœ°å€æ—¶ï¼Œé¦–å…ˆå°†å¯¹åº”çš„å†…å­˜å—åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼Œç„¶ååœ¨ç¼“å­˜ä¸­è¿›è¡Œå†™æ“ä½œã€‚è¿™ç§ç­–ç•¥é€šå¸¸ä¸å†™å›ï¼ˆWrite-Backï¼‰ç­–ç•¥ç»“åˆä½¿ç”¨ã€‚å¦‚æœæŸä¸ªå†…å­˜åœ°å€ä¼šè¢«é¢‘ç¹è®¿é—®å’Œä¿®æ”¹ï¼Œé‚£ä¹ˆå°†å…¶åŠ è½½åˆ°ç¼“å­˜ä¸­å¯ä»¥å‡å°‘æœªæ¥å¯¹è¯¥åœ°å€çš„å†™å…¥æ“ä½œå¯¹æ€§èƒ½çš„å½±å“ã€‚</li>
<li><strong>No Write
Allocateç­–ç•¥</strong>ï¼šåœ¨å†™å…¥æœªå‘½ä¸­åï¼Œä¸å°†æ•°æ®å—å¸¦å…¥ç¼“å­˜ï¼Œè€Œåªæ˜¯ä¿®æ”¹ä¸»å†…å­˜ä¸­çš„æ•°æ®ã€‚è¿™ç§ç­–ç•¥é€šå¸¸ä¸å†™é€šï¼ˆWrite-Throughï¼‰ç­–ç•¥ç»“åˆä½¿ç”¨ã€‚å¯¹äºä¸å¤ªé¢‘ç¹æˆ–éšæœºçš„å†™å…¥æ“ä½œï¼Œè¿™ç§ç­–ç•¥å¯ä»¥é¿å…ç¼“å­˜çš„ä¸å¿…è¦æ›´æ–°ï¼Œå› ä¸ºè¿™äº›æ•°æ®å¯èƒ½ä¸ä¼šå†è¢«éœ€è¦ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦å°†å®ƒä»¬è½½å…¥ç¼“å­˜ã€‚
# Lab ## Lab 0</li>
</ul></li>
</ul></li>
</ol>
<ul>
<li>å¸¸ç”¨çš„Cliå¿«æ·é”®
<ul>
<li><code>ctrl+u</code> åˆ é™¤æ•´è¡Œ</li>
<li><code>ctrl+a</code> ç§»åŠ¨åˆ°è¡Œé¦–</li>
<li><code>ctrl+e</code> ç§»åŠ¨åˆ°è¡Œå°¾</li>
<li><code>ctrl+r</code> æŸ¥è¯¢è¿‘æœŸçš„å‘½ä»¤<br />
</li>
</ul></li>
<li>æ–‡ä»¶æ“ä½œ
<ul>
<li>åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ <code>touch a.txt</code></li>
<li>å†™å…¥ä¸€äº›å†…å®¹ <code>echo "hello world" &gt; a.txt</code></li>
<li>æŸ¥çœ‹æ–‡ä»¶å†…å®¹ <code>cat a.txt</code></li>
<li>æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶å†…å®¹çš„å·®åˆ« <code>diff a b</code></li>
</ul></li>
<li>æŸ¥çœ‹å‘½ä»¤æ‰‹å†Œï¼Œä»¥echoä¸ºä¾‹
<ul>
<li><code>man echo | less</code></li>
</ul></li>
<li>Vim</li>
<li>Git</li>
</ul>
<h2 id="lab-1">Lab 1</h2>
<ul>
<li><p>task1 é€šè¿‡ä¿®æ”¹eccentric.cä¸­çš„å®å¾—åˆ°å¦‚ä¸‹çš„è¾“å‡º <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">Berkeley eccentrics:<br>====================<br>Happy Happy Happy<br>Yoshua<br>Go BEARS!<br></code></pre></td></tr></table></figure>
æ²¡ä»€ä¹ˆéš¾åº¦ï¼Œå°±æ˜¯åˆå¿˜äº†gccå’‹ç¼–è¯‘äº† <img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1697976846675-2f8a02bc-3ecb-487e-a606-68d01a7e5796.png#averageHue=%23252525&amp;clientId=ufd2320c2-d23e-4&amp;from=paste&amp;height=110&amp;id=u99adfdbe&amp;originHeight=220&amp;originWidth=936&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=46345&amp;status=done&amp;style=none&amp;taskId=u99be2b0a-29fb-4fe6-a937-7e08d7eac1a&amp;title=&amp;width=468" srcset="/img/loading.gif" lazyload
alt="image.png" /></p></li>
<li><p>task2 ç”¨gdb</p></li>
</ul>
<ol type="1">
<li><p>While youâ€™re in a gdb session, how do you <strong>set the
arguments</strong> that will be passed to the program when itâ€™s
run?</p></li>
<li><p>How do you <strong>create a breakpoint</strong>?</p></li>
<li><p>How do you <strong>execute the next line of C code</strong> in
the program after stopping at a breakpoint?</p></li>
<li><p>If the next line of code is a function call, youâ€™ll execute the
whole function call at once if you use your answer to #3. (If not,
consider a different command for #3!) How do you tell GDB that you
<strong>want to debug the code inside the function</strong> (i.e. step
into the function) instead? (If you changed your answer to #3, then that
answer is most likely now applicable here.)</p></li>
<li><p>How do you <strong>continue the program after stopping</strong>
at a breakpoint?</p></li>
<li><p>How can you <strong>print the value of a variable</strong> (or
even an expression like 1+2) in gdb?</p></li>
<li><p>How do you configure gdb so it <strong>displays the value of a
variable after every step</strong>?</p></li>
<li><p>How do you <strong>show a list of all variables and their
values</strong> in the current function?</p></li>
<li><p>How do you <strong>quit</strong> out of gdb?</p></li>
<li><p>use <code>set args arg1 arg2 arg3</code></p></li>
<li><p>use <code>break file.c:2</code></p></li>
<li><p><code>step</code> or <code>next</code>, but for stander fuc like
"printf" ,do not use step but next, cz stander func has no source code,
major of cases they are very low-level</p></li>
<li><p><code>step</code></p></li>
<li><p><code>continue</code></p></li>
<li><p><code>print a+b</code> and a or b respents the real
variables.</p></li>
<li><p>use <code>display a</code>, and <code>undisplay a</code>
cancel.</p></li>
<li><p><code>info locals</code></p></li>
<li><p><code>exit</code></p></li>
</ol>
<ul>
<li><p>task3 é‡å®šå‘</p>
<ul>
<li>./task &lt; input.out</li>
<li>run &lt; input.out &gt; output.out</li>
</ul></li>
<li><p>task4 Valgrind</p></li>
<li><p>task5 å›ç¯é“¾è¡¨ <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">ll_has_cycle</span><span class="hljs-params">(node *head)</span> &#123;<br>    node* fast = head;<br>    node* slow = head;<br>    <span class="hljs-keyword">while</span>(fast!=<span class="hljs-literal">NULL</span>&amp;&amp;fast-&gt;next!=<span class="hljs-literal">NULL</span>)&#123;<br>        fast = fast-&gt;next-&gt;next;<br>        slow = slow-&gt;next;<br>        <span class="hljs-keyword">if</span>(fast == slow)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></p></li>
</ul>
<h2 id="lab-2">Lab 2</h2>
<ul>
<li>Makefile è§£é‡Š</li>
</ul>
<ol type="1">
<li><p>Which target is part of a rule that deletes all the compiled
programs?</p></li>
<li><p>Which target is part of a rule that makes all the compiled
programs?</p></li>
<li><p>Which compiler is currently being used?</p></li>
<li><p>What C standard are we currently using?</p></li>
<li><p>How would we reference a variable FOO in a makefile?</p></li>
<li><p>What operating system does the term â€œDarwinâ€ represent?</p></li>
<li><p>What line creates the lfsr program from its object files? (Give
its line number.)</p></li>
<li><p>åˆ é™¤æ‰€æœ‰å·²ç¼–è¯‘ç¨‹åºçš„è§„åˆ™çš„ç›®æ ‡æ˜¯
<code>clean</code>ã€‚å®ƒç”¨äºæ¸…ç†å’Œåˆ é™¤ç”Ÿæˆçš„æ–‡ä»¶ã€‚</p></li>
<li><p>åˆ¶ä½œæ‰€æœ‰å·²ç¼–è¯‘ç¨‹åºçš„è§„åˆ™çš„ç›®æ ‡æ˜¯
<code>all</code>ã€‚è¿™æ˜¯é»˜è®¤ç›®æ ‡ï¼Œè¿è¡Œ <code>make</code>
è€Œä¸æŒ‡å®šç›®æ ‡å°†æ„å»ºæ‰€æœ‰å·²ç¼–è¯‘ç¨‹åºã€‚</p></li>
<li><p>å½“å‰æ­£åœ¨ä½¿ç”¨çš„ç¼–è¯‘å™¨æ˜¯ <code>gcc</code>ï¼Œå¦‚ <code>CC</code>
å˜é‡ä¸­æ‰€æŒ‡å®šçš„ã€‚</p></li>
<li><p>å½“å‰æ­£åœ¨ä½¿ç”¨çš„Cæ ‡å‡†æ˜¯C99ï¼Œå¦‚<code>CFLAGS</code>å˜é‡ä¸­çš„<code>-std=c99</code>æ ‡å¿—æ‰€æŒ‡å®šã€‚</p></li>
<li><p>è¦åœ¨Makefileä¸­å¼•ç”¨å˜é‡ <code>FOO</code>ï¼Œä½¿ç”¨ <code>$(FOO)</code>
è¡¨ç¤ºã€‚</p></li>
</ol>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-comment"># 1. Variables and conditionals</span><br>UNAME_S := <span class="hljs-variable">$(<span class="hljs-built_in">shell</span> uname -s)</span><br>CC=gcc<br>LD=gcc<br>CFLAGS=-ggdb -Wall -std=c99<br>LDFLAGS=<br><br><span class="hljs-keyword">ifeq</span> (<span class="hljs-variable">$(UNAME_S)</span>, Darwin)<br>    MEMCHECK=valgrind --tool=memcheck --leak-check=full --track-origins=yes --dsymutil=yes --suppressions=osx_vector.supp<br><span class="hljs-keyword">endif</span><br><br><span class="hljs-keyword">ifeq</span> (<span class="hljs-variable">$(UNAME_S)</span>, Linux)<br>    MEMCHECK=valgrind --tool=memcheck --leak-check=full --track-origins=yes<br><span class="hljs-keyword">endif</span><br><br><span class="hljs-comment"># 2. Targets and their object files</span><br>BIT_OPS_OBJS = bit_ops.o test_bit_ops.o<br>BIT_OPS_PROG = bit_ops<br><br>LFSR_OBJS = lfsr.o test_lfsr.o<br>LFSR_PROG = lfsr<br><br>VECTOR_OBJS=vector.o vector_test.o<br>VECTOR_PROG=vector_test<br><br>LIST_OBJS=test_list.o list.o<br>LIST_PROG=list<br><br>BINARIES=<span class="hljs-variable">$(VECTOR_PROG)</span> <span class="hljs-variable">$(BIT_OPS_PROG)</span> <span class="hljs-variable">$(LFSR_PROG)</span> <span class="hljs-variable">$(LIST_PROG)</span><br><br><span class="hljs-comment"># 3. Compilation and linking rules</span><br><span class="hljs-section">all: <span class="hljs-variable">$(BINARIES)</span></span><br><br><span class="hljs-variable">$(BIT_OPS_PROG)</span>: <span class="hljs-variable">$(BIT_OPS_OBJS)</span><br>	<span class="hljs-variable">$(CC)</span> <span class="hljs-variable">$(CFLAGS)</span> -g -o <span class="hljs-variable">$(BIT_OPS_PROG)</span> <span class="hljs-variable">$(BIT_OPS_OBJS)</span> <span class="hljs-variable">$(LDFLAGS)</span><br><br><span class="hljs-variable">$(LFSR_PROG)</span>: <span class="hljs-variable">$(LFSR_OBJS)</span><br>	<span class="hljs-variable">$(CC)</span> <span class="hljs-variable">$(CFLAGS)</span> -g -o <span class="hljs-variable">$(LFSR_PROG)</span> <span class="hljs-variable">$(LFSR_OBJS)</span> <span class="hljs-variable">$(LDFLAGS)</span><br><br><span class="hljs-variable">$(VECTOR_PROG)</span>: <span class="hljs-variable">$(VECTOR_OBJS)</span><br>	<span class="hljs-variable">$(CC)</span> <span class="hljs-variable">$(CFLAGS)</span> -g -o <span class="hljs-variable">$(VECTOR_PROG)</span> <span class="hljs-variable">$(VECTOR_OBJS)</span> <span class="hljs-variable">$(LDFLAGS)</span><br><br><span class="hljs-variable">$(LIST_PROG)</span>: <span class="hljs-variable">$(LIST_OBJS)</span><br>	<span class="hljs-variable">$(CC)</span> <span class="hljs-variable">$(CFLAGS)</span> -g -o <span class="hljs-variable">$(LIST_PROG)</span> <span class="hljs-variable">$(LIST_OBJS)</span> <span class="hljs-variable">$(LDFLAGS)</span><br><br><span class="hljs-section">.c.o:</span><br>	<span class="hljs-variable">$(CC)</span> -c <span class="hljs-variable">$(CFLAGS)</span> <span class="hljs-variable">$&lt;</span><br><br><span class="hljs-section">vector-memcheck: <span class="hljs-variable">$(VECTOR_PROG)</span></span><br>	<span class="hljs-variable">$(MEMCHECK)</span> ./<span class="hljs-variable">$(VECTOR_PROG)</span><br><br><span class="hljs-comment"># 4. Header dependencies</span><br><span class="hljs-section">lfsr.c: lfsr.h</span><br><span class="hljs-section">test_lfsr.c: lfsr.h</span><br><br><span class="hljs-section">bit_ops.c: bit_ops.h</span><br><span class="hljs-section">test_bit_ops.c: bit_ops.h</span><br><br><span class="hljs-section">vector.c: vector.h</span><br><span class="hljs-section">vector_test.c: vector.h</span><br><br><span class="hljs-section">list.c: list.h</span><br><span class="hljs-section">list_test.c: list.h</span><br><br><span class="hljs-comment"># 5. Other commands</span><br><span class="hljs-section">clean:</span><br>	-rm -rf core *.o *~ <span class="hljs-string">&quot;#&quot;</span>*<span class="hljs-string">&quot;#&quot;</span> Makefile.bak <span class="hljs-variable">$(BINARIES)</span> *.dSYM<br><br></code></pre></td></tr></table></figure>
<ol type="1">
<li><code>UNAME_S := $(shell uname -s)</code>ï¼šè¿™ä¸€è¡Œä½¿ç”¨<code>uname -s</code>å‘½ä»¤æ¥è·å–å½“å‰æ“ä½œç³»ç»Ÿçš„åç§°ï¼Œå¹¶å°†å…¶ä¿å­˜åœ¨<code>UNAME_S</code>å˜é‡ä¸­ã€‚</li>
<li>å®šä¹‰ä¸€äº›ç¼–è¯‘å™¨å’Œç¼–è¯‘é€‰é¡¹çš„å˜é‡ï¼š</li>
</ol>
<ul>
<li><code>CC</code>ï¼šCç¼–è¯‘å™¨ï¼Œè®¾ç½®ä¸º<code>gcc</code>ã€‚</li>
<li><code>LD</code>ï¼šé“¾æ¥å™¨ï¼Œä¹Ÿè®¾ç½®ä¸º<code>gcc</code>ã€‚</li>
<li><code>CFLAGS</code>ï¼šç¼–è¯‘å™¨é€‰é¡¹ï¼ŒåŒ…æ‹¬<code>-ggdb</code>ï¼ˆç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼‰ã€<code>-Wall</code>ï¼ˆæ˜¾ç¤ºè­¦å‘Šï¼‰ã€<code>-std=c99</code>ï¼ˆä½¿ç”¨C99æ ‡å‡†ï¼‰ç­‰ã€‚</li>
<li><code>LDFLAGS</code>ï¼šé“¾æ¥å™¨é€‰é¡¹ï¼Œç›®å‰ä¸ºç©ºï¼Œå¯ä»¥ç”¨äºæ·»åŠ é“¾æ¥é€‰é¡¹ã€‚</li>
</ul>
<ol start="3" type="1">
<li>æ ¹æ®æ“ä½œç³»ç»Ÿè®¾ç½®<code>MEMCHECK</code>å˜é‡ï¼Œç”¨äºåœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œå†…å­˜æ£€æŸ¥å·¥å…·ï¼ˆValgrindï¼‰æ—¶ä½¿ç”¨ä¸åŒçš„é€‰é¡¹ã€‚åœ¨Darwinï¼ˆmacOSï¼‰ä¸Šï¼Œè®¾ç½®äº†ä¸€ç»„é€‰é¡¹ï¼Œè€Œåœ¨Linuxä¸Šè®¾ç½®äº†å¦ä¸€ç»„é€‰é¡¹ã€‚</li>
<li>å®šä¹‰äº†ä¸‰ä¸ªç›®æ ‡çš„ç›¸å…³å˜é‡ï¼š</li>
</ol>
<ul>
<li><code>BIT_OPS_OBJS</code>ï¼šç”¨äºå­˜å‚¨ä¸ä½æ“ä½œç›¸å…³çš„ç›®æ ‡æ–‡ä»¶çš„åç§°ã€‚</li>
<li><code>LFSR_OBJS</code>ï¼šç”¨äºå­˜å‚¨ä¸çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ç›¸å…³çš„ç›®æ ‡æ–‡ä»¶çš„åç§°ã€‚</li>
<li><code>VECTOR_OBJS</code>ï¼šç”¨äºå­˜å‚¨ä¸å‘é‡æ“ä½œç›¸å…³çš„ç›®æ ‡æ–‡ä»¶çš„åç§°ã€‚</li>
</ul>
<ol start="5" type="1">
<li>å®šä¹‰äº†ä¸‰ä¸ªå¯æ‰§è¡Œç¨‹åºçš„åç§°ï¼š</li>
</ol>
<ul>
<li><code>BIT_OPS_PROG</code>ï¼šä½æ“ä½œç›¸å…³çš„å¯æ‰§è¡Œç¨‹åºåç§°ã€‚</li>
<li><code>LFSR_PROG</code>ï¼šçº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ç›¸å…³çš„å¯æ‰§è¡Œç¨‹åºåç§°ã€‚</li>
<li><code>VECTOR_PROG</code>ï¼šå‘é‡æ“ä½œç›¸å…³çš„å¯æ‰§è¡Œç¨‹åºåç§°ã€‚</li>
</ul>
<ol start="6" type="1">
<li>å®šä¹‰äº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰å¯æ‰§è¡Œç¨‹åºåç§°çš„å˜é‡<code>BINARIES</code>ã€‚</li>
<li><code>all: $(BINARIES)</code>ï¼šè¿™æ˜¯é»˜è®¤ç›®æ ‡ï¼Œè¡¨ç¤ºè¿è¡Œ<code>make</code>å‘½ä»¤æ—¶å°†æ„å»ºæ‰€æœ‰çš„å¯æ‰§è¡Œç¨‹åºã€‚</li>
<li>ä¸‹é¢æ˜¯å„ä¸ªå¯æ‰§è¡Œç¨‹åºçš„æ„å»ºè§„åˆ™ã€‚æ¯ä¸ªè§„åˆ™æŒ‡å®šäº†å¯æ‰§è¡Œç¨‹åºçš„ä¾èµ–é¡¹ï¼ˆç›®æ ‡æ–‡ä»¶ï¼‰å’Œå¦‚ä½•æ„å»ºå®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œ<code>$(BIT_OPS_PROG)</code>çš„æ„å»ºè§„åˆ™åŒ…æ‹¬å°†<code>$(BIT_OPS_OBJS)</code>é“¾æ¥åˆ°ä¸€èµ·ï¼Œç„¶åä½¿ç”¨æŒ‡å®šçš„ç¼–è¯‘å™¨å’Œé€‰é¡¹ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
<li>ä¸‹é¢çš„è§„åˆ™ç”¨äºç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼ˆ.oæ–‡ä»¶ï¼‰ï¼š<code>.c.o:</code>ã€‚å®ƒå‘Šè¯‰Makeå¦‚ä½•å°†Cæºæ–‡ä»¶ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶ã€‚å®ƒä½¿ç”¨äº†<code>$(CC)</code>å’Œ<code>$(CFLAGS)</code>å˜é‡æ¥æ‰§è¡Œç¼–è¯‘ã€‚</li>
<li><code>vector-memcheck: $(VECTOR_PROG)</code>ï¼šè¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ç›®æ ‡ï¼Œç”¨äºè¿è¡ŒValgrindå†…å­˜æ£€æŸ¥å·¥å…·æ¥æµ‹è¯•<code>$(VECTOR_PROG)</code>ç¨‹åºã€‚</li>
<li><code>clean:</code>ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºæ¸…ç†é¡¹ç›®çš„ç›®æ ‡ã€‚å®ƒåˆ é™¤ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ã€ä¸´æ—¶æ–‡ä»¶ç­‰ã€‚<code>-rm</code>è¡¨ç¤ºå³ä½¿æ–‡ä»¶ä¸å­˜åœ¨ä¹Ÿä¸ä¼šç”Ÿæˆé”™è¯¯æ¶ˆæ¯ï¼Œå› æ­¤å¯ä»¥å®‰å…¨åœ°åˆ é™¤æ–‡ä»¶ã€‚</li>
<li>æœ€åï¼Œæœ‰ä¸€äº›ä¾èµ–å…³ç³»è§„åˆ™ï¼Œç”¨äºç¡®ä¿æºæ–‡ä»¶ï¼ˆ.cæ–‡ä»¶ï¼‰ä¸ç›¸å…³çš„å¤´æ–‡ä»¶ï¼ˆ.hæ–‡ä»¶ï¼‰ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚</li>
</ol>
<p>é€šè¿‡åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ<code>make</code>å¹¶é€‰æ‹©ç›®æ ‡ï¼Œå¯ä»¥æ„å»ºå¯æ‰§è¡Œç¨‹åºï¼Œè¿è¡Œå†…å­˜æ£€æŸ¥ï¼Œæˆ–è€…æ‰§è¡Œæ¸…ç†æ“ä½œï¼Œå…·ä½“å–å†³äºéœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œè¦æ„å»ºæ‰€æœ‰çš„å¯æ‰§è¡Œç¨‹åºï¼Œåªéœ€è¿è¡Œ<code>make</code>ã€‚è¦è¿è¡Œ<code>vector_test</code>çš„å†…å­˜æ£€æŸ¥ï¼Œå¯ä»¥è¿è¡Œ<code>make vector-memcheck</code>ã€‚è¦æ¸…ç†é¡¹ç›®ï¼Œå¯ä»¥è¿è¡Œ<code>make clean</code>ã€‚</p>
<ul>
<li>Bit operations
<ul>
<li>åªèƒ½ç”¨&amp;ï¼Œ^ï¼Œä»¥åŠ ï½œ</li>
<li>ä¸èƒ½å¾ªç¯ï¼Œä¸èƒ½é™¤æ³•ï¼Œä¸èƒ½å–æ¨¡ <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;bit_ops.h&quot;</span></span><br><br><span class="hljs-type">const</span> <span class="hljs-type">unsigned</span> mp[<span class="hljs-number">32</span>] = &#123;<br>    <span class="hljs-number">0x80000000</span>,<br>    <span class="hljs-number">0x40000000</span>,<br>    <span class="hljs-number">0x20000000</span>,<br>    <span class="hljs-number">0x10000000</span>,<br>    <span class="hljs-number">0x08000000</span>,<br>    <span class="hljs-number">0x04000000</span>,<br>    <span class="hljs-number">0x02000000</span>,<br>    <span class="hljs-number">0x01000000</span>,<br>    <span class="hljs-number">0x00800000</span>,<br>    <span class="hljs-number">0x00400000</span>,<br>    <span class="hljs-number">0x00200000</span>,<br>    <span class="hljs-number">0x00100000</span>,<br>    <span class="hljs-number">0x00080000</span>,<br>    <span class="hljs-number">0x00040000</span>,<br>    <span class="hljs-number">0x00020000</span>,<br>    <span class="hljs-number">0x00010000</span>,<br>    <span class="hljs-number">0x00008000</span>,<br>    <span class="hljs-number">0x00004000</span>,<br>    <span class="hljs-number">0x00002000</span>,<br>    <span class="hljs-number">0x00001000</span>,<br>    <span class="hljs-number">0x00000800</span>,<br>    <span class="hljs-number">0x00000400</span>,<br>    <span class="hljs-number">0x00000200</span>,<br>    <span class="hljs-number">0x00000100</span>,<br>    <span class="hljs-number">0x00000080</span>,<br>    <span class="hljs-number">0x00000040</span>,<br>    <span class="hljs-number">0x00000020</span>,<br>    <span class="hljs-number">0x00000010</span>,<br>    <span class="hljs-number">0x00000008</span>,<br>    <span class="hljs-number">0x00000004</span>,<br>    <span class="hljs-number">0x00000002</span>,<br>    <span class="hljs-number">0x00000001</span><br>    &#125;;<br><br><span class="hljs-comment">// Return the nth bit of x.</span><br><span class="hljs-comment">// Assume 0 &lt;= n &lt;= 31</span><br><span class="hljs-type">unsigned</span> <span class="hljs-title function_">get_bit</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> x,<span class="hljs-type">unsigned</span> n)</span>&#123;<br>    n = <span class="hljs-number">31</span> - n;<br><br>    <span class="hljs-keyword">if</span>((x &amp; mp[n])!=<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">// Set the nth bit of the value of x to v.</span><br><span class="hljs-comment">// Assume 0 &lt;= n &lt;= 31, and v is 0 or 1</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">set_bit</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> * x,</span><br><span class="hljs-params">             <span class="hljs-type">unsigned</span> n,</span><br><span class="hljs-params">             <span class="hljs-type">unsigned</span> v)</span> &#123;<br>    n = <span class="hljs-number">31</span> - n;<br>    <span class="hljs-type">unsigned</span> mpn = mp[n];<br>    <span class="hljs-keyword">if</span>(v == <span class="hljs-number">0</span>)&#123;<br>        mpn = mpn ^ <span class="hljs-number">0xFFFFFFFF</span>;<br>        *x = *x &amp; mpn;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(v == <span class="hljs-number">1</span>)<br>        *x = *x | mpn;<br>    <span class="hljs-keyword">return</span> ;<br>&#125;<br><span class="hljs-comment">// Flip the nth bit of the value of x.</span><br><span class="hljs-comment">// Assume 0 &lt;= n &lt;= 31</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">flip_bit</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> * x,</span><br><span class="hljs-params">              <span class="hljs-type">unsigned</span> n)</span> &#123;<br>    <span class="hljs-type">unsigned</span> flipped_value = get_bit(*x, n) ^ <span class="hljs-number">1</span>;<br>    set_bit(x, n, flipped_value);<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>
</ul></li>
<li>LSFR
çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨çº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨ï¼ˆLFSRï¼‰æ˜¯æ•°å­—ç³»ç»Ÿä¸­çš„ä¸€ç§å¸¸è§ç»“æ„ï¼Œå®ƒå…·æœ‰å¤šç§åº”ç”¨ï¼š</li>
</ul>
<ol type="1">
<li><strong>ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ (PRNG)</strong>ï¼šLFSR
æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ–¹å¼æ¥ç”Ÿæˆä¼ªéšæœºæ•°åºåˆ—ã€‚ç”±äºå…¶å›ºå®šçš„ç»“æ„å’Œç‰¹æ€§ï¼Œå®ƒå¯ä»¥åœ¨ç¡¬ä»¶ä¸­éå¸¸é«˜æ•ˆåœ°å®ç°ï¼Œè€Œä¸éœ€è¦å¤§é‡çš„å­˜å‚¨ç©ºé—´æˆ–å¤æ‚çš„ç®—æ³•ã€‚</li>
<li><strong>æµ‹è¯•æ¨¡å¼ç”Ÿæˆ</strong>ï¼šåœ¨ç¡¬ä»¶æµ‹è¯•ä¸­ï¼ŒLFSR
å¸¸ç”¨äºç”Ÿæˆæµ‹è¯•æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨å†…å­˜å’Œé€»è¾‘ç”µè·¯çš„å†…å»ºè‡ªæµ‹ (BIST, Built-In
Self-Test) ä¸­ã€‚</li>
<li><strong>æ•°æ®åŠ å¯†å’Œè§£å¯†</strong>ï¼šç”±äºå…¶ä¼ªéšæœºæ€§ï¼ŒLFSR
å¯ä»¥ç”¨äºæµå¯†ç ä¸­çš„å¯†é’¥æµç”Ÿæˆã€‚å®ƒä»¬ç”Ÿæˆçš„ä½æµå¯ä»¥ä¸æ•°æ®æµè¿›è¡Œå¼‚æˆ–æ“ä½œæ¥åŠ å¯†æˆ–è§£å¯†ä¿¡æ¯ã€‚</li>
<li><strong>è¯¯å·®æ£€æµ‹å’Œçº æ­£</strong>ï¼šLFSR å¯ç”¨äºç”Ÿæˆå’Œæ£€æµ‹å¤šé¡¹å¼ç¼–ç ï¼Œå¦‚
CRC (å¾ªç¯å†—ä½™æ£€æŸ¥)ã€‚è¿™äº›ç¼–ç ç”¨äºæ£€æµ‹æ•°æ®ä¼ è¾“ä¸­çš„é”™è¯¯ã€‚</li>
<li><strong>æ•°å­—é€šä¿¡</strong>ï¼šLFSR
ç”¨äºæ‰©é¢‘é€šä¿¡æŠ€æœ¯ï¼Œä¾‹å¦‚ç›´æ¥åºåˆ—æ‰©é¢‘ã€‚</li>
<li><strong>ä¿¡å·æ‰©å±•</strong>ï¼šåœ¨æŸäº›åº”ç”¨ä¸­ï¼ŒLFSR
å¯ç”¨äºå°†è¾ƒçŸ­çš„ä¿¡å·åºåˆ—æ‰©å±•ä¸ºæ›´é•¿çš„åºåˆ—ã€‚</li>
</ol>
<figure>
<img
src="https://cdn.nlark.com/yuque/0/2023/png/22918222/1698041210599-1419aaee-d528-4a88-a670-e0fe151453dc.png#averageHue=%230f0e0e&amp;clientId=uaef816b2-9c2c-4&amp;from=paste&amp;height=94&amp;id=udd797765&amp;originHeight=188&amp;originWidth=624&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=9768&amp;status=done&amp;style=none&amp;taskId=u0ba0d908-663b-40c8-869b-3f927433a24&amp;title=&amp;width=312" srcset="/img/loading.gif" lazyload
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">lfsr_calculate</span><span class="hljs-params">(<span class="hljs-type">uint16_t</span> *reg)</span> &#123;<br>    <span class="hljs-type">short</span> loc[] = &#123;<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>&#125;;<br>    <span class="hljs-type">uint16_t</span> fill = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">4</span>; i++)&#123;<br>        fill ^= (*reg &gt;&gt; loc[i]) &amp; <span class="hljs-number">1</span>;<br>    &#125;<br>    *reg = *reg &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span>(fill == <span class="hljs-number">1</span>)&#123;<br>        *reg = *reg | (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">15</span>);<br>    &#125;<br>    <span class="hljs-comment">// ä¸éœ€è¦å¡«å……0ï¼Œå› ä¸ºå‘å³ç§»ä½æ“ä½œå·²ç»ä¸ºæœ€å·¦è¾¹çš„ä½è®¾ç½®äº†0</span><br>    <span class="hljs-keyword">return</span> ;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul>
<li>LinkList
<ul>
<li>å¤ªç†Ÿæ‚‰äº†ç›´æ¥æ”¾ä»£ç </li>
<li>æƒ³ä¸€ä¸‹ä¸ºä»€ä¹ˆä¼ æŒ‡é’ˆæ—¶æ˜¯<code>**p</code>è€Œä¸æ˜¯<code>*p</code>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/* Add a node to the end of the linked list. Assume head_ptr is non-null. */</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">append_node</span><span class="hljs-params">(node** head_ptr, <span class="hljs-type">int</span> new_data)</span> </span>&#123;<br>    node *new_node = <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(node));  <span class="hljs-comment">// æ›´æ”¹å˜é‡åä¸ºnew_node</span><br>    <span class="hljs-keyword">if</span> (new_node == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-comment">// å¤„ç†å†…å­˜åˆ†é…å¤±è´¥çš„æƒ…å†µï¼Œä¾‹å¦‚è¿”å›æˆ–é€€å‡º</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    new_node-&gt;val = new_data;<br>    new_node-&gt;next = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-keyword">if</span> (*head_ptr == <span class="hljs-literal">NULL</span>) &#123;<br>        *head_ptr = new_node;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    node* curr = *head_ptr;<br>    <span class="hljs-keyword">while</span> (curr-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        curr = curr-&gt;next;<br>    &#125;<br>    curr-&gt;next = new_node;  <span class="hljs-comment">// è¿æ¥æ–°èŠ‚ç‚¹åˆ°é“¾è¡¨çš„å°¾éƒ¨</span><br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/* Reverse a linked list in place (in other words, without creating a new list).</span><br><span class="hljs-comment">   Assume that head_ptr is non-null. */</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reverse_list</span> <span class="hljs-params">(node** head_ptr)</span> </span>&#123;<br>        node* prev = <span class="hljs-literal">NULL</span>;<br>        node* curr = *head_ptr;<br>        node* next = <span class="hljs-literal">NULL</span>;<br>        <span class="hljs-keyword">if</span>(curr==<span class="hljs-literal">NULL</span> || curr-&gt;next == <span class="hljs-literal">NULL</span>)<br>          <span class="hljs-keyword">return</span>;<br>        <span class="hljs-keyword">while</span> (curr != <span class="hljs-literal">NULL</span>) &#123;<br>                next = curr-&gt;next;<br>                curr-&gt;next = prev;<br>                prev = curr;<br>                curr = next;<br>        &#125;<br>        <span class="hljs-comment">/* Set the new head to be what originally was the last node in the list */</span><br>        *head_ptr = prev;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul>
<li>vector <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> CS61C_VECTOR_H_</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> CS61C_VECTOR_H_</span><br><span class="hljs-comment">/* vector.h originally written by Jeremy Huddleston &lt;jeremyhu@eecs.berkeley.edu&gt; Sp2004</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * So it looks like you&#x27;ve decided to venture into the &quot;other&quot; files of this</span><br><span class="hljs-comment"> * lab.  Good.  C Header files (the .h extension) are a way of telling other .c</span><br><span class="hljs-comment"> * files what they can have access to.  You usually include stdlib.h in your</span><br><span class="hljs-comment"> * C programs, and this process is identical to including this .h file with the</span><br><span class="hljs-comment"> * one change being:</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * #include &quot;file.h&quot;</span><br><span class="hljs-comment"> * versus</span><br><span class="hljs-comment"> * #include &lt;file.h&gt;</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * The difference is that the &lt;&gt; notation is for system header files and the &quot;&quot;</span><br><span class="hljs-comment"> * is for ones you provide yourself (in your local directory for instance).</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * The header file starts off with</span><br><span class="hljs-comment"> * #ifndef CS61C_VECTOR_H_</span><br><span class="hljs-comment"> * #define CS61C_VECTOR_H_</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * and ends with a final #endif.  This prevents the file from being included</span><br><span class="hljs-comment"> * more than once which could&#x27;ve possibly resulted in an infinite loop of</span><br><span class="hljs-comment"> * file inclusions.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * First, we define the &#x27;vector_t&#x27; datatype.  This next line says that a &#x27;vector_t&#x27;</span><br><span class="hljs-comment"> * is the same as a &#x27;struct vector_t&#x27;.  So anywhere in the code after this, we</span><br><span class="hljs-comment"> * can use &#x27;vector_t *&#x27; to mean a pointer to a &#x27;struct vector_t&#x27; (which is defined in</span><br><span class="hljs-comment"> * vector.c).  We can get away with doing this even though we don&#x27;t know what a</span><br><span class="hljs-comment"> * struct vector is because all struct pointers have the same representation in memory.</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">vector_t</span> <span class="hljs-title">vector_t</span>;</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> *  Next, we provide the prototypes for the functions defined in vector.c.  This</span><br><span class="hljs-comment"> *  is a way of telling the .c files that #include this header what they will</span><br><span class="hljs-comment"> *  have access to.</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">/* Create a new vector */</span><br><span class="hljs-type">vector_t</span> *<span class="hljs-title function_">vector_new</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">/* Free up the memory allocated for the passed vector */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">vector_delete</span><span class="hljs-params">(<span class="hljs-type">vector_t</span> *v)</span>;<br><br><span class="hljs-comment">/* Return the value in the vector */</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">vector_get</span><span class="hljs-params">(<span class="hljs-type">vector_t</span> *v, <span class="hljs-type">size_t</span> loc)</span>;<br><br><span class="hljs-comment">/* Set a value in the vector */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">vector_set</span><span class="hljs-params">(<span class="hljs-type">vector_t</span> *v, <span class="hljs-type">size_t</span> loc, <span class="hljs-type">int</span> value)</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br></code></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/* Include the system headers we need */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-comment">/* Include our header */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vector.h&quot;</span></span><br><br><span class="hljs-comment">/* Define what our struct is */</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">vector_t</span> &#123;<br>    <span class="hljs-type">size_t</span> size;<br>    <span class="hljs-type">int</span> *data;<br>&#125;;<br><br><span class="hljs-comment">/* Utility function to handle allocation failures. In this</span><br><span class="hljs-comment">   case we print a message and exit. */</span><br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">allocation_failed</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">fprintf</span>(stderr, <span class="hljs-string">&quot;Out of memory.\n&quot;</span>);<br>    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">/* Bad example of how to create a new vector */</span><br><span class="hljs-function"><span class="hljs-type">vector_t</span> *<span class="hljs-title">bad_vector_new</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">//è¿™æ®µä»£ç åœ¨æ ˆä¸Šåˆ›å»ºäº†ä¸€ä¸ªvectorï¼Œè€Œè¿”å›çš„å†…å­˜åœ°å€ä¼šåœ¨å‡½æ•°æ‰§è¡Œå®Œåé”€æ¯</span><br>    <span class="hljs-comment">/* Create the vector and a pointer to it */</span><br>    <span class="hljs-type">vector_t</span> *retval, v;<br>    retval = &amp;v;<br><br>    <span class="hljs-comment">/* Initialize attributes */</span><br>    retval-&gt;size = <span class="hljs-number">1</span>;<br>    retval-&gt;data = <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>));<br>    <span class="hljs-keyword">if</span> (retval-&gt;data == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">allocation_failed</span>();<br>    &#125;<br><br>    retval-&gt;data[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> retval;<br>&#125;<br><br><span class="hljs-comment">/* Another suboptimal way of creating a vector */</span><br><span class="hljs-comment">// åŒæ ·çš„ï¼Œåœ¨æ ˆä¸Šåˆ›å»ºäº†ä¸€ä¸ªvector</span><br><span class="hljs-function"><span class="hljs-type">vector_t</span> <span class="hljs-title">also_bad_vector_new</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">/* Create the vector */</span><br>    <span class="hljs-type">vector_t</span> v;<br><br>    <span class="hljs-comment">/* Initialize attributes */</span><br>    v.size = <span class="hljs-number">1</span>;<br>    v.data = <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>));<br>    <span class="hljs-keyword">if</span> (v.data == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">allocation_failed</span>();<br>    &#125;<br>    v.data[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> v;<br>&#125;<br><br><span class="hljs-comment">/* Create a new vector with a size (length) of 1</span><br><span class="hljs-comment">   and set its single component to zero... the</span><br><span class="hljs-comment">   RIGHT WAY */</span><br><span class="hljs-function"><span class="hljs-type">vector_t</span> *<span class="hljs-title">vector_new</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">/* Declare what this function will return */</span><br>    <span class="hljs-type">vector_t</span> *retval;<br><br>    <span class="hljs-comment">/* First, we need to allocate memory on the heap for the struct */</span><br>    retval = <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">vector_t</span>));<br><br>    <span class="hljs-comment">/* Check our return value to make sure we got memory */</span><br>    <span class="hljs-keyword">if</span> (retval == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">allocation_failed</span>();<br>    &#125;<br><br>    <span class="hljs-comment">/* Now we need to initialize our data.</span><br><span class="hljs-comment">       Since retval-&gt;data should be able to dynamically grow,</span><br><span class="hljs-comment">       what do you need to do? */</span><br>    retval-&gt;size = <span class="hljs-number">1</span>;<br>    retval-&gt;data = <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>));<br><br>    <span class="hljs-comment">/* Check the data attribute of our vector to make sure we got memory */</span><br>    <span class="hljs-keyword">if</span> (retval-&gt;data == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">free</span>(retval);				<span class="hljs-comment">//Why is this line necessary?</span><br>        <span class="hljs-built_in">allocation_failed</span>();<br>    &#125;<br><br>    <span class="hljs-comment">/* Complete the initialization by setting the single component to zero */</span><br>    retval-&gt;data[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">/* and return... */</span><br>    <span class="hljs-keyword">return</span> retval;<br>&#125;<br><br><span class="hljs-comment">/* Return the value at the specified location/component &quot;loc&quot; of the vector */</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">vector_get</span><span class="hljs-params">(<span class="hljs-type">vector_t</span> *v, <span class="hljs-type">size_t</span> loc)</span> </span>&#123;<br><br>    <span class="hljs-comment">/* If we are passed a NULL pointer for our vector, complain about it and exit. */</span><br>    <span class="hljs-keyword">if</span>(v == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">fprintf</span>(stderr, <span class="hljs-string">&quot;vector_get: passed a NULL vector.\n&quot;</span>);<br>        <span class="hljs-built_in">abort</span>();<br>    &#125;<br><br>    <span class="hljs-comment">/* If the requested location is higher than we have allocated, return 0.</span><br><span class="hljs-comment">     * Otherwise, return what is in the passed location.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">if</span> (loc &lt; v-&gt;size) &#123;<br>	<span class="hljs-keyword">return</span> v-&gt;data[loc];<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/* Free up the memory allocated for the passed vector.</span><br><span class="hljs-comment">   Remember, you need to free up ALL the memory that was allocated. */</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">vector_delete</span><span class="hljs-params">(<span class="hljs-type">vector_t</span> *v)</span> </span>&#123;<br>    <span class="hljs-built_in">free</span>(v-&gt;data);<br>    <span class="hljs-built_in">free</span>(v);<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-comment">/* Set a value in the vector. If the extra memory allocation fails, call</span><br><span class="hljs-comment">   allocation_failed(). */</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">vector_set</span><span class="hljs-params">(<span class="hljs-type">vector_t</span> *v, <span class="hljs-type">size_t</span> loc, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-comment">/* What do you need to do if the location is greater than the size we have</span><br><span class="hljs-comment">     * allocated?  Remember that unset locations should contain a value of 0.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">if</span>(loc &lt; v-&gt;size) &#123;<br>        v-&gt;data[loc] = value;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-type">int</span> *new_data = <span class="hljs-built_in">realloc</span>(v-&gt;data, (loc + <span class="hljs-number">1</span>) * <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>));<br>        <span class="hljs-keyword">if</span>(!new_data) &#123;<br>            <span class="hljs-built_in">allocation_failed</span>();<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">size_t</span> i = v-&gt;size; i &lt;= loc; i++) &#123;<br>            new_data[i] = <span class="hljs-number">0</span>;<br>        &#125;<br>        v-&gt;data = new_data;<br>        v-&gt;size = loc + <span class="hljs-number">1</span>;<br>        v-&gt;data[loc] = value;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h2 id="lab-3">Lab 3</h2>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E7%AC%94%E8%AE%B0/">#ç¬”è®°</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>cs16c</div>
      <div>http://shuaizhang1998.github.io/2023/11/19/CS61C_ Great Ideas in Computer Architecture/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Zs</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2023å¹´11æœˆ19æ—¥</div>
        </div>
      
      
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/09/30/Introductory%20C%20Programming%20Specialization/" title="c/c++">
                        <span class="hidden-mobile">c/c++</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
