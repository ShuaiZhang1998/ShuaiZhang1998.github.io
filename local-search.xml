<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>28335常见坑</title>
    <link href="/2025/10/05/2025105-28335%E5%B8%B8%E8%A7%81%E5%9D%91%E7%82%B9%E7%BB%84%E5%90%88/"/>
    <url>/2025/10/05/2025105-28335%E5%B8%B8%E8%A7%81%E5%9D%91%E7%82%B9%E7%BB%84%E5%90%88/</url>
    
    <content type="html"><![CDATA[<h1 id="前言">前言</h1><p>不同于软件开发任务，嵌入式开发的文档、学习资源并没有那么完善，特别是岗位职责并非那么“明确”的时候，一个人既要处理软件任务，也要顾及硬件设计的时候。在电路知识、IC使用、嵌入式软件开发经验为零的时候，上手DSP还是一件很折磨的事的。</p><h1 id="字长">字长</h1><p>dsp28335的机器字长是16bit，它并不支持8bit的访问。</p><p>https://software-dl.ti.com/ccs/esd/documents/c2000_byte-accesses-with-the-c28x-cpu.html</p><p>这是一件蛮糟糕的事情，当你想要拓展一些外设，特别是这些外设提供的驱动代码涉及到uint8_t这样类型的时候，又想偷懒的时候，最好祈祷以下的声明是work的：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> _UINT8_T</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _UINT8_T</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> <span class="hljs-type">uint8_t</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">/* _UINT8_T */</span></span><br></code></pre></td></tr></table></figure><p><strong>否则任何利用指针以8bit进行偏移的操作都会失败</strong></p><p><del>例如移植W5500的官方驱动IO库的时候</del></p><h1 id="仿真">仿真</h1><p>一些功能实现的时候，利用仿真进行单步调试、甚至没有开启单步调试仅仅只是在main入口暂停了一下，都可能导致你希望测试的程序无法按照预期执行。</p><ol type="1"><li>EPWM</li><li>ECAN</li><li>SCI（阻塞模式）</li><li>定时器、中断</li></ol><p>所以28335调试的一个特点就是，涉及到片内资源尽可能少打断点。</p><h1 id="栈">栈</h1><p>dsp28335默认给了栈0x400的空间，能放1024个char（16bit-char）。sprintf这样的函数是没法用的，需要扩大栈可用空间。</p><h1 id="程序复位">程序复位</h1><p>程序跑飞到一个奇怪的地方有可能是忘记喂狗了，或者崩溃完程序自己重新启动了。</p>]]></content>
    
    
    <categories>
      
      <category>嵌入式</category>
      
      <category>DSP</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DSP28335</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
